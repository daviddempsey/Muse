!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(d&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(f&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y&&d&&m(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n=o(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=a(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<b.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,_,b,w;(dt="undefined"!=typeof self?self:void 0).fetch||(f="URLSearchParams"in dt,p="Symbol"in dt&&"iterator"in Symbol,d="FileReader"in dt&&"Blob"in dt&&function(){try{return new Blob,!0}catch(t){return!1}}(),v="FormData"in dt,(y="ArrayBuffer"in dt)&&(g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&-1<g.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},p&&(s.prototype[Symbol.iterator]=s.prototype.entries),b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},w=[301,302,303,307,308],l.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},dt.Headers=s,dt.Request=c,dt.Response=l,dt.fetch=function(n,o){return new Promise(function(r,t){var e=new c(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new s,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new l(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&d&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},dt.fetch.polyfill=!0);var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function T(t){try{return!!t()}catch(t){return!0}}function S(t){return"object"==typeof t?null!==t:"function"==typeof t}function C(t){return j?U.createElement(t):{}}function N(t){if(!S(t))throw TypeError(String(t)+" is not an object");return t}function A(t,e){if(!S(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!S(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!S(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!S(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function k(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function O(e,n){try{W(L,e,n)}catch(t){L[e]=n}return n}function P(t,e){return z.call(t,e)}function R(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+Y).toString(36)}function D(t){return P($,t)||(X&&P(Z,t)?$[t]=Z[t]:$[t]=tt("Symbol."+t)),$[t]}var x=function(t){return t&&t.Math==Math&&t},L=x("object"==typeof globalThis&&globalThis)||x("object"==typeof window&&window)||x("object"==typeof self&&self)||x("object"==typeof E&&E)||Function("return this")(),M=!1,F=!T(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),U=L.document,j=S(U)&&S(U.createElement),V=!F&&!T(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a}),q=Object.defineProperty,B={f:F?q:function(t,e,n){if(N(t),e=A(e,!0),N(n),V)try{return q(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},W=F?function(t,e,n){return B.f(t,e,k(1,n))}:function(t,e,n){return t[e]=n,t},K="__core-js_shared__",H=L[K]||O(K,{}),G=I(function(t){(t.exports=function(t,e){return H[t]||(H[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),z={}.hasOwnProperty,Q=0,Y=Math.random(),X=!!Object.getOwnPropertySymbols&&!T(function(){return!String(Symbol())}),J=X&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,$=G("wks"),Z=L.Symbol,tt=J?Z:Z&&Z.withoutSetter||R,et={};et[D("toStringTag")]="z";var nt="[object z]"===String(et),rt=Function.toString;"function"!=typeof H.inspectSource&&(H.inspectSource=function(t){return rt.call(t)});var it,ot,st,at,ut,ct,ht,lt,ft=H.inspectSource,pt=L.WeakMap,dt="function"==typeof pt&&/native code/.test(ft(pt)),vt=G("keys"),x=function(t){return vt[t]||(vt[t]=R(t))},yt={},E=L.WeakMap;ht=dt?(it=new E,ot=it.get,st=it.has,at=it.set,ut=function(t,e){return at.call(it,t,e),e},ct=function(t){return ot.call(it,t)||{}},function(t){return st.call(it,t)}):(lt=x("state"),yt[lt]=!0,ut=function(t,e){return W(t,lt,e),e},ct=function(t){return P(t,lt)?t[lt]:{}},function(t){return P(t,lt)});function gt(t){return bt.call(t).slice(8,-1)}var mt={set:ut,get:ct,has:ht,enforce:function(t){return ht(t)?ct(t):ut(t,{})},getterFor:function(n){return function(t){var e;if(!S(t)||(e=ct(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},_t=I(function(t){var e=mt.get,s=mt.enforce,a=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,r=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||P(n,"name")||W(n,"name",e),s(n).source=a.join("string"==typeof e?e:"")),t!==L?(i?!r&&t[e]&&(o=!0):delete t[e],o?t[e]=n:W(t,e,n)):o?t[e]=n:O(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||ft(this)})}),bt={}.toString,wt=D("toStringTag"),Et="Arguments"==gt(function(){return arguments}()),It=nt?gt:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),wt))?t:Et?gt(e):"Object"==(t=gt(e))&&"function"==typeof e.callee?"Arguments":t},K=nt?{}.toString:function(){return"[object "+It(this)+"]"};nt||_t(Object.prototype,"toString",K,{unsafe:!0});function Tt(t){return isNaN(t=+t)?0:(0<t?Lt:xt)(t)}function St(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Ct(t){return jt(St(t))}function Nt(t){return"function"==typeof t?t:void 0}function At(t,e){return arguments.length<2?Nt(Bt[t])||Nt(L[t]):Bt[t]&&Bt[t][e]||L[t]&&L[t][e]}function kt(t){return 0<t?Wt(Tt(t),9007199254740991):0}function Ot(t,e){var n,r=Ct(t),i=0,o=[];for(n in r)!P(yt,n)&&P(r,n)&&o.push(n);for(;e.length>i;)P(r,n=e[i++])&&(~Gt(o,n)||o.push(n));return o}function Pt(t,e){for(var n=Jt(e),r=B.f,i=qt.f,o=0;o<n.length;o++){var s=n[o];P(t,s)||r(t,s,i(e,s))}}function Rt(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?L:a?L[o]||O(o,{}):(L[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=ie(u,n))&&i.value:u[n],!re(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;Pt(r,i)}(t.sham||i&&i.sham)&&W(r,"sham",!0),_t(u,n,r,t)}}function Dt(t){return Object(St(t))}var xt=Math.ceil,Lt=Math.floor,et=function(o){return function(t,e){var n,r=String(St(t)),i=Tt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},pt={codeAt:et(!1),charAt:et(!0)},dt={}.propertyIsEnumerable,Mt=Object.getOwnPropertyDescriptor,Ft={f:Mt&&!dt.call({1:2},1)?function(t){t=Mt(this,t);return!!t&&t.enumerable}:dt},Ut="".split,jt=T(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==gt(t)?Ut.call(t,""):Object(t)}:Object,Vt=Object.getOwnPropertyDescriptor,qt={f:F?Vt:function(t,e){if(t=Ct(t),e=A(e,!0),V)try{return Vt(t,e)}catch(t){}if(P(t,e))return k(!Ft.f.call(t,e),t[e])}},Bt=L,Wt=Math.min,Kt=Math.max,Ht=Math.min,E=function(a){return function(t,e,n){var r,i=Ct(t),o=kt(i.length),s=function(t,e){t=Tt(t);return t<0?Kt(t+e,0):Ht(t,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},Gt={includes:E(!0),indexOf:E(!1)}.indexOf,zt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qt=zt.concat("length","prototype"),Yt={f:Object.getOwnPropertyNames||function(t){return Ot(t,Qt)}},Xt={f:Object.getOwnPropertySymbols},Jt=At("Reflect","ownKeys")||function(t){var e=Yt.f(N(t)),n=Xt.f;return n?e.concat(n(t)):e},$t=/#|\.prototype\./,nt=function(t,e){t=te[Zt(t)];return t==ne||t!=ee&&("function"==typeof e?T(e):!!e)},Zt=nt.normalize=function(t){return String(t).replace($t,".").toLowerCase()},te=nt.data={},ee=nt.NATIVE="N",ne=nt.POLYFILL="P",re=nt,ie=qt.f,K=!T(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),oe=x("IE_PROTO"),se=Object.prototype,ae=K?Object.getPrototypeOf:function(t){return t=Dt(t),P(t,oe)?t[oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?se:null},et=D("iterator"),dt=!1;[].keys&&("next"in(En=[].keys())?(Tn=ae(ae(En)))!==Object.prototype&&(Cn=Tn):dt=!0),null==Cn&&(Cn={}),P(Cn,et)||W(Cn,et,function(){return this});function ue(){}function ce(t){return"<script>"+t+"</"+ve+">"}var he,E={IteratorPrototype:Cn,BUGGY_SAFARI_ITERATORS:dt},le=Object.keys||function(t){return Ot(t,zt)},fe=F?Object.defineProperties:function(t,e){N(t);for(var n,r=le(e),i=r.length,o=0;o<i;)B.f(t,n=r[o++],e[n]);return t},pe=At("document","documentElement"),de="prototype",ve="script",ye=x("IE_PROTO"),ge=function(){try{he=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;ge=he?function(t){t.write(ce("")),t.close();var e=t.parentWindow.Object;return t=null,e}(he):((t=C("iframe")).style.display="none",pe.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ce("document.F=Object")),t.close(),t.F);for(var e=zt.length;e--;)delete ge[de][zt[e]];return ge()};yt[ye]=!0;function me(t,e,n){t&&!P(t=n?t:t.prototype,Te)&&Ie(t,Te,{configurable:!0,value:e})}function _e(){return this}function be(){return this}function we(t,e,n,r,i,o,s){function a(t){if(t===i&&d)return d;if(!ke&&t in f)return f[t];switch(t){case"keys":case Pe:case Re:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=Ee(Ce,{next:k(1,n)}),me(t,e,!1),Se[e]=_e}(n,e,r);var u,c,h=e+" Iterator",l=!1,f=t.prototype,p=f[Oe]||f["@@iterator"]||i&&f[i],d=!ke&&p||a(i);if((r="Array"==e&&f.entries||p)&&(t=ae(r.call(new t)),Ae!==Object.prototype&&t.next&&(ae(t)!==Ae&&(Ne?Ne(t,Ae):"function"!=typeof t[Oe]&&W(t,Oe,be)),me(t,h,!0))),i==Pe&&p&&p.name!==Pe&&(l=!0,d=function(){return p.call(this)}),f[Oe]!==d&&W(f,Oe,d),Se[e]=d,i)if(u={values:a(Pe),keys:o?d:a("keys"),entries:a(Re)},s)for(c in u)!ke&&!l&&c in f||_t(f,c,u[c]);else Rt({target:e,proto:!0,forced:ke||l},u);return u}var Ee=Object.create||function(t,e){var n;return null!==t?(ue[de]=N(t),n=new ue,ue[de]=null,n[ye]=t):n=ge(),void 0===e?n:fe(n,e)},Ie=B.f,Te=D("toStringTag"),Se={},Ce=E.IteratorPrototype,Ne=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return N(t),function(t){if(!S(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Ae=E.IteratorPrototype,ke=E.BUGGY_SAFARI_ITERATORS,Oe=D("iterator"),Pe="values",Re="entries",De=pt.charAt,xe="String Iterator",Le=mt.set,Me=mt.getterFor(xe);we(String,"String",function(t){Le(this,{type:xe,string:String(t),index:0})},function(){var t=Me(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=De(e,n),t.index+=n.length,{value:n,done:!1})});var Fe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ue=D("unscopables"),je=Array.prototype;null==je[Ue]&&B.f(je,Ue,{configurable:!0,value:Ee(null)});var nt=function(t){je[Ue][t]=!0},Ve="Array Iterator",qe=mt.set,Be=mt.getterFor(Ve),We=we(Array,"Array",function(t,e){qe(this,{type:Ve,target:Ct(t),index:0,kind:e})},function(){var t=Be(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Se.Arguments=Se.Array,nt("keys"),nt("values"),nt("entries");var Ke,He=D("iterator"),Ge=D("toStringTag"),ze=We.values;for(Ke in Fe){var Qe=L[Ke],Ye=Qe&&Qe.prototype;if(Ye){if(Ye[He]!==ze)try{W(Ye,He,ze)}catch(na){Ye[He]=ze}if(Ye[Ge]||W(Ye,Ge,Ke),Fe[Ke])for(var Xe in We)if(Ye[Xe]!==We[Xe])try{W(Ye,Xe,We[Xe])}catch(na){Ye[Xe]=We[Xe]}}}function Je(t,e,n){for(var r in e)_t(t,r,e[r],n);return t}function $e(t){var e=At(t),t=B.f;F&&e&&!e[an]&&t(e,an,{configurable:!0,get:function(){return this}})}function Ze(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function tn(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function en(t){return void 0!==t&&(Se.Array===t||cn[un]===t)}function nn(r,i,t){if(Ze(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function rn(t){if(null!=t)return t[hn]||t["@@iterator"]||Se[It(t)]}function on(e,t,n,r){try{return r?t(N(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&N(i.call(e)),t}}var sn=L.Promise,an=D("species"),un=D("iterator"),cn=Array.prototype,hn=D("iterator"),ln=I(function(t){function f(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l=nn(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(i=rn(t)))throw TypeError("Target is not iterable");if(en(i)){for(s=0,a=kt(t.length);s<a;s++)if((u=r?l(N(h=t[s])[0],h[1]):l(t[s]))&&u instanceof f)return u;return new f(!1)}o=i.call(t)}for(c=o.next;!(h=c.call(o)).done;)if("object"==typeof(u=on(o,l,h.value,r))&&u&&u instanceof f)return u;return new f(!1)}).stop=function(t){return new f(!0,t)}}),fn=D("iterator"),pn=!1;try{var dn=0,vn={next:function(){return{done:!!dn++}},return:function(){pn=!0}};vn[fn]=function(){return this},Array.from(vn,function(){throw 2})}catch(na){}function yn(t,e){if(!e&&!pn)return!1;var n=!1;try{var r={};r[fn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function gn(t,e){var n;return void 0===(t=N(t).constructor)||null==(n=N(t)[wn])?e:Ze(n)}function mn(t){var e;kn.hasOwnProperty(t)&&(e=kn[t],delete kn[t],e())}function _n(t){return function(){mn(t)}}var bn,wn=D("species"),K=At("navigator","userAgent")||"",En=/(iphone|ipod|ipad).*applewebkit/i.test(K),In=L.location,Tn=L.setImmediate,et=L.clearImmediate,Sn=L.process,Cn=L.MessageChannel,Nn=L.Dispatch,An=0,kn={},On="onreadystatechange",dt=function(t){mn(t.data)},E=function(t){L.postMessage(t+"",In.protocol+"//"+In.host)};Tn&&et||(Tn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return kn[++An]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},bn(An),An},et=function(t){delete kn[t]},"process"==gt(Sn)?bn=function(t){Sn.nextTick(_n(t))}:Nn&&Nn.now?bn=function(t){Nn.now(_n(t))}:Cn&&!En?(Cn=(pt=new Cn).port2,pt.port1.onmessage=dt,bn=nn(Cn.postMessage,Cn,1)):!L.addEventListener||"function"!=typeof postMessage||L.importScripts||T(E)||"file:"===In.protocol?bn=On in C("script")?function(t){pe.appendChild(C("script"))[On]=function(){pe.removeChild(this),mn(t)}}:function(t){setTimeout(_n(t),0)}:(bn=E,L.addEventListener("message",dt,!1)));var Pn,Rn,Dn,xn,Ln,Mn,Fn,Un,E={set:Tn,clear:et},dt=qt.f,jn=E.set,Tn=L.MutationObserver||L.WebKitMutationObserver,Vn=L.process,et=L.Promise,qn="process"==gt(Vn),dt=dt(L,"queueMicrotask"),dt=dt&&dt.value;dt||(Pn=function(){var t,e;for(qn&&(t=Vn.domain)&&t.exit();Rn;){e=Rn.fn,Rn=Rn.next;try{e()}catch(t){throw Rn?xn():Dn=void 0,t}}Dn=void 0,t&&t.enter()},xn=qn?function(){Vn.nextTick(Pn)}:Tn&&!En?(Ln=!0,Mn=document.createTextNode(""),new Tn(Pn).observe(Mn,{characterData:!0}),function(){Mn.data=Ln=!Ln}):et&&et.resolve?(Fn=et.resolve(void 0),Un=Fn.then,function(){Un.call(Fn,Pn)}):function(){jn.call(L,Pn)});function Bn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Ze(n),this.reject=Ze(r)}function Wn(t,e){return N(t),S(e)&&e.constructor===t?e:((0,(t=Gn.f(t)).resolve)(e),t.promise)}function Kn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Hn=dt||function(t){t={fn:t,next:void 0};Dn&&(Dn.next=t),Rn||(Rn=t,xn()),Dn=t},Gn={f:function(t){return new Bn(t)}},et=L.process,dt=et&&et.versions,et=dt&&dt.v8;et?Dr=(Rr=et.split("."))[0]+Rr[1]:K&&(!(Rr=K.match(/Edge\/(\d+)/))||74<=Rr[1])&&(Rr=K.match(/Chrome\/(\d+)/))&&(Dr=Rr[1]);function zn(t){var e;return!(!S(t)||"function"!=typeof(e=t.then))&&e}function Qn(l,f,p){var d;f.notified||(f.notified=!0,d=f.reactions,Hn(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&wr(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(hr("Promise-chain cycle")):(i=zn(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&_r(l,f)}))}function Yn(t,e,n){var r;gr?((r=lr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),L.dispatchEvent(r)):r={promise:e,reason:n},(e=L["on"+t])?e(r):t===mr&&function(t,e){var n=L.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Xn(e,n,r,i){return function(t){e(n,r,t,i)}}function Jn(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Qn(t,e,!0))}var $n,Zn,tr,er,nr=Dr&&+Dr,rr=E.set,ir=D("species"),or="Promise",sr=mt.get,ar=mt.set,ur=mt.getterFor(or),cr=sn,hr=L.TypeError,lr=L.document,fr=L.process,pr=At("fetch"),dr=Gn.f,vr=dr,yr="process"==gt(fr),gr=!!(lr&&lr.createEvent&&L.dispatchEvent),mr="unhandledrejection",dt=re(or,function(){if(!(ft(cr)!==String(cr))){if(66===nr)return!0;if(!yr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=nr&&/native code/.test(cr))return!1;function t(t){t(function(){},function(){})}var e=cr.resolve(1);return(e.constructor={})[ir]=t,!(e.then(function(){})instanceof t)}),et=dt||!yn(function(t){cr.all(t).catch(function(){})}),_r=function(n,r){rr.call(L,function(){var t,e=r.value;if(br(r)&&(t=Kn(function(){yr?fr.emit("unhandledRejection",e,n):Yn(mr,n,e)}),r.rejection=yr||br(r)?2:1,t.error))throw t.value})},br=function(t){return 1!==t.rejection&&!t.parent},wr=function(t,e){rr.call(L,function(){yr?fr.emit("rejectionHandled",t):Yn("rejectionhandled",t,e.value)})},Er=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw hr("Promise can't be resolved itself");var i=zn(t);i?Hn(function(){var e={done:!1};try{i.call(t,Xn(Er,n,e,r),Xn(Jn,n,e,r))}catch(t){Jn(n,e,t,r)}}):(r.value=t,r.state=1,Qn(n,r,!1))}catch(t){Jn(n,{done:!1},t,r)}}};dt&&(cr=function(t){tn(this,cr,or),Ze(t),$n.call(this);var e=sr(this);try{t(Xn(Er,this,e),Xn(Jn,this,e))}catch(t){Jn(this,e,t)}},($n=function(){ar(this,{type:or,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Je(cr.prototype,{then:function(t,e){var n=ur(this),r=dr(gn(this,cr));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=yr?fr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Qn(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Zn=function(){var t=new $n,e=sr(t);this.promise=t,this.resolve=Xn(Er,t,e),this.reject=Xn(Jn,t,e)},Gn.f=dr=function(t){return t===cr||t===tr?new Zn:vr(t)},"function"==typeof sn&&(er=sn.prototype.then,_t(sn.prototype,"then",function(t,e){var n=this;return new cr(function(t,e){er.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof pr&&Rt({global:!0,enumerable:!0,forced:!0},{fetch:function(){return Wn(cr,pr.apply(L,arguments))}}))),Rt({global:!0,wrap:!0,forced:dt},{Promise:cr}),me(cr,or,!1),$e(or),tr=At(or),Rt({target:or,stat:!0,forced:dt},{reject:function(t){var e=dr(this);return e.reject.call(void 0,t),e.promise}}),Rt({target:or,stat:!0,forced:dt},{resolve:function(t){return Wn(this,t)}}),Rt({target:or,stat:!0,forced:et},{all:function(t){var a=this,e=dr(a),u=e.resolve,c=e.reject,n=Kn(function(){var r=Ze(a.resolve),i=[],o=0,s=1;ln(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=dr(n),i=r.reject,e=Kn(function(){var e=Ze(n.resolve);ln(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),Rt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Gn.f(a),u=e.resolve,n=e.reject,r=Kn(function(){var r=Ze(a.resolve),i=[],o=0,s=1;ln(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});K=!!sn&&T(function(){sn.prototype.finally.call({then:function(){}},function(){})});Rt({target:"Promise",proto:!0,real:!0,forced:K},{finally:function(e){var n=gn(this,At("Promise")),t="function"==typeof e;return this.then(t?function(t){return Wn(n,e()).then(function(){return t})}:e,t?function(t){return Wn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof sn||sn.prototype.finally||_t(sn.prototype,"finally",At("Promise").prototype.finally);Bt.Promise;var Ir=mt.set,Tr=mt.getterFor("AggregateError"),Sr=function(t,e){var n=this;if(!(n instanceof Sr))return new Sr(t,e);Ne&&(n=Ne(new Error(e),ae(n)));var r=[];return ln(t,r.push,r),F?Ir(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&W(n,"message",String(e)),n};Sr.prototype=Ee(Error.prototype,{constructor:k(5,Sr),message:k(5,""),name:k(5,"AggregateError")}),F&&B.f(Sr.prototype,"errors",{get:function(){return Tr(this).errors},configurable:!0}),Rt({global:!0},{AggregateError:Sr}),Rt({target:"Promise",stat:!0},{try:function(t){var e=Gn.f(this),t=Kn(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});var Cr="No one promise resolved";Rt({target:"Promise",stat:!0},{any:function(t){var u=this,e=Gn.f(u),c=e.resolve,h=e.reject,n=Kn(function(){var r=Ze(u.resolve),i=[],o=0,s=1,a=!1;ln(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(At("AggregateError"))(i,Cr)))})}),--s||h(new(At("AggregateError"))(i,Cr))});return n.error&&h(n.value),e.promise}});function Nr(t,e){var n;return kr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||kr(n.prototype))||S(n)&&null===(n=n[Or]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Ar(t){throw t}var kr=Array.isArray||function(t){return"Array"==gt(t)},Or=D("species"),Pr=[].push,Rr=function(f){var p=1==f,d=2==f,v=3==f,y=4==f,g=6==f,m=5==f||g;return function(t,e,n,r){for(var i,o,s=Dt(t),a=jt(s),u=nn(e,n,3),c=kt(a.length),h=0,r=r||Nr,l=p?r(t,c):d?r(t,0):void 0;h<c;h++)if((m||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:Pr.call(l,i)}else if(y)return!1;return g?-1:v||y?y:l}},Dr={forEach:Rr(0),map:Rr(1),filter:Rr(2),some:Rr(3),every:Rr(4),find:Rr(5),findIndex:Rr(6)},xr=Object.defineProperty,Lr={},E=function(t,e){if(P(Lr,t))return Lr[t];var n=[][t],r=!!P(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=P(e,0)?e[0]:Ar,o=P(e,1)?e[1]:void 0;return Lr[t]=!!n&&!T(function(){if(r&&!F)return 1;var t={length:-1};r?xr(t,1,{enumerable:!0,get:Ar}):t[1]=1,n.call(t,i,o)})},Mr=Dr.find,dt="find",Fr=!0,et=E(dt);dt in[]&&Array(1)[dt](function(){Fr=!1}),Rt({target:"Array",proto:!0,forced:Fr||!et},{find:function(t,e){return Mr(this,t,1<arguments.length?e:void 0)}}),nt(dt);var Ur=Function.call,K=function(t,e,n){return nn(Ur,L[t].prototype[e],n)},jr=(K("Array","find"),Dr.findIndex),Rr="findIndex",Vr=!0,et=E(Rr);Rr in[]&&Array(1)[Rr](function(){Vr=!1}),Rt({target:"Array",proto:!0,forced:Vr||!et},{findIndex:function(t,e){return jr(this,t,1<arguments.length?e:void 0)}}),nt(Rr);function qr(t,e,n){(e=A(e))in t?B.f(t,e,k(0,n)):t[e]=n}K("Array","findIndex");dt=!yn(function(t){Array.from(t)});Rt({target:"Array",stat:!0,forced:dt},{from:function(t,e,n){var r,i,o,s,a,u,c=Dt(t),h="function"==typeof this?this:Array,t=arguments.length,l=1<t?e:void 0,f=void 0!==l,e=rn(c),p=0;if(f&&(l=nn(l,2<t?n:void 0,2)),null==e||h==Array&&en(e))for(i=new h(r=kt(c.length));p<r;p++)u=f?l(c[p],p):c[p],qr(i,p,u);else for(a=(s=e.call(c)).next,i=new h;!(o=a.call(s)).done;p++)u=f?on(s,l,[o.value,p],!0):o.value,qr(i,p,u);return i.length=p,i}});Bt.Array.from;var Br,Wr,Kr=Dr.some,et=!!(Wr=[]["some"])&&T(function(){Wr.call(null,Br||function(){throw 1},1)}),nt=E("some");Rt({target:"Array",proto:!0,forced:!et||!nt},{some:function(t,e){return Kr(this,t,1<arguments.length?e:void 0)}});K("Array","some");function Hr(t){return S(t)&&P(Zr,It(t))}var Gr,Rr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,dt=B.f,zr=L.Int8Array,Qr=zr&&zr.prototype,E=L.Uint8ClampedArray,et=E&&E.prototype,Yr=zr&&ae(zr),Xr=Qr&&ae(Qr),nt=Object.prototype,E=(nt.isPrototypeOf,D("toStringTag")),Jr=R("TYPED_ARRAY_TAG"),$r=Rr&&!!Ne&&"Opera"!==It(L.opera),Rr=!1,Zr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Gr in Zr)L[Gr]||($r=!1);if((!$r||"function"!=typeof Yr||Yr===Function.prototype)&&(Yr=function(){throw TypeError("Incorrect invocation")},$r))for(Gr in Zr)L[Gr]&&Ne(L[Gr],Yr);if((!$r||!Xr||Xr===nt)&&(Xr=Yr.prototype,$r))for(Gr in Zr)L[Gr]&&Ne(L[Gr].prototype,Xr);if($r&&ae(et)!==Xr&&Ne(et,Xr),F&&!P(Xr,E))for(Gr in Rr=!0,dt(Xr,E,{get:function(){return S(this)?this[Jr]:void 0}}),Zr)L[Gr]&&W(L[Gr],Jr,Gr);var et=function(t){if(Hr(t))return t;throw TypeError("Target is not a typed array")},dt=function(t,e,n){if(F){if(n)for(var r in Zr){var i=L[r];i&&P(i.prototype,t)&&delete i.prototype[t]}Xr[t]&&!n||_t(Xr,t,!n&&$r&&Qr[t]||e)}},E=D("iterator"),Rr=L.Uint8Array,ti=We.values,ei=We.keys,ni=We.entries,ri=et,et=dt,dt=Rr&&Rr.prototype[E],Rr=!!dt&&("values"==dt.name||null==dt.name),dt=function(){return ti.call(ri(this))};et("entries",function(){return ni.call(ri(this))}),et("keys",function(){return ei.call(ri(this))}),et("values",dt,!Rr),et(E,dt,!Rr);var ii=Object.assign,oi=Object.defineProperty,dt=!ii||T(function(){if(F&&1!==ii({b:1},ii(oi({},"a",{enumerable:!0,get:function(){oi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ii({},t)[n]||le(ii({},e)).join("")!=r})?function(t){for(var e=Dt(t),n=arguments.length,r=1,i=Xt.f,o=Ft.f;r<n;)for(var s,a=jt(arguments[r++]),u=i?le(a).concat(i(a)):le(a),c=u.length,h=0;h<c;)s=u[h++],F&&!o.call(a,s)||(e[s]=a[s]);return e}:ii;Rt({target:"Object",stat:!0,forced:Object.assign!==dt},{assign:dt});Bt.Object.assign;var si=Ft.f,Rr=function(a){return function(t){for(var e,n=Ct(t),r=le(n),i=r.length,o=0,s=[];o<i;)e=r[o++],F&&!si.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}},dt={entries:Rr(!0),values:Rr(!1)},ai=dt.entries;Rt({target:"Object",stat:!0},{entries:function(t){return ai(t)}});Bt.Object.entries;var ui=dt.values;Rt({target:"Object",stat:!0},{values:function(t){return ui(t)}});Bt.Object.values;function ci(t){if(S(e=t)&&(void 0!==(n=e[hi])?!!n:"RegExp"==gt(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var hi=D("match"),li=D("match"),Rr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[li]=!1,"/./"[e](n)}catch(t){}}return!1};Rt({target:"String",proto:!0,forced:!Rr("includes")},{includes:function(t,e){return!!~String(St(this)).indexOf(ci(t),1<arguments.length?e:void 0)}});K("String","includes");var fi,dt=qt.f,pi="".startsWith,di=Math.min,Rr=Rr("startsWith"),fi=!(Rr||(!(fi=dt(String.prototype,"startsWith"))||fi.writable));Rt({target:"String",proto:!0,forced:!fi&&!Rr},{startsWith:function(t,e){var n=String(St(this));ci(t);e=kt(di(1<arguments.length?e:void 0,n.length)),t=String(t);return pi?pi.call(n,t,e):n.slice(e,e+t.length)===t}});K("String","startsWith");Rt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(St(this)),n="",r=Tt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});K("String","repeat");var vi,yi=D("species"),gi=D("isConcatSpreadable"),mi=9007199254740991,_i="Maximum allowed index exceeded",Rr=51<=nr||!T(function(){var t=[];return t[gi]=!1,t.concat()[0]!==t}),K=(vi="concat",51<=nr||!T(function(){var t=[];return(t.constructor={})[yi]=function(){return{foo:1}},1!==t[vi](Boolean).foo}));Rt({target:"Array",proto:!0,forced:!Rr||!K},{concat:function(){for(var t,e,n,r=Dt(this),i=Nr(r,0),o=0,s=-1,a=arguments.length;s<a;s++)if(function(t){if(!S(t))return!1;var e=t[gi];return void 0!==e?!!e:kr(t)}(n=-1===s?r:arguments[s])){if(e=kt(n.length),mi<o+e)throw TypeError(_i);for(t=0;t<e;t++,o++)t in n&&qr(i,o,n[t])}else{if(mi<=o)throw TypeError(_i);qr(i,o++,n)}return i.length=o,i}});function bi(t){var e=Bt.Symbol||(Bt.Symbol={});P(e,t)||Ni(e,t,{value:Ci.f(t)})}function wi(t,e){var n=qi[t]=Ee(Li[Pi]);return Ri(n,{type:Oi,tag:t,description:e}),F||(n.description=e),n}function Ei(e,t){N(e);var n=Ct(t),t=le(n).concat(Xi(n));return Ai(t,function(t){F&&!Yi.call(n,t)||Qi(e,t,n[t])}),e}var Ii=Yt.f,Ti={}.toString,Si="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],K={f:function(t){return Si&&"[object Window]"==Ti.call(t)?function(t){try{return Ii(t)}catch(t){return Si.slice()}}(t):Ii(Ct(t))}},Ci={f:D},Ni=B.f,Ai=Dr.forEach,ki=x("hidden"),Oi="Symbol",Pi="prototype",Dr=D("toPrimitive"),Ri=mt.set,Di=mt.getterFor(Oi),xi=Object[Pi],Li=L.Symbol,Mi=At("JSON","stringify"),Fi=qt.f,Ui=B.f,ji=K.f,Vi=Ft.f,qi=G("symbols"),Bi=G("op-symbols"),Wi=G("string-to-symbol-registry"),Ki=G("symbol-to-string-registry"),x=G("wks"),G=L.QObject,Hi=!G||!G[Pi]||!G[Pi].findChild,Gi=F&&T(function(){return 7!=Ee(Ui({},"a",{get:function(){return Ui(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Fi(xi,e);r&&delete xi[e],Ui(t,e,n),r&&t!==xi&&Ui(xi,e,r)}:Ui,zi=J?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Li},Qi=function(t,e,n){t===xi&&Qi(Bi,e,n),N(t);e=A(e,!0);return N(n),P(qi,e)?(n.enumerable?(P(t,ki)&&t[ki][e]&&(t[ki][e]=!1),n=Ee(n,{enumerable:k(0,!1)})):(P(t,ki)||Ui(t,ki,k(1,{})),t[ki][e]=!0),Gi(t,e,n)):Ui(t,e,n)},Yi=function(t){var e=A(t,!0),t=Vi.call(this,e);return!(this===xi&&P(qi,e)&&!P(Bi,e))&&(!(t||!P(this,e)||!P(qi,e)||P(this,ki)&&this[ki][e])||t)},G=function(t,e){var n=Ct(t),t=A(e,!0);if(n!==xi||!P(qi,t)||P(Bi,t)){e=Fi(n,t);return!e||!P(qi,t)||P(n,ki)&&n[ki][t]||(e.enumerable=!0),e}},J=function(t){var t=ji(Ct(t)),e=[];return Ai(t,function(t){P(qi,t)||P(yt,t)||e.push(t)}),e},Xi=function(t){var e=t===xi,t=ji(e?Bi:Ct(t)),n=[];return Ai(t,function(t){!P(qi,t)||e&&!P(xi,t)||n.push(qi[t])}),n};X||(_t((Li=function(t){if(this instanceof Li)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==t?String(t):void 0,e=R(t),n=function(t){this===xi&&n.call(Bi,t),P(this,ki)&&P(this[ki],e)&&(this[ki][e]=!1),Gi(this,e,k(1,t))};return F&&Hi&&Gi(xi,e,{configurable:!0,set:n}),wi(e,t)})[Pi],"toString",function(){return Di(this).tag}),_t(Li,"withoutSetter",function(t){return wi(R(t),t)}),Ft.f=Yi,B.f=Qi,qt.f=G,Yt.f=K.f=J,Xt.f=Xi,Ci.f=function(t){return wi(D(t),t)},F&&(Ui(Li[Pi],"description",{configurable:!0,get:function(){return Di(this).description}}),_t(xi,"propertyIsEnumerable",Yi,{unsafe:!0}))),Rt({global:!0,wrap:!0,forced:!X,sham:!X},{Symbol:Li}),Ai(le(x),function(t){bi(t)}),Rt({target:Oi,stat:!0,forced:!X},{for:function(t){var e=String(t);if(P(Wi,e))return Wi[e];t=Li(e);return Wi[e]=t,Ki[t]=e,t},keyFor:function(t){if(!zi(t))throw TypeError(t+" is not a symbol");if(P(Ki,t))return Ki[t]},useSetter:function(){Hi=!0},useSimple:function(){Hi=!1}}),Rt({target:"Object",stat:!0,forced:!X,sham:!F},{create:function(t,e){return void 0===e?Ee(t):Ei(Ee(t),e)},defineProperty:Qi,defineProperties:Ei,getOwnPropertyDescriptor:G}),Rt({target:"Object",stat:!0,forced:!X},{getOwnPropertyNames:J,getOwnPropertySymbols:Xi}),Rt({target:"Object",stat:!0,forced:T(function(){Xt.f(1)})},{getOwnPropertySymbols:function(t){return Xt.f(Dt(t))}}),Mi&&(co=!X||T(function(){var t=Li();return"[null]"!=Mi([t])||"{}"!=Mi({a:t})||"{}"!=Mi(Object(t))}),Rt({target:"JSON",stat:!0,forced:co},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((S(n=e)||void 0!==t)&&!zi(t))return kr(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!zi(e))return e}),r[1]=e,Mi.apply(null,r)}})),Li[Pi][Dr]||W(Li[Pi],Dr,Li[Pi].valueOf),me(Li,Oi),yt[ki]=!0,bi("asyncIterator");var Ji,$i,Zi,to,eo,G=B.f,no=L.Symbol;!F||"function"!=typeof no||"description"in no.prototype&&void 0===no().description||(Ji={},Pt($i=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),t=this instanceof $i?new no(e):void 0===e?no():no(e);return""===e&&(Ji[t]=!0),t},no),(fo=$i.prototype=no.prototype).constructor=$i,Zi=fo.toString,to="Symbol(test)"==String(no("test")),eo=/^Symbol\((.*)\)[^)]+$/,G(fo,"description",{configurable:!0,get:function(){var t=S(this)?this.valueOf():this,e=Zi.call(t);if(P(Ji,t))return"";e=to?e.slice(7,-1):e.replace(eo,"$1");return""===e?void 0:e}}),Rt({global:!0,forced:!0},{Symbol:$i})),bi("hasInstance"),bi("isConcatSpreadable"),bi("iterator"),bi("match"),bi("matchAll"),bi("replace"),bi("search"),bi("species"),bi("split"),bi("toPrimitive"),bi("toStringTag"),bi("unscopables"),me(Math,"Math",!0),me(L.JSON,"JSON",!0);Bt.Symbol;bi("asyncDispose"),bi("dispose"),bi("observable"),bi("patternMatch"),bi("replaceAll");Ci.f("iterator");var ro=!T(function(){return Object.isExtensible(Object.preventExtensions({}))}),io=I(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=B.f,r=R("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!S(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!P(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!P(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return ro&&s.REQUIRED&&o(t)&&!P(t,r)&&n(t),t}};yt[r]=!0}),J=function(s,t,e){function n(t){var n=p[t];_t(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!S(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!S(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!S(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=L[s],p=f&&f.prototype,d=f,v={};return re(s,"function"!=typeof f||!(h||p.forEach&&!T(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),io.REQUIRED=!0):re(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=T(function(){r.has(1)}),a=yn(function(t){new f(t)}),u=!h&&T(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){tn(t,d,s);var n,r,i,o,n=(n=new f,r=t,t=d,Ne&&"function"==typeof(i=r.constructor)&&i!==t&&S(o=i.prototype)&&o!==t.prototype&&Ne(n,o),n);return null!=e&&ln(e,n[l],n,c),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),v[s]=d,Rt({global:!0,forced:d!=f},v),me(d,s),h||e.setStrong(d,s,c),d},oo=B.f,so=io.fastKey,ao=mt.set,uo=mt.getterFor,co={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=a(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=so(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),F?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var s=t(function(t,e){tn(t,s,n),ao(t,{type:n,index:Ee(null),first:void 0,last:void 0,size:0}),F||(t.size=0),null!=e&&ln(e,t[i],t,r)}),a=uo(n),u=function(t,e){var n,r=a(t),t=so(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Je(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,F?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),F?n.size--:this.size--),!!r},forEach:function(t,e){for(var n,r=a(this),i=nn(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),Je(s.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),F&&oo(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=uo(e),o=uo(r);we(t,e,function(t,e){ao(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),$e(e)}},Dr=(J("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},co),Bt.Map,function(t,e,n){var r,i,o,s=arguments.length,a=1<s?e:void 0;return Ze(this),(e=void 0!==a)&&Ze(a),null==t?new this:(r=[],e?(i=0,o=nn(a,2<s?n:void 0,2),ln(t,function(t){r.push(o(t,i++))})):ln(t,r.push,r),new this(r))});Rt({target:"Map",stat:!0},{from:Dr});G=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};Rt({target:"Map",stat:!0},{of:G});function ho(){for(var t,e=N(this),n=Ze(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}Rt({target:"Map",proto:!0,real:!0,forced:M},{deleteAll:function(){return ho.apply(this,arguments)}});function lo(t){return Map.prototype.entries.call(t)}Rt({target:"Map",proto:!0,real:!0,forced:M},{every:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return!ln(r,function(t,e){if(!i(e,t,n))return ln.stop()},void 0,!0,!0).stopped}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{filter:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Map"))),s=Ze(o.set);return ln(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{find:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t,e){if(i(e,t,n))return ln.stop(e)},void 0,!0,!0).result}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{findKey:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t,e){if(i(e,t,n))return ln.stop(t)},void 0,!0,!0).result}}),Rt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Ze(n);var i=Ze(r.has),o=Ze(r.get),s=Ze(r.set);return ln(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});Rt({target:"Map",proto:!0,real:!0,forced:M},{includes:function(r){return ln(lo(N(this)),function(t,e){if((n=e)===(e=r)||n!=n&&e!=e)return ln.stop();var n},void 0,!0,!0).stopped}}),Rt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Ze(e);var r=Ze(n.set);return ln(t,function(t){r.call(n,e(t),t)}),n}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{keyOf:function(n){return ln(lo(N(this)),function(t,e){if(e===n)return ln.stop(t)},void 0,!0,!0).result}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{mapKeys:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Map"))),s=Ze(o.set);return ln(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{mapValues:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Map"))),s=Ze(o.set);return ln(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{merge:function(){for(var t=N(this),e=Ze(t.set),n=0;n<arguments.length;)ln(arguments[n++],e,t,!0);return t}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{reduce:function(n,t){var r=N(this),e=lo(r),i=arguments.length<2,o=i?void 0:t;if(Ze(n),ln(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{some:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t,e){if(i(e,t,n))return ln.stop()},void 0,!0,!0).stopped}}),Rt({target:"Map",proto:!0,real:!0,forced:M},{update:function(t,e,n){var r=N(this),i=arguments.length;Ze(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");n=o?r.get(t):Ze(2<i?n:void 0)(t,r);return r.set(t,e(n,t,r)),r}});var fo=function(t,e,n){var r,i=N(this),n=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof n)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof n&&(r=n(),i.set(t,r)),r};Rt({target:"Map",proto:!0,real:!0,forced:M},{upsert:fo}),Rt({target:"Map",proto:!0,real:!0,forced:M},{updateOrInsert:fo});J("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},co),Bt.Set;Rt({target:"Set",stat:!0},{from:Dr}),Rt({target:"Set",stat:!0},{of:G});Rt({target:"Set",proto:!0,real:!0,forced:M},{addAll:function(){return function(){for(var t=N(this),e=Ze(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{deleteAll:function(){return ho.apply(this,arguments)}});function po(t){return Set.prototype.values.call(t)}Rt({target:"Set",proto:!0,real:!0,forced:M},{every:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3);return!ln(r,function(t){if(!i(t,t,n))return ln.stop()},void 0,!1,!0).stopped}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{difference:function(t){var e=N(this),n=new(gn(e,At("Set")))(e),r=Ze(n.delete);return ln(t,function(t){r.call(n,t)}),n}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{filter:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Set"))),s=Ze(o.add);return ln(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{find:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t){if(i(t,t,n))return ln.stop(t)},void 0,!1,!0).result}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{intersection:function(t){var e=N(this),n=new(gn(e,At("Set"))),r=Ze(e.has),i=Ze(n.add);return ln(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{isDisjointFrom:function(t){var e=N(this),n=Ze(e.has);return!ln(t,function(t){if(!0===n.call(e,t))return ln.stop()}).stopped}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{isSubsetOf:function(t){var e=function(t){var e=rn(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return N(e.call(t))}(this),n=N(t),r=n.has;return"function"!=typeof r&&(n=new(At("Set"))(t),r=Ze(n.has)),!ln(e,function(t){if(!1===r.call(n,t))return ln.stop()},void 0,!1,!0).stopped}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{isSupersetOf:function(t){var e=N(this),n=Ze(e.has);return!ln(t,function(t){if(!1===n.call(e,t))return ln.stop()}).stopped}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{join:function(t){var e=N(this),n=po(e),e=void 0===t?",":String(t),t=[];return ln(n,t.push,t,!1,!0),t.join(e)}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{map:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Set"))),s=Ze(o.add);return ln(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{reduce:function(e,t){var n=N(this),r=po(n),i=arguments.length<2,o=i?void 0:t;if(Ze(e),ln(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{some:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t){if(i(t,t,n))return ln.stop()},void 0,!1,!0).stopped}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{symmetricDifference:function(t){var e=N(this),n=new(gn(e,At("Set")))(e),r=Ze(n.delete),i=Ze(n.add);return ln(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),Rt({target:"Set",proto:!0,real:!0,forced:M},{union:function(t){var e=N(this),e=new(gn(e,At("Set")))(e);return ln(t,Ze(e.add),e),e}});var vo=Math.floor;Rt({target:"Number",stat:!0},{isInteger:function(t){return!S(t)&&isFinite(t)&&vo(t)===t}});Bt.Number.isInteger;Rt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});Bt.Number.isNaN;var yo=function(t,e){return(yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function go(t,e){function n(){this.constructor=t}yo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var mo=function(){return(mo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function _o(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function bo(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function wo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Eo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Io(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Eo(arguments[e]));return t}function To(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function So(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Co(t){try{return Oo.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var No={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ao=function(t,e){if(!t)throw ko(e)},ko=function(t){return new Error("Firebase Database ("+No.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Oo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[h],n[o],n[a],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(So(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4;r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u=a<<6&192|u,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Po(t){return Ro(void 0,t)}function Ro(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Ro(t[n],e[n]));return t}var Do=(xo.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},xo);function xo(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Lo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Mo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lo())}function Fo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Uo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function jo(){return!0===No.NODE_ADMIN}function Vo(){return"indexedDB"in self&&null!=indexedDB}function qo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Bo(){return!(!navigator||!navigator.cookieEnabled)}var Wo,Ko="FirebaseError",Ho=(go(Go,Wo=Error),Go);function Go(t,e,n){e=Wo.call(this,e)||this;return e.code=t,e.customData=n,e.name=Ko,Object.setPrototypeOf(e,Go.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,zo.prototype.create),e}var zo=(Qo.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(Yo,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new Ho(o,t,i)},Qo);function Qo(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Yo=/\{\$([^}]+)}/g;function Xo(t){return JSON.parse(t)}function Jo(t){return JSON.stringify(t)}function $o(t){var e={},n={},r={},i="";try{var o=t.split("."),e=Xo(Co(o[0])||""),n=Xo(Co(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Zo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ts(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function es(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ns(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var rs=(is.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},is.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},is.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},is.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},is);function is(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function os(t,e){e=new ss(t,e);return e.subscribe.bind(e)}var ss=(as.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},as.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},as.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},as.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=us),void 0===r.error&&(r.error=us),void 0===r.complete&&(r.complete=us);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},as.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},as.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},as.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},as.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},as);function as(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function us(){}function cs(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function hs(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}t+=" failed: ";return t+=r+" argument "}function ls(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(hs(t,e,r)+"must be a valid function.")}function fs(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(hs(t,e,r)+"must be a valid context object.")}function ps(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var ds=1e3,vs=2,ys=144e5,gs=.5;function ms(t,e,n){void 0===e&&(e=ds),void 0===n&&(n=vs);n=e*Math.pow(n,t),t=Math.round(gs*n*(Math.random()-.5)*2);return Math.min(ys,n+t)}var _s=(bs.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},bs.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},bs.prototype.setServiceProps=function(t){return this.serviceProps=t,this},bs);function bs(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var ws="[DEFAULT]",Es=(Is.prototype.get=function(t){void 0===t&&(t=ws);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Do;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},Is.prototype.getImmediate=function(t){var e=mo({identifier:ws,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},Is.prototype.getComponent=function(){return this.component},Is.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(ws)}catch(t){}try{for(var r=wo(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Eo(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},Is.prototype.clearInstance=function(t){void 0===t&&(t=ws),this.instancesDeferred.delete(t),this.instances.delete(t)},Is.prototype.delete=function(){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Io(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return t.sent(),[2]}})})},Is.prototype.isComponentSet=function(){return null!=this.component},Is.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===ws?void 0:e),this.instances.set(t,n)),n||null},Is.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ws},Is);function Is(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var Ts=(Ss.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Ss.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Ss.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Es(t,this);return this.providers.set(t,e),e},Ss.prototype.getProviders=function(){return Array.from(this.providers.values())},Ss);function Ss(t){this.name=t,this.providers=new Map}function Cs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Ns,As=[];(Dr=Ns=Ns||{})[Dr.DEBUG=0]="DEBUG",Dr[Dr.VERBOSE=1]="VERBOSE",Dr[Dr.INFO=2]="INFO",Dr[Dr.WARN=3]="WARN",Dr[Dr.ERROR=4]="ERROR",Dr[Dr.SILENT=5]="SILENT";function ks(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Rs[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Cs(["["+i+"]  "+t.name+":"],n))}}var Os={debug:Ns.DEBUG,verbose:Ns.VERBOSE,info:Ns.INFO,warn:Ns.WARN,error:Ns.ERROR,silent:Ns.SILENT},Ps=Ns.INFO,Rs=((G={})[Ns.DEBUG]="log",G[Ns.VERBOSE]="log",G[Ns.INFO]="info",G[Ns.WARN]="warn",G[Ns.ERROR]="error",G),Ds=(Object.defineProperty(xs.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ns))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),xs.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Os[t]:t},Object.defineProperty(xs.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(xs.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),xs.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.DEBUG],t)),this._logHandler.apply(this,Cs([this,Ns.DEBUG],t))},xs.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.VERBOSE],t)),this._logHandler.apply(this,Cs([this,Ns.VERBOSE],t))},xs.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.INFO],t)),this._logHandler.apply(this,Cs([this,Ns.INFO],t))},xs.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.WARN],t)),this._logHandler.apply(this,Cs([this,Ns.WARN],t))},xs.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.ERROR],t)),this._logHandler.apply(this,Cs([this,Ns.ERROR],t))},xs);function xs(t){this.name=t,this._logLevel=Ps,this._logHandler=ks,this._userLogHandler=null,As.push(this)}function Ls(e){As.forEach(function(t){t.setLogLevel(e)})}var Dr=((M={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",M["bad-app-name"]="Illegal App name: '{$appName}",M["duplicate-app"]="Firebase App named '{$appName}' already exists",M["app-deleted"]="Firebase App named '{$appName}' already deleted",M["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",M["invalid-log-argument"]="First argument to `onLog` must be null or a function.",M),Ms=new zo("app","Firebase",Dr),Fs="@firebase/app",Us="[DEFAULT]",js=((G={})[Fs]="fire-core",G["@firebase/analytics"]="fire-analytics",G["@firebase/auth"]="fire-auth",G["@firebase/database"]="fire-rtdb",G["@firebase/functions"]="fire-fn",G["@firebase/installations"]="fire-iid",G["@firebase/messaging"]="fire-fcm",G["@firebase/performance"]="fire-perf",G["@firebase/remote-config"]="fire-rc",G["@firebase/storage"]="fire-gcs",G["@firebase/firestore"]="fire-fst",G["fire-js"]="fire-js",G["firebase-wrapper"]="fire-js-all",G),Vs=new Ds("@firebase/app"),qs=(Object.defineProperty(Bs.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Bs.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Bs.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Bs.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Bs.prototype._getService=function(t,e){return void 0===e&&(e=Us),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Bs.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Us),this.container.getProvider(t).clearInstance(e)},Bs.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Vs.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Bs.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Bs.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ms.create("app-deleted",{appName:this.name_})},Bs);function Bs(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Po(t),this.container=new Ts(e.name),this._addComponent(new _s("app",function(){return o},"PUBLIC"));try{for(var s=wo(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}qs.prototype.name&&qs.prototype.options||qs.prototype.delete||console.log("dc");var Ws="8.0.2";function Ks(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});{"object"==typeof e&&null!==e||(e={name:e})}var n=e;void 0===n.name&&(n.name=Us);e=n.name;if("string"!=typeof e||!e)throw Ms.create("bad-app-name",{appName:String(e)});if(Zo(c,e))throw Ms.create("duplicate-app",{appName:e});n=new u(t,n,l);return c[e]=n},app:f,registerVersion:function(t,e,n){var r=null!==(i=js[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t){n=['Unable to register library "'+r+'" with version "'+e+'":'];return i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Vs.warn(n.join(" "))}o(new _s(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:Ls,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ms.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=As;t<n.length;t++){!function(t){var o=null;e&&e.level&&(o=Os[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:Ns[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}}(t,e)},apps:null,SDK_VERSION:Ws,INTERNAL:{registerComponent:o,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function f(t){if(!Zo(c,t=t||Us))throw Ms.create("no-app",{appName:t});return c[t]}function o(n){var e,t,r,i=n.name;if(h.has(i))return Vs.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw Ms.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&Ro(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=wo(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[i]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var M=function t(){var e=Ks(qs);return e.INTERNAL=mo(mo({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Ro(e,t)},createSubscribe:os,ErrorFactory:zo,deepExtend:Ro}),e}(),Hs=(Gs.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},Gs);function Gs(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Vs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(du=self.firebase.SDK_VERSION)&&0<=du.indexOf("LITE")&&Vs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var zs=M.initializeApp;M.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Vs.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),zs.apply(void 0,t)};var Qs,Ys,Jl=M;(Qs=Jl).INTERNAL.registerComponent(new _s("platform-logger",function(t){return new Hs(t)},"PRIVATE")),Qs.registerVersion(Fs,"0.6.13",Ys),Qs.registerVersion("fire-js","");Jl.registerVersion("firebase","8.0.2","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.v),reject:t(this.g)}},s.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.o(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.m(t):this.h(t)}},s.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Pa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Pa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Pa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,a=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function s(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:g).apply(null,arguments)}function _(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now;function w(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function I(t,e,n){this.code=C+t,this.message=e||N[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new I(e.substring(C.length),t.message,t.serverResponse):null}w(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var S,C="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in A)if(A[e].id===t)return t=A[e],{firebaseEndpoint:t.Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function O(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function P(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,P):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function D(t){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=k("__EID__")?"__EID__":void 0,w(P,Error),P.prototype.name="CustomError",w(R,P),R.prototype.name="AssertionError",x.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var F=new x(function(){return new U},function(t){t.reset()});function U(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++){a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n))}return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=j(t,e)}function H(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function z(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,$=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}t:{var st=l.navigator;if(st){st=st.userAgent;if(st){Y=st;break t}}Y=""}function at(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}var lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<lt.length;i++)e=lt[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument,n=n&&(n.defaultView||n.parentWindow);if((n=n||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(y(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function dt(t,e){this.a=t===mt&&e||"",this.b=gt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===gt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.sa=!0,dt.prototype.ra=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,gt={},mt={};function _t(){if(void 0===yt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(t){l.console&&l.console.error(t.message)}yt=t}else yt=t}return yt}function bt(t,e){this.a=e===St?t:""}function wt(t){return t instanceof bt&&t.constructor===bt?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Et(t,n){var e,r=vt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(It,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dt?vt(t):encodeURIComponent(String(t))}),e=t,t=_t(),new bt(e=t?t.createScriptURL(e):e,St)}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function Ct(t,e){this.a=e===Dt?t:""}function Nt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,kt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ot=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=Ot.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(kt))&&At.test(e[1])?new Ct(t,Dt):null);var e}function Rt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Ot.test(t)||(t="about:invalid#zClosurez"),new Ct(t,Dt))}var Dt={},xt=new Ct("about:invalid#zClosurez",Dt);function Lt(t,e,n){this.a=n===Mt?t:""}Lt.prototype.sa=!0,Lt.prototype.ra=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ft(t,e,n,r){return t=t instanceof Ct?t:Rt(t),e=e||l,n=n instanceof dt?vt(n):n||"",e.open(Nt(t),n,r,void 0)}function Ut(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function jt(t){return rt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace($,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Z,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(tt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(et,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(nt,"&#0;"))),t}function Vt(t){return Vt[" "](t),t}Vt[" "]=s;var qt,Bt=at("Opera"),Wt=at("Trident")||at("MSIE"),Kt=at("Edge"),Ht=Kt||Wt,Gt=at("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),zt=it(Y.toLowerCase(),"webkit")&&!at("Edge");function Qt(){var t=l.document;return t?t.documentMode:void 0}t:{var Yt="",Xt=(Xt=Y,Gt?/rv:([^\);]+)(\)|;)/.exec(Xt):Kt?/Edge\/([\d\.]+)/.exec(Xt):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):zt?/WebKit\/(\S+)/.exec(Xt):Bt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(Xt&&(Yt=Xt?Xt[1]:""),Wt){Xt=Qt();if(null!=Xt&&Xt>parseFloat(Yt)){qt=String(Xt);break t}}qt=Yt}var Jt={};function $t(a){return t=a,e=function(){for(var t=0,e=X(String(qt)).split("."),n=X(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ot(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==o[2].length,0==s[2].length)||ot(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Jt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Zt=l.document&&Wt?Qt()||(parseInt(qt,10)||void 0):void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Wt||9<=Number(Zt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){ut(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!te&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',jt(i.name),'"'),i.type&&(r.push(' type="',jt(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ae(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ne(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}V(s?Q(o):o,r)}}}(n,r,e),r}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){l.setTimeout(function(){throw t},0)}function ce(t,e){ie||function(){{var t;ie=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(fe)}):function(){var t=fe;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")&&(t=function(){var t=ae(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0===t||at("Trident")||at("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Fb,n.Fb=null,t())},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}}}(),he||(ie(),he=!0),le.add(t,e)}var he=!1,le=new M;function fe(){for(var t,e,n;n=e=void 0,n=null,(e=le).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}L(F,t)}he=!1}function pe(t,e){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Ce(n,ve,t)},function(t){if(!(t instanceof De))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ce(n,ye,t)})}catch(t){Ce(this,ye,t)}}var de=0,ve=2,ye=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var me=new x(function(){return new ge},function(t){t.reset()});function _e(t,e,n){var r=me.get();return r.g=t,r.b=e,r.f=n,r}function be(t){if(t instanceof pe)return t;var e=new pe(s);return Ce(e,ve,t),e}function we(n){return new pe(function(t,e){e(n)})}function Ee(t,e,n){Ne(t,e,n,null)||ce(_(e,t))}function Ie(n){return new pe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Ob:!0,value:n}:{Ob:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Ee(n[e],_(t,e,!0),_(t,e,!1));else r(o)})}function Te(t,e){t.b||t.a!=ve&&t.a!=ye||Ae(t),t.f?t.f.next=e:t.b=e,t.f=e}function Se(t,i,o,s){var e=_e(null,null,null);return e.a=new pe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof De?r(t):n(e)}catch(t){r(t)}}:r}),Te(e.a.c=t,e),e.a}function Ce(t,e,n){var r,i;t.a==de&&(t===n&&(e=ye,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ne(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Ae(t),e!=ye||n instanceof De||(i=n,(r=t).g=!0,ce(function(){r.g&&Re.call(null,i)}))))}function Ne(t,e,n,r){if(t instanceof pe)return Te(t,_e(e||s,n||null,r)),1;if(O(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ae(t){t.h||(t.h=!0,ce(t.fc,t))}function ke(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Oe(t,e,n,r){if(n==ye&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pe(e,n,r);else try{e.c?e.g.call(e.f):Pe(e,n,r)}catch(t){Re.call(null,t)}L(me,e)}function Pe(t,e,n){e==ve?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}pe.prototype.then=function(t,e,n){return Se(this,v(t)?t:null,v(e)?e:null,n)},pe.prototype.$goog_Thenable=!0,(t=pe.prototype).na=function(t,e){return(t=_e(t,t,e)).c=!0,Te(this,t),this},t.s=function(t,e){return Se(this,null,t,e)},t.cancel=function(t){var e;this.a==de&&(e=new De(t),ce(function(){!function t(e,n){if(e.a==de)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==de&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ke(r),Oe(r,o,ye,n)))}e.c=null}else Ce(e,ye,n)}(this,e)},this))},t.Zc=function(t){this.a=de,Ce(this,ve,t)},t.$c=function(t){this.a=de,Ce(this,ye,t)},t.fc=function(){for(var t;t=ke(this);)Oe(this,t,this.a,this.i);this.h=!1};var Re=ue;function De(t){P.call(this,t)}function xe(){this.xa=this.xa,this.oa=this.oa}w(De,P);var Le=0;function Me(t){t.xa||(t.xa=!0,t.Da(),0==Le)||(t=t,Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r))}xe.prototype.xa=!(De.prototype.name="cancel"),xe.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Fe=Object.freeze||function(t){return t},Ue=!Wt||9<=Number(Zt),je=Wt&&!$t("9"),Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Gt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:We[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Be,qe);var We=Fe({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,je)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Be.prototype.g=function(){return this.a};var Ke="closure_listenable_"+(1e6*Math.random()|0),He=0;function Ge(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++He,this.va=this.Oa=!1}function ze(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function Qe(t){this.src=t,this.a={},this.b=0}function Ye(t,e){var n=e.type;n in t.a&&H(t.a[n],e)&&(ze(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Xe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}Qe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xe(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new Ge(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),$e={};function Ze(t,e,n,r,i){if(r&&r.once)en(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=ln(n),t&&t[Ke]?pn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=cn(t);if(c||(t[Je]=c=new Qe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=un,r=a=Ue?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Ve||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(on(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=ln(n),t&&t[Ke]?dn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=ln(n),t&&t[Ke]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Xe(o=t.a[e],n,r,i))&&(ze(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&cn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Xe(e,n,r,i)),(n=-1<t?e[t]:null)&&rn(n))}function rn(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[Ke]?Ye(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(on(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cn(e))?(Ye(n,t),0==n.b&&(n.src=null,e[Je]=null)):ze(t)))}function on(t){return t in $e?$e[t]:$e[t]="on"+t}function sn(t,e,n,r){var i=!0;if((t=cn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=an(o,r),i=i&&!1!==o)}return i}function an(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&rn(t),n.call(r,e)}function un(t,e){if(t.va)return!0;if(Ue)return an(t,new Be(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=sn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=sn(r[i],t,!1,e),n=n&&o}return n}function cn(t){return(t=t[Je])instanceof Qe?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(e){return v(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function fn(){xe.call(this),this.v=new Qe(this),(this.$b=this).fb=null}function pn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function dn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function vn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Ua||u.src,u.Oa&&Ye(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function yn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function gn(n){var r=null;return new pe(function(t,e){-1==(r=yn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).s(function(t){throw l.clearTimeout(r),t})}function mn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function _n(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function bn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof bn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function wn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];En(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)En(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function En(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(fn,xe),fn.prototype[Ke]=!0,fn.prototype.addEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},fn.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},fn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t?t=new qe(t,n):t instanceof qe?t.target=t.target||n:(s=t,ft(t=new qe(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=vn(o,r,!0,t)&&s;if(s=vn(o=t.b=n,r,!0,t)&&s,s=vn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=vn(o=t.b=e[i],r,!1,t)&&s;return s},fn.prototype.Da=function(){if(fn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ze(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=bn.prototype).V=function(){wn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return wn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return En(this.b,t)?this.b[t]:e},t.set=function(t,e){En(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof Tn?(this.i=void 0!==e?e:t.i,Sn(this,t.f),this.l=t.l,this.a=t.a,Cn(this,t.g),this.c=t.c,Nn(this,Gn(t.b)),this.h=t.h):t&&(n=String(t).match(In))?(this.i=!!e,Sn(this,n[1]||"",!0),this.l=Rn(n[2]||""),this.a=Rn(n[3]||"",!0),Cn(this,n[4]),this.c=Rn(n[5]||"",!0),Nn(this,n[6]||"",!0),this.h=Rn(n[7]||"")):(this.i=!!e,this.b=new Vn(null,this.i))}function Sn(t,e,n){t.f=n?Rn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Cn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Nn(t,e,n){var r,i;e instanceof Vn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(qn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Wn(this,e),Hn(this,n,t))},r)),r.f=i):(n||(e=Dn(e,Un)),t.b=new Vn(e,t.i))}function An(t,e,n){t.b.set(e,n)}function kn(t,e){return t.b.get(e)}function On(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function Pn(t,e,n,r){var i=new Tn(null,void 0);return t&&Sn(i,t),e&&(i.a=e),n&&Cn(i,n),r&&(i.c=r),i}function Rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Dn(e,Ln,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Dn(e,Ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dn(n,"/"==n.charAt(0)?Fn:Mn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Dn(n,jn)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.f;n?Sn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r,i=t.c;if(n)Cn(e,t.g);else if(n=!!t.c){if("/"!=i.charAt(0)&&(this.a&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(it(r,"./")||it(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.b.toString(),n?Nn(e,Gn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Ln=/[#\/\?@]/g,Mn=/[#\?:]/g,Fn=/[#\?]/g,Un=/[#\?@]/g,jn=/#/g;function Vn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(n){n.a||(n.a=new bn,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Bn(t){var e=_n(t);if(void 0===e)throw Error("Keys are undefined");var n=new Vn(null,void 0);t=mn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Hn(n,i,o):n.add(i,o)}return n}function Wn(t,e){qn(t),e=zn(t,e),En(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,En((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&wn(t)))}function Kn(t,e){return qn(t),e=zn(t,e),En(t.a.b,e)}function Hn(t,e,n){Wn(t,e),0<n.length&&(t.c=null,t.a.set(zn(t,e),Q(n)),t.b+=n.length)}function Gn(t){var e=new Vn;return e.c=t.c,t.a&&(e.a=new bn(t.a),e.b=t.b),e}function zn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Qn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),$n(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Yn,t,e),e.join("")}function Yn(){}(t=Vn.prototype).add=function(t,e){qn(this),this.c=null,t=zn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){qn(this),this.a.forEach(function(t,e){V(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){qn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){qn(this);var e=[];if("string"==typeof t)Kn(this,t)&&(e=z(e,this.a.get(zn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=z(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Kn(this,t=zn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(t,e){e.push('"',t.replace(Jn,function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e}),'"')}function Zn(){var t=mr();return Wt&&Zt&&11==Zt||/Edge\/\d+/.test(t)}function tr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||l.window;var n="about:blank";t&&(n=Nt(Pt(t)||xt)),e.location.href=n}function nr(t){return!!((t=(t||mr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||l.window;try{t.close()}catch(t){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),vr(mr())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Pt(void 0!==n.href?n.href:String(n))||xt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=ae(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Rt(e),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ft("",r,n,s),t=Nt(e),s&&(Ht&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">',t=new Lt(t=(r=_t())?r.createHTML(t):t,0,Mt),r=s.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(D("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(s=Ft(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ar(){var e=null;return new pe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},en(window,"load",e))}).s(function(t){throw nn(window,"load",e),t})}function ur(t){return t=t||mr(),!("file:"!==Ir()&&"ionic:"!==Ir()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function hr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function lr(){return Jl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Jl.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function fr(){var t=lr();return"ReactNative"===t||"Node"===t}var pr="Firefox",dr="Chrome";function vr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?pr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":dr:"Safari"}var yr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in yr)i[yr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=lr())?r=vr(i=mr()):"Worker"===r&&(r=vr(i=mr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function mr(){return l.navigator&&l.navigator.userAgent||""}function _r(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function br(){try{var t=l.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!Zn()||!!l.indexedDB}catch(t){return hr()&&!!l.indexedDB}return!1}function wr(){return(Er()||"chrome-extension:"===Ir()||ur())&&!fr()&&br()&&!hr()}function Er(){return"http:"===Ir()||"https:"===Ir()}function Ir(){return l.location&&l.location.protocol||null}function Tr(t){return!nr(t=t||mr())&&vr(t)!=pr}function Sr(t){return void 0===t?null:Qn(t)}function Cr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Nr(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=vr(t=t||mr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Or(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Pr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=mr(),e=lr(),this.b=nr(t)||"ReactNative"===e}function Rr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function xr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Lr(){return _r("fireauth.oauthhelper",l)||_r("fireauth.iframe",l)}Pr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Er()&&"chrome-extension:"!==Ir()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Mr,Fr={};function Ur(t){Fr[t]||(Fr[t]=!0,Dr(t))}try{var jr={};Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Mr=2==jr.abcd}catch(t){Mr=!1}function Vr(t,e,n){Mr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Vr(t,n,e[n])}function Br(t){var e={};return qr(e,t),e}function Wr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Vr(e,n,Wr(t[n]));return e}function Kr(t){var e=t&&(t[Yr]?"phone":null);if(!(e&&t&&t[Qr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");Vr(this,"uid",t[Qr]),Vr(this,"displayName",t[Gr]||null);var n=null;t[zr]&&(n=new Date(t[zr]).toUTCString()),Vr(this,"enrollmentTime",n),Vr(this,"factorId",e)}function Hr(t){try{var e=new Xr(t)}catch(t){e=null}return e}Kr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Gr="displayName",zr="enrolledAt",Qr="mfaEnrollmentId",Yr="phoneInfo";function Xr(t){Kr.call(this,t),Vr(this,"phoneNumber",t[Yr])}function Jr(t){var e={},n=t[ei],r=t[ri],i=t[ii];if(t=Hr(t[ni]),!i||i!=Zr&&i!=ti&&!n||i==ti&&!r||i==$r&&!t)throw Error("Invalid checkActionCode response!");i==ti?(e[si]=n||null,e[ui]=n||null,e[oi]=r):(e[si]=r||null,e[ui]=r||null,e[oi]=n||null),e[ai]=t||null,Vr(this,hi,i),Vr(this,ci,Wr(e))}w(Xr,Kr),Xr.prototype.w=function(){var t=Xr.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var $r="REVERT_SECOND_FACTOR_ADDITION",Zr="EMAIL_SIGNIN",ti="VERIFY_AND_CHANGE_EMAIL",ei="email",ni="mfaInfo",ri="newEmail",ii="requestType",oi="email",si="fromEmail",ai="multiFactorInfo",ui="previousEmail",ci="data",hi="operation";function li(t){var e=kn(t=On(t),fi)||null,n=kn(t,pi)||null,r=(r=kn(t,yi)||null)&&mi[r]||null;if(!e||!n||!r)throw new I("argument-error",fi+", "+pi+"and "+yi+" are required in a valid action code URL.");qr(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,di)||null,languageCode:kn(t,vi)||null,tenantId:kn(t,gi)||null})}var fi="apiKey",pi="oobCode",di="continueUrl",vi="languageCode",yi="mode",gi="tenantId",mi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:$r,signIn:Zr,verifyAndChangeEmail:ti,verifyEmail:"VERIFY_EMAIL"};function _i(t){try{return new li(t)}catch(t){return null}}function bi(t){var e=t[Si];if(void 0===e)throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[wi])&&"object"==typeof r){e=r[Ai];var n=r[Ci],r=r[Ni];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",Ci+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ni+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new I("argument-error",Ai+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",wi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ti])&&"object"==typeof e){if("string"==typeof(e=e[ki])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",ki+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",Ti+" property must be a non null object when specified.");if(void 0!==(e=t[Ii])&&"boolean"!=typeof e)throw new I("argument-error",Ii+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ei])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",Ei+" property must be a non empty string when specified.");this.i=t||null}var wi="android",Ei="dynamicLinkDomain",Ii="handleCodeInApp",Ti="iOS",Si="url",Ci="installApp",Ni="minimumVersion",Ai="packageName",ki="bundleId";function Oi(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Pi=null;function Ri(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Pi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Pi){Pi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Pi[o]&&(Pi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Di(t){var e=Li(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function xi(t){try{return new Di(t)}catch(t){return null}}function Li(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Ri(t))}catch(t){}return null}Di.prototype.S=function(){return this.f},Di.prototype.i=function(){return this.b},Di.prototype.toString=function(){return this.g};var Mi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Fi=["client_id","response_type","scope","redirect_uri","state"],Ui={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Fi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Fi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Fi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Mi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function ji(t){for(var e in Ui)if(Ui[e].fa==t)return Ui[e];return null}function Vi(t){var e={};e["facebook.com"]=Hi,e["google.com"]=zi,e["github.com"]=Gi,e["twitter.com"]=Qi;var n=t&&t[Bi];try{if(n)return new(e[n]?e[n]:Ki)(t);if(void 0!==t[qi])return new Wi(t)}catch(t){}return null}var qi="idToken",Bi="providerId";function Wi(t){var e,n=t[Bi];if(n||!t[qi]||(e=xi(t[qi]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Vr(this,"providerId",n),Vr(this,"isNewUser",e)}function Ki(t){Wi.call(this,t),Vr(this,"profile",Wr((t=Nr(t.rawUserInfo||"{}"))||{}))}function Hi(t){if(Ki.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Gi(t){if(Ki.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",this.profile&&this.profile.login||null)}function zi(t){if(Ki.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Qi(t){if(Ki.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",t.screenName||null)}function Yi(t){var e=kn(r=On(t),"link"),n=kn(On(e),"link"),r=kn(r,"deep_link_id");return kn(On(r),"link")||r||n||e||t}function Xi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Ji:$i}w(Ki,Wi),w(Hi,Ki),w(Gi,Ki),w(zi,Ki),w(Qi,Ki);var Ji="enroll",$i="signin";function Zi(){}function to(t,n){return t.then(function(t){if(t[Ws]){var e=xi(t[Ws]);if(!e||n!=e.h)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==C+"user-not-found"?new I("user-mismatch"):t})}function eo(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,Vr(this,"providerId",t),Vr(this,"signInMethod",t)}function no(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ro(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new eo(t.providerId,t.pendingToken)}catch(t){}return null}function io(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Vr(this,"idToken",e.idToken),e.accessToken&&Vr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Vr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");Vr(this,"accessToken",e.oauthToken),Vr(this,"secret",e.oauthTokenSecret)}Vr(this,"providerId",t),Vr(this,"signInMethod",n)}function oo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function so(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new io(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ao(t,e){this.Pc=e||[],qr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(ji(t)||{}).Ja||null,this.nb=null}function uo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');ao.call(this,t,[])}function co(t){ao.call(this,t,Fi),this.a=[]}function ho(){co.call(this,"facebook.com")}function lo(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){co.call(this,"github.com")}function po(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function vo(){co.call(this,"google.com"),this.Ca("profile")}function yo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new vo).credential({idToken:n,accessToken:e})}function go(){ao.call(this,"twitter.com",Mi)}function mo(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new io("twitter.com",n,"twitter.com")}function _o(t,e,n){this.a=t,this.f=e,Vr(this,"providerId","password"),Vr(this,"signInMethod",n===wo.EMAIL_LINK_SIGN_IN_METHOD?wo.EMAIL_LINK_SIGN_IN_METHOD:wo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function bo(t){return t&&t.email&&t.password?new _o(t.email,t.password,t.signInMethod):null}function wo(){qr(this,{providerId:"password",isOAuthProvider:!1})}function Eo(t,e){if(!(e=Io(e)))throw new I("argument-error","Invalid email link!");return new _o(t,e.code,wo.EMAIL_LINK_SIGN_IN_METHOD)}function Io(t){return(t=_i(t=Yi(t)))&&t.operation===Zr?t:null}function To(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new I("internal-error");this.a=t,Vr(this,"providerId","phone"),this.fa="phone",Vr(this,"signInMethod","phone")}function So(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new To(n)}return null}function Co(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function No(t){try{this.a=t||Jl.auth()}catch(t){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qr(this,{providerId:"phone",isOAuthProvider:!1})}function Ao(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new To({cb:t,bb:e})}function ko(t){if(t.temporaryProof&&t.phoneNumber)return new To({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return yo(o,n);case"facebook.com":return lo(n);case"github.com":return po(n);case"twitter.com":return mo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new eo(e,s):new io(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new co(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Oo(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function Po(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Ro(t){return(t=t||{}).type?new Po(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function Do(){this.b=null,this.a=[]}Xi.prototype.Ha=function(){return this.a?be(this.a):be(this.b)},Xi.prototype.w=function(){return this.type==Ji?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Zi.prototype.ja=function(){},Zi.prototype.b=function(){},Zi.prototype.c=function(){},Zi.prototype.w=function(){},eo.prototype.ja=function(t){return la(t,no(this))},eo.prototype.b=function(t,e){var n=no(this);return n.idToken=e,fa(t,n)},eo.prototype.c=function(t,e){return to(pa(t,no(this)),e)},eo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},io.prototype.ja=function(t){return la(t,oo(this))},io.prototype.b=function(t,e){var n=oo(this);return n.idToken=e,fa(t,n)},io.prototype.c=function(t,e){return to(pa(t,oo(this)),e)},io.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ao.prototype.Ka=function(t){return this.Hb=ht(t),this},w(uo,ao),w(co,ao),co.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},co.prototype.Pb=function(){return Q(this.a)},co.prototype.credential=function(t,e){e=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new io(this.providerId,e,this.providerId)},w(ho,co),Vr(ho,"PROVIDER_ID","facebook.com"),Vr(ho,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(fo,co),Vr(fo,"PROVIDER_ID","github.com"),Vr(fo,"GITHUB_SIGN_IN_METHOD","github.com"),w(vo,co),Vr(vo,"PROVIDER_ID","google.com"),Vr(vo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(go,ao),Vr(go,"PROVIDER_ID","twitter.com"),Vr(go,"TWITTER_SIGN_IN_METHOD","twitter.com"),_o.prototype.ja=function(t){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,wa,{email:this.a,oobCode:this.f}):Qa(t,Wa,{email:this.a,password:this.f})},_o.prototype.b=function(t,e){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,Ea,{idToken:e,email:this.a,oobCode:this.f}):Qa(t,La,{idToken:e,email:this.a,password:this.f})},_o.prototype.c=function(t,e){return to(this.ja(t),e)},_o.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},qr(wo,{PROVIDER_ID:"password"}),qr(wo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qr(wo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),To.prototype.ja=function(t){return t.eb(Co(this))},To.prototype.b=function(t,e){var n=Co(this);return n.idToken=e,Qa(t,Ha,n)},To.prototype.c=function(t,e){var n=Co(this);return n.operation="REAUTH",to(t=Qa(t,Ga,n),e)},To.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},No.prototype.eb=function(r,i){var o=this.a.a;return be(i.verify()).then(function(n){if("string"!=typeof n)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=y(r)?r.session:null,e=y(r)?r.phoneNumber:r,t=t&&t.type==Ji?t.Ha().then(function(t){return Qa(o,Fa,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==$i?t.Ha().then(function(t){return e=o,t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},Qa(e,Ua,t).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):Qa(o,Da,{phoneNumber:e,recaptchaToken:n});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},qr(No,{PROVIDER_ID:"phone"}),qr(No,{PHONE_SIGN_IN_METHOD:"phone"}),Po.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Po.prototype.S=function(){return this.h},Po.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var xo,Lo=null;function Mo(t){var e="unauthorized-domain",n=void 0,r=On(t);t=r.a,"chrome-extension"==(r=r.f)?n=Ut("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ut("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Fo(t,e,n){I.call(this,t,n),(t=e||{}).Ib&&Vr(this,"email",t.Ib),t.ea&&Vr(this,"phoneNumber",t.ea),t.credential&&Vr(this,"credential",t.credential),t.Yb&&Vr(this,"tenantId",t.Yb)}function Uo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:ko(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Fo(e,n,t.message)}return null}function jo(){}function Vo(t){return t.c||(t.c=t.b())}function qo(){}function Bo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Wo(){}function Ko(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.pc,this),this.a.onerror=m(this.Rb,this),this.a.onprogress=m(this.qc,this),this.a.ontimeout=m(this.uc,this)}function Ho(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Go(t,e,n){this.reset(t,e,n,void 0,void 0)}function zo(t){this.f=t,this.b=this.c=this.a=null}function Qo(t,e){this.name=t,this.value=e}w(Mo,I),w(Fo,I),Fo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},Fo.prototype.toJSON=function(){return this.w()},jo.prototype.c=null,w(qo,jo),qo.prototype.a=function(){var t=Bo(this);return t?new ActiveXObject(t):new XMLHttpRequest},qo.prototype.b=function(){var t={};return Bo(this)&&(t[0]=!0,t[1]=!0),t},xo=new qo,w(Wo,jo),Wo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ko;throw Error("Unsupported browser")},Wo.prototype.b=function(){return{}},(t=Ko.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ho(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",Ho(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,Ho(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Go.prototype.a=null,Go.prototype.reset=function(t,e,n,r,i){delete this.a},Qo.prototype.toString=function(){return this.name};var Yo=new Qo("SEVERE",1e3),Xo=new Qo("WARNING",900),Jo=new Qo("CONFIG",700),$o=new Qo("FINE",500);zo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(D("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new Go(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Zo,ts={},es=null;function ns(t){var e,n,r;return es||(es=new zo(""),(ts[""]=es).c=Jo),(e=ts[t])||(e=new zo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ns(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,ts[t]=e),e}function rs(t,e){t&&t.log($o,e,void 0)}function is(t){this.f=t}function os(t){fn.call(this),this.u=t,this.h=void 0,this.readyState=ss,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.o="GET",this.f="",this.a=!1,this.i=ns("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(is,jo),is.prototype.a=function(){return new os(this.f)},is.prototype.b=(Zo={},function(){return Zo}),w(os,fn);var ss=0;function as(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function us(t){t.readyState=4,t.g=null,t.c=null,t.m=null,cs(t)}function cs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function hs(t){fn.call(this),this.headers=new bn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=ls,this.u=this.R=!1}(t=os.prototype).open=function(t,e){if(this.readyState!=ss)throw this.abort(),Error("Error reopening a connection");this.o=t,this.f=e,this.readyState=1,cs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.o,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,us(this)),this.readyState=ss},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,cs(this)),this.a&&(this.readyState=3,cs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,as(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){var e;this.a&&((e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?us:cs)(this),3==this.readyState&&as(this))},t.sc=function(t){this.a&&(this.response=this.responseText=t,us(this))},t.rc=function(t){this.a&&(this.response=t,us(this))},t.Ta=function(t){var e=this.i;e&&e.log(Xo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&us(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Xo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Xo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(os.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(hs,fn);var ls="";hs.prototype.b=ns("goog.net.XhrIo");var fs=/^https?$/i,ps=["POST","PUT"];function ds(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.G=!1,e.c=!0,e.a=(e.O?e.O:xo).a(),e.A=e.O?Vo(e.O):Vo(xo),e.a.onreadystatechange=m(e.Ub,e);try{rs(e.b,Is(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(t){return rs(e.b,Is(e,"Error opening Xhr: "+t.message)),void ys(e,t)}t=r||"";var o,s=new bn(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)V(t,e,void 0);else for(var n=_n(t),r=mn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=vs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&t instanceof l.FormData,!K(ps,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{bs(e),0<e.g&&(e.u=(o=e.a,Wt&&$t(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),rs(e.b,Is(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ma,e)):e.o=yn(e.Ma,e.g,e)),rs(e.b,Is(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){rs(e.b,Is(e,"Send error: "+t.message)),ys(e,t)}}function vs(t){return"content-type"==t.toLowerCase()}function ys(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,gs(t),_s(t)}function gs(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ms(e){if(e.c&&void 0!==h)if(e.A[1]&&4==ws(e)&&2==Es(e))rs(e.b,Is(e,"Local request error detected and ignored"));else if(e.i&&4==ws(e))yn(e.Ub,0,e);else if(e.dispatchEvent("readystatechange"),4==ws(e)){rs(e.b,Is(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=Es(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(In)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!fs.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<ws(e)?e.a.statusText:""}catch(t){rs(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Es(e)+"]",gs(e)}}finally{_s(e)}}}function _s(e,t){if(e.a){bs(e);var n=e.a,r=e.A[0]?s:null;e.a=null,e.A=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Yo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function bs(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(l.clearTimeout(t.o),t.o=null)}function ws(t){return t.a?t.a.readyState:0}function Es(t){try{return 2<ws(t)?t.a.status:-1}catch(t){return-1}}function Is(t,e){return e+" ["+t.P+" "+t.l+" "+Es(t)+"]"}function Ts(t){var e=Ls;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Ss(t,e,n){t.a=!0,t.c=n,t.f=!e,ks(t)}function Cs(t){if(t.a){if(!t.m)throw new Os;t.m=!1}}function Ns(t,e,n,r){t.g.push([e,n,r]),t.a&&ks(t)}function As(t){return W(t.g,function(t){return v(t[1])})}function ks(e){var n,r;e.h&&e.a&&As(e)&&(n=e.h,(r=Ds[n])&&(l.clearTimeout(r.a),delete Ds[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.o,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(O(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,As(e)||(r=!0)}}e.c=n,t&&(a=m(e.v,e,!0),t=m(e.v,e,!1),n instanceof Ts?(Ns(n,a,t),n.A=!0):n.then(a,t)),r&&(n=new Rs(n),Ds[n.a]=n,e.h=n.a)}function Os(){P.call(this)}function Ps(){P.call(this)}function Rs(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=hs.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",rs(this.b,Is(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(rs(this.b,Is(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_s(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),_s(this,!0)),hs.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?ms(this):this.Ic())},t.Ic=function(){ms(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ls:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Yo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return rs(this.b,"Can not get response: "+t.message),null}},Ts.prototype.cancel=function(t){var e;this.a?this.c instanceof Ts&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new Ps,Cs(this),Ss(this,!1,t)))},Ts.prototype.v=function(t,e){this.i=!1,Ss(this,t,e)},Ts.prototype.then=function(t,e,n){var r,i,o=new pe(function(t,e){r=t,i=e});return Ns(this,r,function(t){t instanceof Ps?o.cancel():i(t)}),o.then(t,e,n)},Ts.prototype.$goog_Thenable=!0,w(Os,P),Os.prototype.message="Deferred has already fired",Os.prototype.name="AlreadyCalledError",w(Ps,P),Ps.prototype.message="Deferred was canceled",Ps.prototype.name="CanceledError",Rs.prototype.c=function(){throw delete Ds[this.a],this.b};var Ds={};function xs(t){var e=document,n=wt(t).toString(),r=ae(document,"SCRIPT"),i={Vb:r,Ma:void 0},o=new Ts(i),s=window.setTimeout(function(){Ms(r,!0);var t=new js(Us,"Timeout reached for loading script "+n);Cs(o),Ss(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ms(r,!1,s),Cs(o),Ss(o,!0,null))},r.onerror=function(){Ms(r,!0,s);var t=new js(Fs,"Error while loading script "+n);Cs(o),Ss(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ne(r,i),i=t,pt(t=r,"HTMLScriptElement"),t.src=wt(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):(null===a&&(a=f(l.document)),a))&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Ls(){var t;this&&this.Vb&&((t=this.Vb)&&"SCRIPT"==t.tagName&&Ms(t,!0,this.Ma))}function Ms(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Fs=0,Us=1;function js(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Vs(t){this.f=t}function qs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Ks,this.g=ht(t.secureTokenHeaders||Hs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||Gs,this.a=ht(t.firebaseHeaders||zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=l.XMLHttpRequest||n&&Jl.INTERNAL.node&&Jl.INTERNAL.node.XMLHttpRequest)&&!hr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new is(self):fr()?this.f=new Vs(n):this.f=new Wo,this.b=null}w(js,P),w(Vs,jo),Vs.prototype.a=function(){return new this.f},Vs.prototype.b=function(){return{}};var Bs,Ws="idToken",Ks=new Pr(3e4,6e4),Hs={"Content-Type":"application/x-www-form-urlencoded"},Gs=new Pr(3e4,6e4),zs={"Content-Type":"application/json"};function Qs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ys(t,e){e&&(t.l=Xs("https://securetoken.googleapis.com/v1/token",e),t.h=Xs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Xs("https://identitytoolkit.googleapis.com/v2/",e))}function Xs(t,e){return t=On(t),e=On(e.url),t.c=t.a+t.c,Sn(t,e.f),t.a=e.a,Cn(t,e.g),t.toString()}function Js(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function $s(t,e,n,r,i,o,s){var a;(t=((a=vr(a=mr())==dr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Wt&&Zt&&!(9<Zt))&&!hr()?(Bs=Bs||new pe(function(t,e){!function(t,e){{((window.gapi||{}).client||{}).request?t():(l[ta]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ns(t,null,e,void 0)}(xs(Et(Zs,{onload:ta})),function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}),m(t.o,t)):m(t.u,t))(e,n,r,i,o,s)}qs.prototype.S=function(){return this.b},qs.prototype.u=function(t,n,e,r,i,o){if(hr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new hs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),pn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return rs(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),dn(a,"ready",function(){s&&clearTimeout(s),Me(this)}),dn(a,"timeout",function(){s&&clearTimeout(s),Me(this),n&&n(null)}),ds(a,t,e,r,i)};var Zs=new dt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),ta="__fcb"+Math.floor(1e6*Math.random()).toString();function ea(t,e,n,r,i,o,s){var a=On(e+n);An(a,"key",t.c),s&&An(a,"cb",b().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(a,c,i[c]);return new pe(function(e,n){$s(t,a.toString(),function(t){t?t.error?n(Xa(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:Qn(Cr(i)),t.a,t.m.get())})}function na(t){if("string"!=typeof(t=t.email)||!sr.test(t))throw new I("invalid-email")}function ra(t){"email"in t&&na(t)}function ia(t){if(!t[Ws]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ht(t));throw new I("internal-error")}}function oa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}qs.prototype.o=function(t,n,r,i,o){var s=this;Bs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},qs.prototype.yb=function(){return Qa(this,Ma,{})},qs.prototype.Ab=function(t,e){return Qa(this,xa,{idToken:t,email:e})},qs.prototype.Bb=function(t,e){return Qa(this,La,{idToken:t,password:e})};var sa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function aa(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function ua(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function ca(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Kn(t=new Vn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ha(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Uo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Uo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Uo(t)):t.errorMessage&&(e=Ya(t.errorMessage)),e)throw e;ia(t)}function la(t,e){return e.returnIdpCredential=!0,Qa(t,ja,e)}function fa(t,e){return e.returnIdpCredential=!0,Qa(t,qa,e)}function pa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Qa(t,Va,e)}function da(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=qs.prototype).Cb=function(t,r){var i={idToken:t},o=[];return ut(sa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Qa(this,xa,i)},t.ub=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Qa(this,ka,t)},t.vb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Qa(this,Ca,t)},t.tb=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Qa(this,Na,t)},t.Db=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Qa(this,Aa,t)},t.eb=function(t){return Qa(this,Ka,t)},t.mb=function(t,e){return Qa(this,Ra,{oobCode:t,newPassword:e})},t.Qa=function(t){return Qa(this,ya,{oobCode:t})},t.ib=function(t){return Qa(this,va,{oobCode:t})};var va={endpoint:"setAccountInfo",B:da,Z:"email",C:!0},ya={endpoint:"resetPassword",B:da,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},C:!0},ga={endpoint:"signupNewUser",B:function(t){if(na(t),!t.password)throw new I("weak-password")},F:ia,U:!0,C:!0},ma={endpoint:"createAuthUri",C:!0},_a={endpoint:"deleteAccount",M:["idToken"]},ba={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},wa={endpoint:"emailLinkSignin",M:["email","oobCode"],B:na,F:ia,U:!0,C:!0},Ea={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:na,F:ia,U:!0},Ia={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:aa,F:ia,C:!0,Na:!0},Ta={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:aa,F:ia,C:!0,Na:!0},Sa={endpoint:"getAccountInfo"},Ca={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");na(t)},Z:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",C:!0},Aa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",C:!0},ka={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");na(t)},Z:"email",C:!0},Oa={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Pa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Ra={endpoint:"resetPassword",B:da,Z:"email",C:!0},Da={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},xa={endpoint:"setAccountInfo",M:["idToken"],B:ra,U:!0},La={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(ra(t),!t.password)throw new I("weak-password")},F:ia,U:!0},Ma={endpoint:"signupNewUser",F:ia,U:!0,C:!0},Fa={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},C:!0,Na:!0},Ua={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},C:!0,Na:!0},ja={endpoint:"verifyAssertion",B:ua,Xa:ca,F:ha,U:!0,C:!0},Va={endpoint:"verifyAssertion",B:ua,Xa:ca,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Ya(t.errorMessage);ia(t)},U:!0,C:!0},qa={endpoint:"verifyAssertion",B:function(t){if(ua(t),!t.idToken)throw new I("internal-error")},Xa:ca,F:ha,U:!0},Ba={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new I("invalid-custom-token")},F:ia,U:!0,C:!0},Wa={endpoint:"verifyPassword",B:function(t){if(na(t),!t.password)throw new I("wrong-password")},F:ia,U:!0,C:!0},Ka={endpoint:"verifyPhoneNumber",B:oa,F:ia,C:!0},Ha={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new I("internal-error");oa(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Uo(t);ia(t)}},Ga={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:oa,F:ia,C:!0},za={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Ws]^!!t.refreshToken)throw new I("internal-error")},C:!0,Na:!0};function Qa(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return we(new I("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return be(n).then(e.B).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ea(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)}).then(function(t){return r=t,e.Xa?e.Xa(n,r):r}).then(e.F).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function Ya(t){return Xa({error:{errors:[{message:t}],code:400,message:t}})}function Xa(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],e);return!e&&t&&(e=Sr(t)),new I("internal-error",e)}function Ja(t){var o;this.b=t,this.a=null,this.qb=(o=this,(eu||(eu=new pe(function(t,e){function n(){Or(),_r("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Or(),e(Error("Network Error"))},timeout:Za.get()})}var r;_r("gapi.iframes.Iframe")?t():_r("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){_r("gapi.load")?n():e(Error("Network Error"))},be(xs(r=Et($a,{onload:r}))).s(function(){e(Error("Network Error"))}))}).s(function(t){throw eu=null,t}))).then(function(){return new pe(function(r,i){_r("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},tu.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var $a=new dt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),Za=new Pr(3e4,6e4),tu=new Pr(5e3,15e3),eu=null;function nu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Pn((t=On(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Pn("https",this.l,null,"/__/auth/iframe"),this.a=t,An(this.a,"apiKey",this.h),An(this.a,"appName",this.i),this.b=null,this.c=[]}function ru(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function iu(t){try{return Jl.app(t).auth().Ga()}catch(t){return[]}}function ou(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function su(t){var a=tr();return Qa(t,Oa,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=On(a)).f,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?On(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(or.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Mo(tr())})}function au(i){return i.v||(i.v=ar().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=iu(i.b),(r=new nu(i.o,i.g,i.b,i.f)).f=t,r.b=e,r.c=Q(n||[]),i.u=r.toString()),i.m=new Ja(i.u),function(r){if(!r.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then(function(){t.a.register("authEvent",e,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.m,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Ro(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",be(e)}return e.status="ERROR",be(e)})}(i)})),i.v}function uu(t){return t.l||(t.A=t.c?gr(t.c,iu(t.b)):null,t.l=new qs(t.g,k(t.i),t.A),t.f&&Ys(t.l,t.f)),t.l}function cu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new ru(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.xb(h).toString()}function hu(t){if(this.a=t||Jl.INTERNAL.reactNative&&Jl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function lu(t){this.b=t,this.a={},this.f=m(this.c,this)}nu.prototype.toString=function(){return this.f?An(this.a,"v",this.f):Wn(this.a.b,"v"),this.b?An(this.a,"eid",this.b):Wn(this.a.b,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):Wn(this.a.b,"fw"),this.a.toString()},ru.prototype.xb=function(t){return this.h=t,this},ru.prototype.toString=function(){var t;if(An(t=this.m?Pn((t=On(this.m.url)).f,t.a,t.g,"/emulator/auth/handler"):Pn("https",this.u,null,"/__/auth/handler"),"apiKey",this.o),An(t,"appName",this.c),An(t,"authType",this.v),this.a.isOAuthProvider){var e,n=this.a;try{var r=Jl.app(this.c).auth().ka()}catch(t){r=null}for(e in n.nb=r,An(t,"providerId",this.a.providerId),n=Cr((r=this.a).Hb))n[e]=n[e].toString();e=r.Pc,n=ht(n);for(var i=0;i<e.length;i++){var o=e[i];o in n&&delete n[o]}r.ob&&r.nb&&!n[r.ob]&&(n[r.ob]=r.nb),ct(n)||An(t,"customParameters",Sr(n))}if("function"==typeof this.a.Pb&&((r=this.a.Pb()).length&&An(t,"scopes",r.join(","))),this.l?An(t,"redirectUrl",this.l):Wn(t.b,"redirectUrl"),this.g?An(t,"eventId",this.g):Wn(t.b,"eventId"),this.i?An(t,"v",this.i):Wn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!kn(t,s)&&An(t,s,this.b[s]);return this.h?An(t,"tid",this.h):Wn(t.b,"tid"),this.f?An(t,"eid",this.f):Wn(t.b,"eid"),(s=iu(this.c)).length&&An(t,"fw",s.join(",")),t.toString()},(t=ou.prototype).Nb=function(e,n,t){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,s=!1;return this.la().then(function(){var t,r;r={type:"webStorageSupport"},au(t=o).then(function(){return e=t.m,n=r,e.qb.then(function(){return new pe(function(t){e.a.send(n.type,n,t,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&rr(e),n(i),s=!0)})}).s(function(){}).then(function(){if(!s)return n=e,new pe(function(e){return function t(){gn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return gn(t).then(function(){n(r)})})},t.Wb=function(){var t=mr();return!Tr(t)&&!kr(t)},t.Sb=function(){return!1},t.Lb=function(e,t,n,r,i,o,s,a){if(!e)return we(new I("popup-blocked"));if(s&&!Tr())return this.la().s(function(t){rr(e),i(t)}),r(),be();this.a||(this.a=su(uu(this)));var u=this;return this.a.then(function(){var t=u.la().s(function(t){throw rr(e),i(t),t});return r(),t}).then(function(){Oo(n),s||er(cu(u.o,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Mb=function(t,e,n,r){this.a||(this.a=su(uu(this)));var i=this;return this.a.then(function(){Oo(e),er(cu(i.o,i.g,i.b,t,e,tr(),n,i.c,void 0,i.i,r,i.f))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.la=function(){var t=this;return au(this).then(function(){return t.m.qb}).s(function(){throw t.a=null,new I("network-request-failed")})},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(e){G(this.h,function(t){return t==e})},(t=hu.prototype).get=function(t){return be(this.a.getItem(t)).then(function(t){return t&&Nr(t)})},t.set=function(t,e){return be(this.a.setItem(t,Sr(e)))},t.T=function(t){return be(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var fu,pu=[];function du(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function vu(t){this.a=t}function yu(t){this.c=t,this.b=!1,this.a=[]}function gu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return we(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new pe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return mu(r,c),t}).s(function(t){throw mu(r,c),t})}function mu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,function(t){return t==e}))}function _u(){if(!Iu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=l.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.o=!1,this.h=null;var t,e,n,r=this;hr()&&self?(this.m=(n=hr()?self:null,V(pu,function(t){t.b==n&&(e=t)}),e||(e=new lu(n),pu.push(e)),e),du(this.m,"keyChanged",function(t,n){return Au(r).then(function(e){return 0<e.length&&V(r.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),du(this.m,"ping",function(){return be(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?be().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):be(null)).then(function(t){(r.h=t)&&(r.g=new yu(new vu(t)),gu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(r.o=!0)}).s(function(){}))})}function bu(i){return new pe(function(e,n){var t=i.v.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new pe(function(t,e){var n=r.v.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return bu(i)}).then(function(t){e(t)}).s(function(t){n(t)}))}})}function wu(t){return t.i||(t.i=bu(t)),t.i}function Eu(i,t){var o=0;return new pe(function e(n,r){wu(i).then(t).then(n).s(function(t){return 3<++o?void r(t):wu(i).then(function(t){return t.close(),i.i=void 0,e(n,r)})})})}function Iu(){try{return l.indexedDB}catch(t){return}}function Tu(t){return t.objectStore("firebaseLocalStorage")}function Su(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Cu(t){return new pe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Nu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?gu(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):be();var n}function Au(r){return wu(r).then(function(t){var i=Tu(Su(t,!1));return i.getAll?Cu(i.getAll()):new pe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function ku(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Ou(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=be().then(function(){if(Iu()){var e=Ar(),n="__sak"+e;return fu=fu||new _u,(i=fu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){V(r.a,function(t){t(e)})}),t})}function Pu(){this.a={},this.type="inMemory"}function Ru(){if(!function(){var t="Node"==lr();if(!(t=Du()||t&&Jl.INTERNAL.node&&Jl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Du()||Jl.INTERNAL.node.localStorage,this.type="localStorage"}function Du(){try{var t=l.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function xu(){this.type="nullStorage"}function Lu(){if(!function(){var t="Node"==lr();if(!(t=Mu()||t&&Jl.INTERNAL.node&&Jl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Mu()||Jl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Mu(){try{var t=l.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Fu(){var t={};t.Browser=Vu,t.Node=qu,t.ReactNative=Bu,t.Worker=Wu,this.a=t[lr()]}lu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],V(t,function(t){e.push(be().then(function(){return t(n.origin,n.data.data)}))}),Ie(e).then(function(t){var e=[];V(t,function(t){e.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})}),V(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},vu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},yu.prototype.close=function(){for(;0<this.a.length;)mu(this,this.a[0]);this.b=!0},(t=_u.prototype).set=function(r,i){var o=this,s=!1;return Eu(this,function(t){return Cu((t=Tu(Su(t,!0))).get(r))}).then(function(n){return Eu(o,function(t){if(t=Tu(Su(t,!0)),n)return n.value=i,Cu(t.put(n));o.b++,s=!0;var e={};return e.fbase_key=r,e.value=i,Cu(t.add(e))})}).then(function(){return o.c[r]=i,Nu(o,r)}).na(function(){s&&o.b--})},t.get=function(e){return Eu(this,function(t){return Cu(Tu(Su(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=this,r=!1;return Eu(this,function(t){return r=!0,n.b++,Cu(Tu(Su(t,!0)).delete(e))}).then(function(){return delete n.c[e],Nu(n,e)}).na(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(ku(n=this),function e(){n.f=setTimeout(function(){n.l=Au(n).then(function(e){0<e.length&&V(n.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){G(this.a,function(t){return t==e}),0==this.a.length&&ku(this)},(t=Ou.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){G(this.a,function(t){return t==e})},(t=Pu.prototype).get=function(t){return be(this.a[t])},t.set=function(t,e){return this.a[t]=e,be()},t.T=function(t){return delete this.a[t],be()},t.ca=function(){},t.ia=function(){},(t=Ru.prototype).get=function(t){var e=this;return be().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Sr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Ze(l.window,"storage",t)},t.ia=function(t){l.window&&nn(l.window,"storage",t)},(t=xu.prototype).get=function(){return be(null)},t.set=function(){return be()},t.T=function(){return be()},t.ca=function(){},t.ia=function(){},(t=Lu.prototype).get=function(t){var e=this;return be().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Sr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Uu,ju,Vu={D:Ru,ab:Lu},qu={D:Ru,ab:Lu},Bu={D:hu,ab:xu},Wu={D:Ru,ab:xu},Ku={qd:"local",NONE:"none",sd:"session"};function Hu(){var t=!(kr(mr())||!cr()),e=Tr(),n=br();this.v=t,this.h=e,this.l=n,this.a={},t=Uu=Uu||new Fu;try{this.g=!Zn()&&Lr()||!l.indexedDB?new t.a.D:new Ou(new(hr()?Pu:t.a.D))}catch(t){this.g=new Pu,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Pu}this.m=new Pu,this.f=m(this.Xb,this),this.b={}}function Gu(){return ju=ju||new Hu}function zu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function Qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Yu(t,e,n){return n=Qu(e,n),"local"==e.D&&(t.b[n]=null),zu(t,e.D).T(n)}function Xu(t){t.c&&(clearInterval(t.c),t.c=null)}function Ju(t){this.a=t,this.b=Gu()}(t=Hu.prototype).get=function(t,e){return zu(this,t.D).get(Qu(t,e))},t.set=function(e,t,n){var r=Qu(e,n),i=this,o=zu(this,e.D);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.D&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Qu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ct(this.a)&&(zu(this,"local").ca(this.f),this.h||(Zn()||!Lr())&&l.indexedDB||!this.l||(Xu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Be({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Xb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Qu(t,e),this.a[t]&&(G(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(zu(this,"local").ia(this.f),Xu(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?zu(this,"local").ia(this.f):Xu(this),this.v)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.lb(e))};Wt&&Zt&&10==Zt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,m(this.lb,this))},t.lb=function(t){this.a[t]&&V(this.a[t],function(t){t()})};var $u,Zu={name:"authEvent",D:"local"};function tc(){this.a=Gu()}function ec(t,e){this.b=nc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===$u&&($u=l.Int32Array?new Int32Array(cc):cc),this.reset()}w(ec,function(){this.b=-1});for(var nc=64,rc=nc-1,ic=[],oc=0;oc<rc;oc++)ic[oc]=0;var sc=z(128,ic);function ac(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|$u[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function uc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ac(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ac(t),i=0)}}t.c=i,t.g+=n}ec.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Q(this.h)};var cc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hc(){ec.call(this,8,lc)}w(hc,ec);var lc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function fc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new tc,this.g=new Ju(this.h),this.f=null,this.b=[],this.a=this.c=null}function pc(t){return new I("invalid-cordova-configuration",t)}function dc(t){var e=new hc;uc(e,t),t=[];var n=8*e.g;e.c<56?uc(e,sc,56-e.c):uc(e,sc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ac(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function vc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function yc(a){return a.f||(a.f=a.la().then(function(){return new pe(function(n){function e(r){t=!0,s&&s.cancel(),gc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=Yi(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Nr(kn(e=On(n),"firebaseError")||null))?T(e):null)?new Po(t.c,t.b,null,null,e,null,t.S()):new Po(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),vc(i,n)})}var i,o,t,s,r;a.Ea(function t(e){return n(e),a.Ra(t),!1}),i=a,o=new Po("unknown",null,null,null,new I("no-auth-event")),t=!1,s=gn(500).then(function(){return gc(i).then(function(){t||vc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(_r("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Lo=Lo||new Do,function(t){var n=Lo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=_r("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function gc(e){var t,n=null;return(t=e.g).b.get(Zu,t.a).then(Ro).then(function(t){return n=t,Yu((t=e.g).b,Zu,t.a)}).then(function(){return n})}function mc(t){this.a=t,this.b=Gu()}(t=fc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(ur(void 0)?ar().then(function(){return new pe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):we(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof _r("universalLinks.subscribe",l))throw pc("cordova-universal-links-plugin-fix is not installed");if(void 0===_r("BuildInfo.packageName",l))throw pc("cordova-plugin-buildinfo is not installed");if("function"!=typeof _r("cordova.plugins.browsertab.openUrl",l))throw pc("cordova-plugin-browsertab is not installed");if("function"!=typeof _r("cordova.InAppBrowser.open",l))throw pc("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")})},t.Nb=function(t,e){return e(new I("operation-not-supported-in-this-environment")),be()},t.Lb=function(){return we(new I("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return we(new I("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=be().then(function(){return Oo(e),yc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Po(t,r,null,o,new I("no-auth-event"),null,i),a=_r("BuildInfo.packageName",l);if("string"!=typeof a)throw new I("invalid-cordova-configuration");var u=_r("BuildInfo.displayName",l),c={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!mr().toLowerCase().match(/android/))return we(new I("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=dc(o),c.sessionId=o;var h=cu(n.m,n.i,n.l,t,e,null,r,n.v,c,n.u,i,n.o);return n.la().then(function(){var t=n.h;return n.A.a.set(Zu,s.w(),t)}).then(function(){var t=_r("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=_r("cordova.plugins.browsertab.openUrl",l)))throw new I("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=_r("cordova.InAppBrowser.open",l)))throw new I("invalid-cordova-configuration");t=mr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new pe(function(e,t){a=function(){var t=_r("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||gn(2e3).then(function(){t(new I("redirect-cancelled-by-user"))})},c=function(){Rr()&&u()},o.addEventListener("resume",u,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return gc(i).then(function(){throw t})})}).na(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Ra(a),i.c=null})},t.Ea=function(e){this.b.push(e),yc(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Po("unknown",null,null,null,new I("no-auth-event")),e(t))})},t.Ra=function(e){G(this.b,function(t){return t==e})};var _c={name:"pendingRedirect",D:"session"};function bc(t){return Yu(t.b,_c,t.a)}function wc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=m(this.o,this),this.b=new Mc,this.A=new qc,this.g=new mc(xc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Ec(this.O,this.m,this.v,S,this.G)}function Ec(t,e,n,r,i){var o=Jl.SDK_VERSION||null;return new(ur()?fc:ou)(t,e,n,o,r,i)}function Ic(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.la().s(function(t){throw e.a==n&&e.reset(),t})}function Tc(n){n.a.Wb()&&Ic(n).s(function(t){var e=new Po("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Oc(t)&&n.o(e)}),n.a.Sb()||Fc(n.b)}function Sc(n,t){K(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(_c,t.a).then(function(t){return"pending"==t}).then(function(t){t?bc(n.g).then(function(){Ic(n).s(function(t){var e=new Po("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Oc(t)&&n.o(e)})}):Tc(n)}).s(function(){Tc(n)})}function Cc(t,e){G(t.h,function(t){return t==e})}wc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Ec(this.O,this.m,this.v,null,this.G),this.i={}},wc.prototype.o=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=b()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=b())),e=!0;break}}return Fc(this.b),e};var Nc=new Pr(2e3,1e4),Ac=new Pr(3e4,6e4);function kc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Oc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Pc(e,t,n,r,i){var o,s;return(s=e.g).b.set(_c,"pending",s.a).then(function(){return e.a.Mb(t,n,r,i).s(function(t){if(Oc(t))throw new I("operation-not-supported-in-this-environment");return o=t,bc(e.g).then(function(){throw o})}).then(function(){return e.a.Zb()?new pe(function(){}):bc(e.g).then(function(){return e.qa()}).then(function(){}).s(function(){})})})}function Rc(t,e,n,r,i){return t.a.Nb(r,function(t){e.ma(n,null,t,i)},Nc.get())}wc.prototype.qa=function(){return this.b.qa()};var Dc={};function xc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Lc(t,e,n,r){var i=xc(e,n,r);return Dc[i]||(Dc[i]=new wc(t,e,n,r)),Dc[i]}function Mc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Fc(t){t.g||(t.g=!0,Vc(t,!1,null,null))}function Uc(t){t.g&&!t.i&&Vc(t,!1,null,null)}function jc(t,e){if(t.b=function(){return be(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Vc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return we(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):jc(t,n):jc(t,{user:null}),t.f=[],t.c=[]}function qc(){}function Bc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Wc(t,e){this.a=e,Vr(this,"verificationId",t)}function Kc(t,e,n,r){return new No(t).eb(e,n).then(function(t){return new Wc(t,r)})}function Hc(t){var e=Li(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qr(this,{token:t,expirationTime:xr(1e3*e.exp),authTime:xr(1e3*e.auth_time),issuedAtTime:xr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Gc(t,e,n){var r=e&&e[Qc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new Xi(null,r),this.b=[];var i=this;V(e[zc]||[],function(t){(t=Hr(t))&&i.b.push(t)}),Vr(this,"auth",this.a),Vr(this,"session",this.c),Vr(this,"hints",this.b)}Mc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Mc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Vc(this,!0,null,t.a),be()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Vc(e,a,t,null)}).s(function(t){Vc(e,a,null,t)})}(this,t,e):we(new I("invalid-auth-event")):(Vc(this,!1,null,null),be())):we(new I("invalid-auth-event"))},Mc.prototype.qa=function(){var i=this;return new pe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new I("timeout"),n.a&&n.a.cancel(),n.a=gn(Ac.get()).then(function(){n.b||(n.g=!0,Vc(n,!0,null,r))}))})},qc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.ma(t.c,null,t.a,t.b),be()):e.Fa(n,r)?(i=e,o=(t=t).b,s=t.c,i.Fa(s,o)(t.g,t.f,t.S(),t.i).then(function(t){i.ma(s,t,null,o)}).s(function(t){i.ma(s,null,t,o)})):we(new I("invalid-auth-event"))):we(new I("invalid-auth-event"))},Wc.prototype.confirm=function(t){return t=Ao(this.verificationId,t),this.a(t)};var zc="mfaInfo",Qc="mfaPendingCredential";function Yc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new Gc(t,e,n),Vr(this,"resolver",this.b)}function Xc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Yc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Jc(){}function $c(t){Vr(this,"factorId",t.fa),this.a=t}function Zc(t){if($c.call(this,t),this.a.fa!=No.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function th(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function eh(t,e){this.a=t,this.b=[],this.c=m(this.xc,this),Ze(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Qr]=t.uid),t.displayName&&(n[Gr]=t.displayName),t.enrollmentTime&&(n[zr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Yr]=t.phoneNumber);try{e=new Xr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),nh(this,r)}function nh(t,e){t.b=e,Vr(t,"enrolledFactors",e)}function rh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ih(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function oh(t){this.c=t,this.b=this.a=null}function sh(t){return t.b&&1e3*t.b.c||0}function ah(t,e){var n=e.refreshToken;t.b=xi(e[Ws]||""),t.a=n}function uh(e,t){return r=e.c,i=t,new pe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?$s(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Xa(t)):t.access_token&&t.refresh_token?e(t):n(new I("internal-error")):n(new I("network-request-failed"))},"POST",Bn(i).toString(),r.g,r.v.get()):n(new I("internal-error"))}).then(function(t){return e.b=xi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function ch(t,e){this.a=t||null,this.b=e||null,qr(this,{lastSignInTime:xr(e||null),creationTime:xr(t||null)})}function hh(t,e,n,r,i,o){qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function lh(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var r,i=Jl.SDK_VERSION?gr(Jl.SDK_VERSION):null;this.a=new qs(this.l,k(S),i),t.emulatorConfig&&Ys(this.a,t.emulatorConfig),this.b=new oh(this.a),_h(this,e[Ws]),ah(this.b,e),Vr(this,"refreshToken",this.b.a),Eh(this,n||{}),fn.call(this),this.P=!1,this.o&&wr()&&(this.i=Lc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=(r=this,new rh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=sh(r.b)-b()-3e5;return 0<t?t:0})),this.$=m(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){Ys(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){dh(o,t.f)},this.aa=null,this.N=new eh(this,n),Vr(this,"multiFactor",this.N)}function fh(t,e){t.ba&&nn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&Ze(e,"languageCodeChanged",t.Ba)}function ph(t,e){t.W&&nn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&Ze(e,"emulatorConfigChanged",t.za)}function dh(t,e){t.X=e,Js(t.a,Jl.SDK_VERSION?gr(Jl.SDK_VERSION,t.X):null)}function vh(t,e){t.aa&&nn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&Ze(e,"frameworkChanged",t.Aa)}function yh(e){try{return Jl.app(e.m).auth()}catch(t){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function gh(t){t.A||t.u.b||(t.u.start(),nn(t,"tokenChanged",t.$),Ze(t,"tokenChanged",t.$))}function mh(t){nn(t,"tokenChanged",t.$),t.u.stop()}function _h(t,e){t.ya=e,Vr(t,"_lat",e)}function bh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ie(e).then(function(){return t})}function wh(t){t.i&&!t.P&&(t.P=!0,Sc(t.i,t))}function Eh(t,e){qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ch(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ih(){}function Th(t){return be().then(function(){if(t.A)throw new I("app-deleted")})}function Sh(t){return B(t.providerData,function(t){return t.providerId})}function Ch(t,e){e&&(Nh(t,e.providerId),t.providerData.push(e))}function Nh(t,e){G(t.providerData,function(t){return t.providerId==e})}function Ah(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Vr(t,e,n)}function kh(e,t){var n,r;e!=t&&(qr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Vr(e,"metadata",new ch((r=t.metadata).a,r.b)):Vr(e,"metadata",new ch),V(t.providerData,function(t){Ch(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Vr(e,"refreshToken",e.b.a),nh(e.N,t.N.b))}function Oh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,Qa((e=i).a,Sa,{idToken:n}).then(m(e.Jc,e)).then(function(){return r||Ah(i,"isAnonymous",!1),t})})}function Ph(t,e){e[Ws]&&t.ya!=e[Ws]&&(ah(t.b,e),t.dispatchEvent(new th("tokenChanged")),_h(t,e[Ws]),Ah(t,"refreshToken",t.b.a))}function Rh(t,e){return Oh(t).then(function(){if(K(Sh(t),e))return bh(t).then(function(){throw new I("provider-already-linked")})})}function Dh(t,e,n){return Br({user:t,credential:ko(e),additionalUserInfo:e=Vi(e),operationType:n})}function xh(t,e){return Ph(t,e),t.reload().then(function(){return t})}function Lh(n,r,t,e,i){if(!wr())return we(new I("operation-not-supported-in-this-environment"));if(n.f&&!i)return we(n.f);var o=ji(t.providerId),s=Ar(n.uid+":::"),a=null;(!Tr()||cr())&&n.o&&t.isOAuthProvider&&(a=cu(n.o,n.l,n.m,r,t,null,s,Jl.SDK_VERSION||null,null,null,n.tenantId));var u=ir(a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(Fh(n),!i)return n.I().then(function(){})}).then(function(){return kc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new pe(function(t,e){n.ma(r,null,new I("cancelled-popup-request"),n.h||null),n.g=t,n.O=e,n.h=s,n.c=Rc(n.i,n,r,u,s)})}).then(function(t){return u&&rr(u),t?Br(t):null}).s(function(t){throw u&&rr(u),t}),Uh(n,e,i)}function Mh(e,t,n,r,i){if(!wr())return we(new I("operation-not-supported-in-this-environment"));if(e.f&&!i)return we(e.f);var o=null,s=Ar(e.uid+":::");return r=r().then(function(){if(Fh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,bh(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(qh,e.w(),t.a)),t}).then(function(){return Pc(e.i,t,n,s,e.tenantId)}).s(function(t){if(o=t,e.ha)return Bh(e.ha);throw o}).then(function(){if(o)throw o}),Uh(e,r,i)}function Fh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Uh(n,t,e){var r,i=(t=t,e=e,(r=n).f&&!e?(t.cancel(),we(r.f)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.f||r.dispatchEvent(new th("userInvalidated")),r.f=t),t}));return n.G.push(i),i.na(function(){H(n.G,i)}),i.s(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Xc(t.w(),yh(n),m(n.ic,n))),e||t})}function jh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ws]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new lh(e,n,t);return t.providerData&&V(t.providerData,function(t){t&&Ch(r,Br(t))}),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Vh(t){this.a=t,this.b=Gu()}Gc.prototype.Qc=function(t){var n=this;return t.rb(this.a.a,this.c).then(function(t){var e=ht(n.f);return delete e[zc],delete e[Qc],ft(e,t),n.g(e)})},w(Yc,I),Jc.prototype.rb=function(t,e,n){return e.type==Ji?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:Co(o.a)}),Qa(s,Ia,t)})):(r=this,i=t,e.Ha().then(function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Co(r.a)}),Qa(i,Ta,t)}));var r,i,o,s,a},w($c,Jc),w(Zc,$c),w(th,qe),(t=eh.prototype).xc=function(t){var e;nh(this,(t=t.gd,e=[],V(t.mfaInfo||[],function(t){(t=Hr(t))&&e.push(t)}),e))},t.Qb=function(){return this.a.I().then(function(t){return new Xi(t,null)})},t.ec=function(e,n){var r=this,i=this.a.a;return this.Qb().then(function(t){return e.rb(i,t,n)}).then(function(t){return Ph(r.a,t),r.a.reload()})},t.ad=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Qa(e,za,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return nh(n,e),Ph(n.a,t),n.a.reload().s(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,function(t){return t.w()})}}},rh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=gn(ih(n,t)).then(function(){return e=l.document,n=null,Rr()||!e?be():new pe(function(t){n=function(){Rr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).s(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).s(function(t){n.i(t)&&e(n,!1)})}(this,!0)},rh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},oh.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:sh(this)}},oh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?we(new I("user-token-expired")):t||!this.b||b()>sh(this)-3e4?this.a?uh(this,{grant_type:"refresh_token",refresh_token:this.a}):be(null):be({accessToken:this.b.toString(),refreshToken:this.a})},ch.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(lh,fn),lh.prototype.wa=function(t){this.pa=t,Qs(this.a,t)},lh.prototype.ka=function(){return this.pa},lh.prototype.Ga=function(){return Q(this.X)},lh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Vr(lh.prototype,"providerId","firebase"),(t=lh.prototype).reload=function(){var t=this;return Uh(this,Th(this).then(function(){return Oh(t).then(function(){return bh(t)}).then(Ih)}))},t.nc=function(t){return this.I(t).then(function(t){return new Hc(t)})},t.I=function(t){var e=this;return Uh(this,Th(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.ya&&(_h(e,t.accessToken),e.dispatchEvent(new th("tokenChanged"))),Ah(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");Eh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?B(e,function(t){return new hh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Ch(this,n[r]);Ah(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new th("userReloaded",{gd:t}))},t.Kc=function(t){return Ur("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Uh(this,t.c(this.a,this.uid).then(function(t){return Ph(e,t),n=Dh(e,t,"reauthenticate"),e.f=null,e.reload()}).then(function(){return n}),!0)},t.Bc=function(t){return Ur("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(e){var n=this,r=null;return Uh(this,Rh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Dh(n,t,"link"),xh(n,t)}).then(function(){return r}))},t.Cc=function(t,e){var n=this;return Uh(this,Rh(this,"phone").then(function(){return Kc(yh(n),t,e,m(n.pb,n))}))},t.Lc=function(t,e){var n=this;return Uh(this,be().then(function(){return Kc(yh(n),t,e,m(n.sb,n))}),!0)},t.Ab=function(e){var n=this;return Uh(this,this.I().then(function(t){return n.a.Ab(t,e)}).then(function(t){return Ph(n,t),n.reload()}))},t.dd=function(e){var n=this;return Uh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Ph(n,t),n.reload()}))},t.Bb=function(e){var n=this;return Uh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return Ph(n,t),n.reload()}))},t.Cb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Th(this);var n=this;return Uh(this,this.I().then(function(t){return n.a.Cb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Ph(n,t),Ah(n,"displayName",t.displayName||null),Ah(n,"photoURL",t.photoUrl||null),V(n.providerData,function(t){"password"===t.providerId&&(Vr(t,"displayName",n.displayName),Vr(t,"photoURL",n.photoURL))}),bh(n)}).then(Ih))},t.bd=function(e){var n=this;return Uh(this,Oh(this).then(function(t){return K(Sh(n),e)?Qa(n.a,ba,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return V(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),V(Sh(n),function(t){e[t]||Nh(n,t)}),e[No.PROVIDER_ID]||Vr(n,"phoneNumber",null),bh(n)}):bh(n).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var e=this;return Uh(this,this.I().then(function(t){return Qa(e.a,_a,{idToken:t})}).then(function(){e.dispatchEvent(new th("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");fh(e,null),ph(e,null),vh(e,null),e.G=[],e.A=!0,mh(e),Vr(e,"refreshToken",null),e.i&&Cc(e.i,e)})},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?m(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?m(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):null},t.Dc=function(t){var e=this;return Lh(this,"linkViaPopup",t,function(){return Rh(e,t.providerId).then(function(){return bh(e)})},!1)},t.Mc=function(t){return Lh(this,"reauthViaPopup",t,function(){return be()},!0)},t.Ec=function(t){var e=this;return Mh(this,"linkViaRedirect",t,function(){return Rh(e,t.providerId)},!1)},t.Nc=function(t){return Mh(this,"reauthViaRedirect",t,function(){return be()},!0)},t.Jb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return fa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Dh(i,t,"link"),xh(i,t)}).then(function(){return o}),Uh(this,t)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Uh(this,be().then(function(){return to(pa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Dh(i,t,"reauthenticate"),Ph(i,t),i.f=null,i.reload()}).then(function(){return o}),!0)},t.tb=function(e){var n=this,r=null;return Uh(this,this.I().then(function(t){return r=t,void 0===e||ct(e)?{}:Oi(new bi(e))}).then(function(t){return n.a.tb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Db=function(e,n){var r=this,i=null;return Uh(this,this.I().then(function(t){return i=t,void 0===n||ct(n)?{}:Oi(new bi(n))}).then(function(t){return r.a.Db(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.ic=function(t){var e=null,n=this;return Uh(this,t=to(be(t),n.uid).then(function(t){return e=Dh(n,t,"reauthenticate"),Ph(n,t),n.f=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ft(e,this.metadata.w()),V(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ft(e,this.N.w()),e};var qh={name:"redirectUser",D:"session"};function Bh(t){return Yu(t.b,qh,t.a)}function Wh(t){var e,n,r,i;this.a=t,this.b=Gu(),this.c=null,this.f=(n=Gh("local"),r=Gh("session"),i=Gh("none"),function(n,r,i){var o=Qu(r,i),s=zu(n,r.D);return n.get(r,i).then(function(t){var e=null;try{e=Nr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Hh,e.a).then(function(t){return t?Gh(t):n})})})}).then(function(t){return e.c=t,Kh(e,t.D)}).s(function(){e.c||(e.c=n)})),this.b.addListener(Gh("local"),this.a,m(this.g,this))}function Kh(t,e){var n,a,r=[];for(n in Ku)Ku[n]!==e&&r.push(Yu(t.b,Gh(Ku[n]),t.a));return r.push(Yu(t.b,Hh,t.a)),a=r,new pe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Ee(a[s],_(t,s),o);else n(i)})}Wh.prototype.g=function(){var e=this,n=Gh("local");Xh(this,function(){return be().then(function(){return e.c&&"local"!=e.c.D?e.b.get(n,e.a):null}).then(function(t){if(t)return Kh(e,"local").then(function(){e.c=n})})})};var Hh={name:"persistence",D:"session"};function Gh(t){return{name:"authUser",D:t}}function zh(t,e){return Xh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Qh(t){return Xh(t,function(){return Yu(t.b,t.c,t.a)})}function Yh(t,e,n){return Xh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),jh(t||{})})})}function Xh(t,e){return t.f=t.f.then(e,e),t.f}function Jh(t){if(this.m=!1,Vr(this,"settings",new Bc),Vr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var n,e,r,i,o,s;t=Jl.SDK_VERSION?gr(Jl.SDK_VERSION):null,this.a=new qs(this.app.options&&this.app.options.apiKey,k(S),t),this.R=[],this.u=[],this.P=[],this.ac=Jl.INTERNAL.createSubscribe(m(this.yc,this)),this.X=void 0,this.bc=Jl.INTERNAL.createSubscribe(m(this.zc,this)),il(this,null),this.l=new Wh(this.app.options.apiKey+":"+this.app.name),this.G=new Vh(this.app.options.apiKey+":"+this.app.name),this.$=cl(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(qh,t.a).then(function(t){return t&&e&&(t.authDomain=e),jh(t||{})})}(e.G,e.app.options.authDomain).then(function(t){return(e.o=t)&&(t.ha=e.G),Bh(e.G)});return cl(e,t)}(n).then(function(){return Yh(n.l,e,n.f)}).then(function(e){return e?(e.ha=n.G,n.o&&(n.o.ga||null)==(e.ga||null)?e:e.reload().then(function(){return zh(n.l,e).then(function(){return e})}).s(function(t){return"auth/network-request-failed"==t.code?e:Qh(n.l)})):null}).then(function(t){il(n,t||null)}),cl(n,t))),this.i=cl(this,(r=this).$.then(function(){return nl(r)}).s(function(){}).then(function(){if(!r.m)return r.pa()}).s(function(){}).then(function(){var t;r.m||(r.ba=!0,(t=r.l).b.addListener(Gh("local"),t.a,r.pa))})),this.ba=!1,this.pa=m(this.Yc,this),this.Ba=m(this.da,this),this.ya=m(this.kc,this),this.za=m(this.vc,this),this.Aa=m(this.wc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&wr()&&(i.gb=i.$.then(function(){var t;if(!i.m)return i.b=Lc(o,s,i.app.name,i.f),Sc(i.b,i),sl(i)&&wh(sl(i)),i.o&&(wh(i.o),(t=i.o).wa(i.ka()),fh(t,i),dh(t=i.o,i.N),vh(t,i),Ys((t=i.o).a,i.f),ph(t,i),i.o=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Fc,this),this.A=0,fn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null,this.N=[],this.f=null}function $h(t){qe.call(this,"languageCodeChanged"),this.h=t}function Zh(t){qe.call(this,"emulatorConfigChanged"),this.c=t}function tl(t){qe.call(this,"frameworkChanged"),this.f=t}function el(t){return t.gb||we(new I("auth-domain-config-required"))}function nl(t){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var e=el(t).then(function(){return t.b.qa()}).then(function(t){return t?Br(t):null});return cl(t,e)}function rl(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.f&&(a.emulatorConfig=o.f),o.$.then(function(){return t=a,e=s,n=o.G,r=o.Ga(),i=new lh(t,e),n&&(i.ha=n),r&&dh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return sl(o)&&t.uid==sl(o).uid?kh(sl(o),t):(il(o,t),wh(t)),o.da(t)}).then(function(){ul(o)})}function il(t,e){var n,r;sl(t)&&(n=sl(t),r=t.Ba,G(n.R,function(t){return t==r}),nn(sl(t),"tokenChanged",t.ya),nn(sl(t),"userDeleted",t.za),nn(sl(t),"userInvalidated",t.Aa),mh(sl(t))),e&&(e.R.push(t.Ba),Ze(e,"tokenChanged",t.ya),Ze(e,"userDeleted",t.za),Ze(e,"userInvalidated",t.Aa),0<t.A&&gh(e)),Vr(t,"currentUser",e),e&&(e.wa(t.ka()),fh(e,t),dh(e,t.N),vh(e,t),Ys(e.a,t.f),ph(e,t))}function ol(n,t){var e=null,r=null;return cl(n,t.then(function(t){return e=ko(t),r=Vi(t),rl(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Xc(t.w(),n,m(n.jc,n))),e||t}).then(function(){return Br({user:sl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function sl(t){return t.currentUser}function al(t){return sl(t)&&sl(t)._lat||null}function ul(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](al(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](al(t))}}function cl(t,e){return t.R.push(e),e.na(function(){H(t.R,e)}),e}function hl(){}function ll(){this.a={},this.b=1e12}Wh.prototype.wb=function(e){var n=null,r=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Ku)if(Ku[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(lr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Iu()&&"none"!==t)throw n;break;default:if(!br()&&"none"!==t)throw n}}(e),Xh(this,function(){return e!=r.c.D?r.b.get(r.c,r.a).then(function(t){return n=t,Kh(r,e)}).then(function(){if(r.c=Gh(e),n)return r.b.set(r.c,n,r.a)}):be()})},w(Jh,fn),w($h,qe),w(Zh,qe),w(tl,qe),(t=Jh.prototype).wb=function(t){return t=this.l.wb(t),cl(this,t)},t.wa=function(t){this.aa===t||this.m||(this.aa=t,Qs(this.a,this.aa),this.dispatchEvent(new $h(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Dr("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&ar().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.f={url:t},this.settings.hb=!0,Ys(this.a,this.f),this.dispatchEvent(new Zh(this.f))}},t.Fc=function(t){this.N.push(t),Js(this.a,Jl.SDK_VERSION?gr(Jl.SDK_VERSION,this.N):null),this.dispatchEvent(new tl(this.N))},t.Ga=function(){return Q(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:sl(this)&&sl(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?m(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return ol(i,la(i.a,o))})},t.Wc=function(e){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var n=this,t=ji(e.providerId),r=Ar(),i=null;(!Tr()||cr())&&this.app.options.authDomain&&e.isOAuthProvider&&(i=cu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Jl.SDK_VERSION||null,null,null,this.S(),this.f));var o=ir(i,t&&t.ua,t&&t.ta);return cl(this,t=el(this).then(function(t){return kc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new pe(function(t,e){n.ma("signInViaPopup",null,new I("cancelled-popup-request"),n.h),n.g=t,n.O=e,n.h=r,n.c=Rc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&rr(o),t?Br(t):null}).s(function(t){throw o&&rr(o),t}))},t.Xc=function(t){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var e=this;return cl(this,el(this).then(function(){return Xh(t=e.l,function(){return t.b.set(Hh,t.c.D,t.a)});var t}).then(function(){return Pc(e.b,"signInViaRedirect",t,void 0,e.S())}))},t.qa=function(){var e=this;return nl(this).then(function(t){return e.b&&Uc(e.b.b),t}).s(function(t){throw e.b&&Uc(e.b.b),t})},t.cd=function(t){if(!t)return we(new I("null-user"));if(this.W!=t.tenantId)return we(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.G,s=e.Ga(),a=r.b,(n={})[Ws]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new lh(i||{apiKey:r.l,authDomain:r.o,appName:r.m},n),o&&(i.ha=o),s&&dh(i,s),kh(i,r),i);return cl(this,this.i.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return sl(e)&&t.uid==sl(e).uid?(kh(sl(e),t),e.da(t)):(il(e,u),wh(u),e.da(u))}).then(function(){ul(e)}))},t.zb=function(){var t=this,e=this.i.then(function(){return t.b&&Uc(t.b.b),sl(t)?(il(t,null),Qh(t.l).then(function(){ul(t)})):be()});return cl(this,e)},t.Yc=function(){var r=this;return Yh(this.l,this.app.options.authDomain).then(function(t){if(!r.m){var e,n;if((n=sl(r)&&t)&&(n=sl(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return kh(sl(r),t),sl(r).I();(sl(r)||t)&&(il(r,t),t&&(wh(t),t.ha=r.G),r.b&&Sc(r.b,r),ul(r))}})},t.da=function(t){return zh(this.l,t)},t.kc=function(){ul(this),this.da(sl(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then(function(){return ol(e,be(t))})},t.yc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(sl(e))})},t.zc=function(t){var e,n,r=this;n=function(){t.next(sl(r))},(e=this).P.push(n),cl(e,e.i.then(function(){!e.m&&K(e.P,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n(al(e)))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(sl(r)):"function"==typeof t.next&&t.next(sl(r))}),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(sl(r)):"function"==typeof t.next&&t.next(sl(r))}),this.bc(t,e,n)},t.mc=function(t){var e=this,n=this.i.then(function(){return sl(e)?sl(e).I(t).then(function(t){return{accessToken:t}}):null});return cl(this,n)},t.Sc=function(t){var n=this;return this.i.then(function(){return ol(n,Qa(n.a,Ba,{token:t}))}).then(function(t){var e=t.user;return Ah(e,"isAnonymous",!1),n.da(e),t})},t.Tc=function(t,e){var n=this;return this.i.then(function(){return ol(n,Qa(n.a,Wa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.i.then(function(){return ol(n,Qa(n.a,ga,{email:t,password:e}))})},t.Za=function(t){var e=this;return this.i.then(function(){return ol(e,t.ja(e.a))})},t.Rc=function(t){return Ur("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var n=this;return this.i.then(function(){var t=sl(n);if(t&&t.isAnonymous){var e=Br({providerId:null,isNewUser:!1});return Br({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return ol(n,n.a.yb()).then(function(t){var e=t.user;return Ah(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return sl(this)&&sl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&sl(this)&&gh(sl(this))},t.Oc=function(e){var n=this;V(this.u,function(t){t==e&&n.A--}),this.A<0&&(this.A=0),0==this.A&&sl(this)&&mh(sl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),cl(this,this.i.then(function(){e.m||K(e.u,t)&&t(al(e))}))},t.removeAuthTokenListener=function(e){G(this.u,function(t){return t==e})},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Gh("local"),t.a,this.pa),this.b&&(Cc(this.b,this),Uc(this.b.b)),Promise.resolve()},t.gc=function(t){return cl(this,Qa(this.a,ma,{identifier:t,continueUri:Er()?tr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Ac=function(t){return!!Io(t)},t.vb=function(e,n){var r=this;return cl(this,be().then(function(){var t=new bi(n);if(!t.c)throw new I("argument-error",Ii+" must be true when sending sign in link to email");return Oi(t)}).then(function(t){return r.a.vb(e,t)}).then(function(){}))},t.hd=function(t){return this.Qa(t).then(function(t){return t.data.email})},t.mb=function(t,e){return cl(this,this.a.mb(t,e).then(function(){}))},t.Qa=function(t){return cl(this,this.a.Qa(t).then(function(t){return new Jr(t)}))},t.ib=function(t){return cl(this,this.a.ib(t).then(function(){}))},t.ub=function(e,t){var n=this;return cl(this,be().then(function(){return void 0===t||ct(t)?{}:Oi(new bi(t))}).then(function(t){return n.a.ub(e,t)}).then(function(){}))},t.Vc=function(t,e){return cl(this,Kc(this,t,e,m(this.Za,this)))},t.Uc=function(n,r){var i=this;return cl(this,be().then(function(){var t=r||tr(),e=Eo(n,t);if(!(t=Io(t)))throw new I("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new I("tenant-id-mismatch");return i.Za(e)}))},hl.prototype.render=function(){},hl.prototype.reset=function(){},hl.prototype.getResponse=function(){},hl.prototype.execute=function(){};var fl=null;function pl(t,e){return(e=dl(e))&&t.a[e]||null}function dl(t){return(t=void 0===t?1e12:t)?t.toString():null}function vl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ze(this.f,"click",this.i)}function yl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function gl(){}function ml(){}ll.prototype.render=function(t,e){return this.a[this.b.toString()]=new vl(t,e),this.b++},ll.prototype.reset=function(t){var e=pl(this,t);t=dl(t),e&&t&&(e.delete(),delete this.a[t])},ll.prototype.getResponse=function(t){return(t=pl(this,t))?t.getResponse():null},ll.prototype.execute=function(t){(t=pl(this,t))&&t.execute()},vl.prototype.getResponse=function(){return yl(this),this.b},vl.prototype.execute=function(){yl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},vl.prototype.delete=function(){yl(this),this.g=!0,clearTimeout(this.a),this.a=null,nn(this.f,"click",this.i)},Vr(gl,"FACTOR_ID","phone"),ml.prototype.g=function(){return be(fl=fl||new ll)},ml.prototype.c=function(){};var _l=null;function bl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var wl=new dt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),El=new Pr(3e4,6e4);bl.prototype.g=function(i){var o=this;return new pe(function(t,e){var r=setTimeout(function(){e(new I("network-request-failed"))},El.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new I("internal-error"))),delete l[o.a]},be(xs(Et(wl,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),e(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},bl.prototype.c=function(){this.b--};var Il=null;function Tl(t,e,n,r,i,o,s){if(Vr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s=s?_l=_l||new ml:Il=Il||new bl,this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Nl])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Al],!l.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new qs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Sl];this.a[Sl]=function(t){var e;kl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=_r(u,l))&&e(t)};var c=this.a[Cl];this.a[Cl]=function(){var t;kl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=_r(c,l))&&t()}}var Sl="callback",Cl="expired-callback",Nl="sitekey",Al="size";function kl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Ol(t,e){return t.h.push(e),e.na(function(){H(t.h,e)}),e}function Pl(t){if(t.A)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Rl(t,e,n){var r=!1;try{this.b=n||Jl.app()}catch(t){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Jl.SDK_VERSION?gr(Jl.SDK_VERSION,o):null,Tl.call(this,n,t,e,function(){try{var e=i.b.auth().ka()}catch(t){e=null}return e},o,k(S),r)}function Dl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=xl.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=xl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=Tl.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Ol(this,be().then(function(){if(Er()&&!hr())return ar();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.v.g(e.u())}).then(function(t){return e.g=t,Qa(e.o,Pa,{})}).then(function(t){e.a[Nl]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},t.render=function(){Pl(this);var n=this;return Ol(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.m,n.i||(t=ee(e),e=se("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Pl(this);var i=this;return Ol(this,this.render().then(function(e){return new pe(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,G(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Pl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Pl(this),this.A=!0,this.v.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ee(this.m);for(;t=e.firstChild;)e.removeChild(t)}},w(Rl,Tl);var xl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ll(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Ml(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Fl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:y}}function Ul(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function jl(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Vl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ja||!e)}}}function ql(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}}function Bl(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Wl(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Kl(t){return y(t)&&"string"==typeof t.uid}function Hl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Gl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function zl(t,e){for(var n in e){var r=e[n].name;t[r]=Xl(r,t[n],e[n].j)}}function Ql(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_(function(t){return this[t]},n),set:_(function(t,e,n,r){Dl(t,[n],[r],!0),this[e]=r},r,n,e[n].jb),enumerable:!0})}}function Yl(t,e,n,r){t[e]=Xl(e,n,r)}function Xl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Dl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}zl(Jh.prototype,{ib:{name:"applyActionCode",j:[Ll("code")]},Qa:{name:"checkActionCode",j:[Ll("code")]},mb:{name:"confirmPasswordReset",j:[Ll("code"),Ll("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Ll("email"),Ll("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Ll("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Ll("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Gl(Fl(),Ul(),"nextOrObserver"),Ul("opt_error",!0),Ul("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Gl(Fl(),Ul(),"nextOrObserver"),Ul("opt_error",!0),Ul("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Ll("email"),Gl(Fl("opt_actionCodeSettings",!0),jl(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Ll("email"),Fl("actionCodeSettings")]},wb:{name:"setPersistence",j:[Ll("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Vl()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Vl()]},Sc:{name:"signInWithCustomToken",j:[Ll("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Ll("email"),Ll("password")]},Uc:{name:"signInWithEmailLink",j:[Ll("email"),Ll("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Ll("phoneNumber"),Hl()]},Wc:{name:"signInWithPopup",j:[Bl()]},Xc:{name:"signInWithRedirect",j:[Bl()]},cd:{name:"updateCurrentUser",j:[Gl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof lh)}},jl(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ll(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Ll("url")]},hd:{name:"verifyPasswordResetCode",j:[Ll("code")]}}),Ql(Jh.prototype,{lc:{name:"languageCode",jb:Gl(Ll(),jl(),"languageCode")},ti:{name:"tenantId",jb:Gl(Ll(),jl(),"tenantId")}}),(Jh.Persistence=Ku).LOCAL="local",Jh.Persistence.SESSION="session",Jh.Persistence.NONE="none",zl(lh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Ml("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ml("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Vl()]},pb:{name:"linkWithCredential",j:[Vl()]},Cc:{name:"linkWithPhoneNumber",j:[Ll("phoneNumber"),Hl()]},Dc:{name:"linkWithPopup",j:[Bl()]},Ec:{name:"linkWithRedirect",j:[Bl()]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Vl()]},sb:{name:"reauthenticateWithCredential",j:[Vl()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Ll("phoneNumber"),Hl()]},Mc:{name:"reauthenticateWithPopup",j:[Bl()]},Nc:{name:"reauthenticateWithRedirect",j:[Bl()]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Gl(Fl("opt_actionCodeSettings",!0),jl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ll(null,!0)]},bd:{name:"unlink",j:[Ll("provider")]},Ab:{name:"updateEmail",j:[Ll("email")]},Bb:{name:"updatePassword",j:[Ll("password")]},dd:{name:"updatePhoneNumber",j:[Vl("phone")]},Cb:{name:"updateProfile",j:[Fl("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Ll("email"),Gl(Fl("opt_actionCodeSettings",!0),jl(null,!0),"opt_actionCodeSettings",!0)]}}),zl(ll.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zl(hl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zl(pe.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Ql(Bc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Ml("appVerificationDisabledForTesting")}}),zl(Wc.prototype,{confirm:{name:"confirm",j:[Ll("verificationCode")]}}),Yl(Zi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[so,bo,So,ro],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gl(Ll(),Fl(),"json")]),Yl(wo,"credential",function(t,e){return new _o(t,e)},[Ll("email"),Ll("password")]),zl(_o.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),zl(ho.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),Yl(ho,"credential",lo,[Gl(Ll(),Fl(),"token")]),Yl(wo,"credentialWithLink",Eo,[Ll("email"),Ll("emailLink")]),zl(fo.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),Yl(fo,"credential",po,[Gl(Ll(),Fl(),"token")]),zl(vo.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),Yl(vo,"credential",yo,[Gl(Ll(),Gl(Fl(),jl()),"idToken"),Gl(Ll(),jl(),"accessToken",!0)]),zl(go.prototype,{Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),Yl(go,"credential",mo,[Gl(Ll(),Fl(),"token"),Ll("secret",!0)]),zl(co.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},credential:{name:"credential",j:[Gl(Ll(),Gl(Fl(),jl()),"optionsOrIdToken"),Gl(Ll(),jl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),zl(io.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),zl(eo.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),Yl(No,"credential",Ao,[Ll("verificationId"),Ll("verificationCode")]),zl(No.prototype,{eb:{name:"verifyPhoneNumber",j:[Gl(Ll(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Wl(t.session,Ji)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Wl(t.session,$i)&&Kl(t.multiFactorHint):t.session&&t.multiFactorUid?Wl(t.session,$i)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Hl()]}}),zl(To.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),zl(I.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),zl(Fo.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),zl(Mo.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),zl(Yc.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),zl(Gc.prototype,{Qc:{name:"resolveSignIn",j:[ql()]}}),zl(eh.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[ql(),Ll("displayName",!0)]},ad:{name:"unenroll",j:[Gl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Kl},Ll(),"multiFactorInfoIdentifier")]}}),zl(Rl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Yl(li,"parseLink",_i,[Ll("link")]),Yl(gl,"assertion",function(t){return new Zc(t)},[Vl("phone")]),function(){if(void 0===Jl||!Jl.INTERNAL||!Jl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:$r,VERIFY_AND_CHANGE_EMAIL:ti,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Jh,AuthCredential:Zi,Error:I};Yl(t,"EmailAuthProvider",wo,[]),Yl(t,"FacebookAuthProvider",ho,[]),Yl(t,"GithubAuthProvider",fo,[]),Yl(t,"GoogleAuthProvider",vo,[]),Yl(t,"TwitterAuthProvider",go,[]),Yl(t,"OAuthProvider",co,[Ll("providerId")]),Yl(t,"SAMLAuthProvider",uo,[Ll("providerId")]),Yl(t,"PhoneAuthProvider",No,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Jh)}}]),Yl(t,"RecaptchaVerifier",Rl,[Gl(Ll(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Fl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Jl.app.App)}}]),Yl(t,"ActionCodeURL",li,[]),Yl(t,"PhoneMultiFactorGenerator",gl,[]),Jl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Jh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Jl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.mc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Jl.registerVersion("@firebase/auth","0.15.2"),Jl.INTERNAL.extendNamespace({User:lh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Xs=(Js.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Jo(e))},Js.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:Xo(t)},Js.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Js.prototype.prefixedName_=function(t){return this.prefix_+t},Js.prototype.toString=function(){return this.domStorage_.toString()},Js);function Js(t){this.domStorage_=t,this.prefix_="firebase:"}var $s=(Zs.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Zs.prototype.get=function(t){return Zo(this.cache_,t)?this.cache_[t]:null},Zs.prototype.remove=function(t){delete this.cache_[t]},Zs);function Zs(){this.cache_={},this.isInMemoryStorage=!0}function ta(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Ao(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new rs).update(e),t=t.digest(),Oo.encodeByteArray(t)}function ea(t,e){Ao(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(fa.logLevel=Ns.VERBOSE,va=fa.log.bind(fa),e&&la.set("logging_enabled",!0)):"function"==typeof t?va=t:(va=null,la.remove("logging_enabled"))}function na(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+da.apply(void 0,Io(t));fa.error(n)}function ra(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+da.apply(void 0,Io(t));throw fa.error(n),new Error(n)}function ia(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+da.apply(void 0,Io(t));fa.warn(n)}function oa(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function sa(t,e){return t===e?0:t<e?-1:1}function aa(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Jo(e))}function ua(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var ca,Dr=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Xs(e)}}catch(t){}return new $s},ha=Dr("localStorage"),la=Dr("sessionStorage"),fa=new Ds("@firebase/database"),pa=(ca=1,function(){return ca++}),da=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=da.apply(null,i):n+="object"==typeof i?Jo(i):i,n+=" "}return n},va=null,ya=!0,ga=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===ya&&(ya=!1,null===va&&!0===la.get("logging_enabled")&&ea(!0)),va&&(t=da.apply(null,e),va(t))},ma=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ga.apply(void 0,Io([n],t))}},_a="[MIN_NAME]",ba="[MAX_NAME]",wa=function(t,e){if(t===e)return 0;if(t===_a||e===ba)return-1;if(e===_a||t===ba)return 1;var n=Aa(t),r=Aa(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Ea=function(t){if("object"!=typeof t||null===t)return Jo(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Jo(n[i]),r+=":",r+=Ea(t[n[i]]);return r+="}"};function Ia(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Ta(t){var e,n,r,i;Ao(!oa(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Sa(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw ia("Exception was thrown by user callback.",t),e},Math.floor(0))}}function Ca(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var Na=new RegExp("^-?(0*)\\d{1,10}$"),Aa=function(t){if(Na.test(t)){t=Number(t);if(-2147483648<=t&&t<=2147483647)return t}return null},ka=(Object.defineProperty(Oa,"Empty",{get:function(){return new Oa("")},enumerable:!1,configurable:!0}),Oa.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Oa.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Oa.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new Oa(this.pieces_,t)},Oa.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Oa.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Oa.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},Oa.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},Oa.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new Oa(t,0)},Oa.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof Oa)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new Oa(e,0)},Oa.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Oa.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return Oa.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},Oa.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=wa(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Oa.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},Oa.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},Oa);function Oa(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var Pa=(Object.defineProperty(Ra,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Ra,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Ra.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=ps(t),this.checkValid_()},Ra.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=ps(t),0<this.parts_.length&&--this.byteLength_},Ra.prototype.checkValid_=function(){if(this.byteLength_>Ra.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Ra.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Ra.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ra.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Ra.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Ra);function Ra(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=ps(this.parts_[n]);this.checkValid_()}var Da="firebaseio.com",xa="websocket",La="long_polling",Ma=(Fa.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Fa.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Fa.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Fa.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Fa.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ha.set("host:"+this.host,this.internalHost))},Fa.prototype.connectionURL=function(t,e){var n;if(Ao("string"==typeof t,"typeof type must == string"),Ao("object"==typeof e,"typeof params must == object"),t===xa)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==La)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Ia(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Fa.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Fa.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Fa);function Fa(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=ha.get("host:"+t)||this.host}function Ua(t,e){var n=Xa(t),r=n.namespace;return"firebase.com"===n.domain&&ra(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ra("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ia("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new Ma(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new ka(n.pathString)}}function ja(t){return"string"==typeof t&&0!==t.length&&!Ja.test(t)}function Va(t){return"string"==typeof t&&0!==t.length&&!$a.test(t)}function qa(t){return null===t||"string"==typeof t||"number"==typeof t&&!oa(t)||t&&"object"==typeof t&&Zo(t,".sv")}function Ba(t,e,n,r,i){i&&void 0===n||tu(hs(t,e,i),n,r)}function Wa(t,e,n,r,i){if(!i||void 0!==n){var o=hs(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Ia(n,function(t,e){t=new ka(t);if(tu(o,e,r.child(t)),".priority"===t.getBack()&&!qa(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!ja(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(ka.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function Ka(t,e,n,r){if(!r||void 0!==n){if(oa(n))throw new Error(hs(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qa(n))throw new Error(hs(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Ha(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(hs(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Ga(t,e,n,r){if(!(r&&void 0===n||ja(n)))throw new Error(hs(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function za(t,e,n,r){if(!(r&&void 0===n||Va(n)))throw new Error(hs(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Qa(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function Ya(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ja(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&(r=(r=r)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Va(r)))throw new Error(hs(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Xa=function(t){var e,n,r,i="",o="",s="",a="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(a=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=wo(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ia("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),s=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=s),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:s,secure:c,scheme:h,pathString:a,namespace:u}},Ja=/[\[\].#$\/\u0000-\u001F\u007F]/,$a=/[\[\].#$\u0000-\u001F\u007F]/,Za=10485760,tu=function(n,t,e){var r=e instanceof ka?new Pa(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(oa(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Za/3&&ps(t)>Za)throw new Error(n+"contains a string greater than "+Za+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Ia(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!ja(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),tu(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},eu=(nu.prototype.cancel=function(t){cs("OnDisconnect.cancel",0,1,arguments.length),ls("OnDisconnect.cancel",1,t,!0);var e=new Do;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},nu.prototype.remove=function(t){cs("OnDisconnect.remove",0,1,arguments.length),Qa("OnDisconnect.remove",this.path_),ls("OnDisconnect.remove",1,t,!0);var e=new Do;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},nu.prototype.set=function(t,e){cs("OnDisconnect.set",1,2,arguments.length),Qa("OnDisconnect.set",this.path_),Ba("OnDisconnect.set",1,t,this.path_,!1),ls("OnDisconnect.set",2,e,!0);var n=new Do;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},nu.prototype.setWithPriority=function(t,e,n){cs("OnDisconnect.setWithPriority",2,3,arguments.length),Qa("OnDisconnect.setWithPriority",this.path_),Ba("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ka("OnDisconnect.setWithPriority",2,e,!1),ls("OnDisconnect.setWithPriority",3,n,!0);var r=new Do;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},nu.prototype.update=function(t,e){if(cs("OnDisconnect.update",1,2,arguments.length),Qa("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ia("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("OnDisconnect.update",1,t,this.path_,!1),ls("OnDisconnect.update",2,e,!0);var i=new Do;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},nu);function nu(t,e){this.repo_=t,this.path_=e}var ru=(iu.prototype.toJSON=function(){return cs("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},iu);function iu(t,e){this.committed=t,this.snapshot=e}var ou,su,au,uu=(ou="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",su=0,au=[],function(t){var e=t===su;su=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=ou.charAt(t%64),t=Math.floor(t/64);Ao(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===au[r];r--)au[r]=0;au[r]++}else for(r=0;r<12;r++)au[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=ou.charAt(au[r]);return Ao(20===i.length,"nextPushId: Length should be 20."),i}),cu=(hu.Wrap=function(t,e){return new hu(t,e)},hu);function hu(t,e){this.name=t,this.node=e}var lu,G=(fu.prototype.getCompare=function(){return this.compare.bind(this)},fu.prototype.indexedValueChanged=function(t,e){t=new cu(_a,t),e=new cu(_a,e);return 0!==this.compare(t,e)},fu.prototype.minPost=function(){return cu.MIN},fu);function fu(){}var pu,du=(go(vu,pu=G),Object.defineProperty(vu,"__EMPTY_NODE",{get:function(){return lu},set:function(t){lu=t},enumerable:!1,configurable:!0}),vu.prototype.compare=function(t,e){return wa(t.name,e.name)},vu.prototype.isDefinedOn=function(t){throw ko("KeyIndex.isDefinedOn not expected to be called.")},vu.prototype.indexedValueChanged=function(t,e){return!1},vu.prototype.minPost=function(){return cu.MIN},vu.prototype.maxPost=function(){return new cu(ba,lu)},vu.prototype.makePost=function(t,e){return Ao("string"==typeof t,"KeyIndex indexValue must always be a string."),new cu(t,lu)},vu.prototype.toString=function(){return".key"},vu);function vu(){return null!==pu&&pu.apply(this,arguments)||this}var yu,gu=new du;function mu(t){return"number"==typeof t?"number:"+Ta(t):"string:"+t}var _u,bu,wu,Eu,Iu=function(t){var e;t.isLeafNode()?(e=t.val(),Ao("string"==typeof e||"number"==typeof e||"object"==typeof e&&Zo(e,".sv"),"Priority must be a string or number.")):Ao(t===yu||t.isEmpty(),"priority of unexpected type."),Ao(t===yu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Tu=(Object.defineProperty(Su,"__childrenNodeConstructor",{get:function(){return _u},set:function(t){_u=t},enumerable:!1,configurable:!0}),Su.prototype.isLeafNode=function(){return!0},Su.prototype.getPriority=function(){return this.priorityNode_},Su.prototype.updatePriority=function(t){return new Su(this.value_,t)},Su.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Su.__childrenNodeConstructor.EMPTY_NODE},Su.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Su.__childrenNodeConstructor.EMPTY_NODE},Su.prototype.hasChild=function(){return!1},Su.prototype.getPredecessorChildName=function(t,e){return null},Su.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Su.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Su.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Ao(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Su.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Su.prototype.isEmpty=function(){return!1},Su.prototype.numChildren=function(){return 0},Su.prototype.forEachChild=function(t,e){return!1},Su.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Su.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+mu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?Ta(this.value_):this.value_,this.lazyHash_=ta(t)),this.lazyHash_},Su.prototype.getValue=function(){return this.value_},Su.prototype.compareTo=function(t){return t===Su.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Su.__childrenNodeConstructor?-1:(Ao(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Su.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Su.VALUE_TYPE_ORDER.indexOf(e),i=Su.VALUE_TYPE_ORDER.indexOf(n);return Ao(0<=r,"Unknown leaf type: "+e),Ao(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Su.prototype.withIndex=function(){return this},Su.prototype.isIndexed=function(){return!0},Su.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},Su.VALUE_TYPE_ORDER=["object","boolean","number","string"],Su);function Su(t,e){void 0===e&&(e=Su.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Ao(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Iu(this.priorityNode_)}function Cu(){return null!==Eu&&Eu.apply(this,arguments)||this}var Nu=new(go(Cu,Eu=G),Cu.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?wa(t.name,e.name):r},Cu.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Cu.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Cu.prototype.minPost=function(){return cu.MIN},Cu.prototype.maxPost=function(){return new cu(ba,new Tu("[PRIORITY-POST]",wu))},Cu.prototype.makePost=function(t,e){t=bu(t);return new cu(e,new Tu("[PRIORITY-POST]",t))},Cu.prototype.toString=function(){return".priority"},Cu),Au=(ku.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},ku.prototype.hasNext=function(){return 0<this.nodeStack_.length},ku.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},ku);function ku(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Ou=(Pu.prototype.copy=function(t,e,n,r,i){return new Pu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Pu.prototype.count=function(){return this.left.count()+1+this.right.count()},Pu.prototype.isEmpty=function(){return!1},Pu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Pu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Pu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Pu.prototype.minKey=function(){return this.min_().key},Pu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Pu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Pu.prototype.removeMin_=function(){if(this.left.isEmpty())return Du.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Pu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return Du.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Pu.prototype.isRed_=function(){return this.color},Pu.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Pu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Pu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Pu.prototype.rotateLeft_=function(){var t=this.copy(null,null,Pu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Pu.prototype.rotateRight_=function(){var t=this.copy(null,null,Pu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Pu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Pu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Pu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Pu.RED=!0,Pu.BLACK=!1,Pu);function Pu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Pu.RED,this.left=null!=r?r:Du.EMPTY_NODE,this.right=null!=i?i:Du.EMPTY_NODE}Ru.prototype.copy=function(t,e,n,r,i){return this},Ru.prototype.insert=function(t,e,n){return new Ou(t,e,null)},Ru.prototype.remove=function(t,e){return this},Ru.prototype.count=function(){return 0},Ru.prototype.isEmpty=function(){return!0},Ru.prototype.inorderTraversal=function(t){return!1},Ru.prototype.reverseTraversal=function(t){return!1},Ru.prototype.minKey=function(){return null},Ru.prototype.maxKey=function(){return null},Ru.prototype.check_=function(){return 0},Ru.prototype.isRed_=function(){return!1},M=Ru;function Ru(){}var Du=(xu.prototype.insert=function(t,e){return new xu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Ou.BLACK,null,null))},xu.prototype.remove=function(t){return new xu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ou.BLACK,null,null))},xu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},xu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},xu.prototype.isEmpty=function(){return this.root_.isEmpty()},xu.prototype.count=function(){return this.root_.count()},xu.prototype.minKey=function(){return this.root_.minKey()},xu.prototype.maxKey=function(){return this.root_.maxKey()},xu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},xu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},xu.prototype.getIterator=function(t){return new Au(this.root_,null,this.comparator_,!1,t)},xu.prototype.getIteratorFrom=function(t,e){return new Au(this.root_,t,this.comparator_,!1,e)},xu.prototype.getReverseIteratorFrom=function(t,e){return new Au(this.root_,t,this.comparator_,!0,e)},xu.prototype.getReverseIterator=function(t){return new Au(this.root_,null,this.comparator_,!0,t)},xu.EMPTY_NODE=new M,xu);function xu(t,e){void 0===e&&(e=xu.EMPTY_NODE),this.comparator_=t,this.root_=e}var Lu=Math.log(2),Mu=(Fu.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Fu);function Fu(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Lu,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Uu,ju,Vu=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new Ou(i,r.node,Ou.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new Ou(i,r.node,Ou.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new Ou(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,Ou.BLACK):(r(u,Ou.BLACK),r(u,Ou.RED))}return n}(new Mu(c.length));return new Du(e||t,n)},qu={},Bu=(Object.defineProperty(Wu,"Default",{get:function(){return Ao(Nu,"ChildrenNode.ts has not been loaded"),Uu=Uu||new Wu({".priority":qu},{".priority":Nu})},enumerable:!1,configurable:!0}),Wu.prototype.get=function(t){var e=ts(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Du?e:null},Wu.prototype.hasIndex=function(t){return Zo(this.indexSet_,t.toString())},Wu.prototype.addIndex=function(t,e){Ao(t!==gu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(cu.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Vu(r,t.getCompare()):qu;var a=t.toString(),u=mo({},this.indexSet_);u[a]=t;e=mo({},this.indexes_);return e[a]=n,new Wu(e,u)},Wu.prototype.addToIndexes=function(s,a){var u=this;return new Wu(ns(this.indexes_,function(t,e){var n=ts(u.indexSet_,e);if(Ao(n,"Missing index implementation for "+e),t===qu){if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(cu.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),Vu(r,n.getCompare())}return qu}n=a.get(s.name);return n&&(t=t.remove(new cu(s.name,n))),t.insert(s,s.node)}),this.indexSet_)},Wu.prototype.removeFromIndexes=function(n,r){return new Wu(ns(this.indexes_,function(t){if(t===qu)return t;var e=r.get(n.name);return e?t.remove(new cu(n.name,e)):t}),this.indexSet_)},Wu);function Wu(t,e){this.indexes_=t,this.indexSet_=e}function Ku(t,e){return wa(t.name,e.name)}function Hu(t,e){return wa(t,e)}var Gu,zu=(Object.defineProperty(Qu,"EMPTY_NODE",{get:function(){return ju=ju||new Qu(new Du(Hu),null,Bu.Default)},enumerable:!1,configurable:!0}),Qu.prototype.isLeafNode=function(){return!1},Qu.prototype.getPriority=function(){return this.priorityNode_||ju},Qu.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Qu(this.children_,t,this.indexMap_)},Qu.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?ju:t},Qu.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Qu.prototype.hasChild=function(t){return null!==this.children_.get(t)},Qu.prototype.updateImmediateChild=function(t,e){if(Ao(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new cu(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?ju:this.priorityNode_;return new Qu(r,n,i)},Qu.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Ao(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,e)},Qu.prototype.isEmpty=function(){return this.children_.isEmpty()},Qu.prototype.numChildren=function(){return this.children_.count()},Qu.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Nu,function(t,e){r[t]=e.val(n),i++,s&&Qu.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Qu.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+mu(this.getPriority().val())+":"),this.forEachChild(Nu,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":ta(n)),this.lazyHash_},Qu.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new cu(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},Qu.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},Qu.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new cu(t,this.children_.get(t)):null},Qu.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},Qu.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new cu(t,this.children_.get(t)):null},Qu.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Qu.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Qu.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,cu.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Qu.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Qu.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,cu.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Qu.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xu?-1:0},Qu.prototype.withIndex=function(t){if(t===gu||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new Qu(this.children_,this.priorityNode_,t)},Qu.prototype.isIndexed=function(t){return t===gu||this.indexMap_.hasIndex(t)},Qu.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Nu),n=t.getIterator(Nu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},Qu.prototype.resolveIndex_=function(t){return t===gu?null:this.indexMap_.get(t.toString())},Qu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Qu);function Qu(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Iu(this.priorityNode_),this.children_.isEmpty()&&Ao(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Yu(){return Gu.call(this,new Du(Hu),zu.EMPTY_NODE,Bu.Default)||this}var Xu=new(go(Yu,Gu=zu),Yu.prototype.compareTo=function(t){return t===this?0:1},Yu.prototype.equals=function(t){return t===this},Yu.prototype.getPriority=function(){return this},Yu.prototype.getImmediateChild=function(t){return zu.EMPTY_NODE},Yu.prototype.isEmpty=function(){return!1},Yu);Object.defineProperties(cu,{MIN:{value:new cu(_a,zu.EMPTY_NODE)},MAX:{value:new cu(ba,Xu)}}),du.__EMPTY_NODE=zu.EMPTY_NODE,Tu.__childrenNodeConstructor=zu,yu=Xu,wu=Xu;var Ju,$u=!0;function Zu(n,t){if(void 0===t&&(t=null),null===n)return zu.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),Ao(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Tu(n,Zu(t));if(n instanceof Array||!$u){var r=zu.EMPTY_NODE;return Ia(n,function(t,e){Zo(n,t)&&"."!==t.substring(0,1)&&(!(e=Zu(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(Zu(t))}var i=[],o=!1;if(Ia(n,function(t,e){"."!==t.substring(0,1)&&((e=Zu(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new cu(t,e))))}),0===i.length)return zu.EMPTY_NODE;var e=Vu(i,Ku,function(t){return t.name},Hu);if(o){var s=Vu(i,Nu.getCompare());return new zu(e,Zu(t),new Bu({".priority":s},{".priority":Nu}))}return new zu(e,Zu(t),Bu.Default)}function tc(){return null!==Ju&&Ju.apply(this,arguments)||this}bu=Zu;var ec,nc=new(go(tc,Ju=G),tc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?wa(t.name,e.name):n},tc.prototype.isDefinedOn=function(t){return!0},tc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},tc.prototype.minPost=function(){return cu.MIN},tc.prototype.maxPost=function(){return cu.MAX},tc.prototype.makePost=function(t,e){t=Zu(t);return new cu(e,t)},tc.prototype.toString=function(){return".value"},tc),rc=(go(ic,ec=G),ic.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},ic.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},ic.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?wa(t.name,e.name):r},ic.prototype.makePost=function(t,e){t=Zu(t),t=zu.EMPTY_NODE.updateChild(this.indexPath_,t);return new cu(e,t)},ic.prototype.maxPost=function(){var t=zu.EMPTY_NODE.updateChild(this.indexPath_,Xu);return new cu(ba,t)},ic.prototype.toString=function(){return this.indexPath_.slice().join("/")},ic);function ic(t){var e=ec.call(this)||this;return e.indexPath_=t,Ao(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var oc=(sc.prototype.val=function(){return cs("DataSnapshot.val",0,0,arguments.length),this.node_.val()},sc.prototype.exportVal=function(){return cs("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},sc.prototype.toJSON=function(){return cs("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},sc.prototype.exists=function(){return cs("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},sc.prototype.child=function(t){cs("DataSnapshot.child",0,1,arguments.length),t=String(t),za("DataSnapshot.child",1,t,!1);var e=new ka(t),t=this.ref_.child(e);return new sc(this.node_.getChild(e),t,Nu)},sc.prototype.hasChild=function(t){cs("DataSnapshot.hasChild",1,1,arguments.length),za("DataSnapshot.hasChild",1,t,!1);t=new ka(t);return!this.node_.getChild(t).isEmpty()},sc.prototype.getPriority=function(){return cs("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},sc.prototype.forEach=function(n){var r=this;return cs("DataSnapshot.forEach",1,1,arguments.length),ls("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new sc(e,r.ref_.child(t),Nu))})},sc.prototype.hasChildren=function(){return cs("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(sc.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),sc.prototype.numChildren=function(){return cs("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},sc.prototype.getRef=function(){return cs("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(sc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),sc);function sc(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var ac=(uc.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},uc.prototype.getEventType=function(){return this.eventType},uc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},uc.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Jo(this.snapshot.exportVal())},uc);function uc(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var cc=(hc.prototype.getPath=function(){return this.path},hc.prototype.getEventType=function(){return"cancel"},hc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},hc.prototype.toString=function(){return this.path.toString()+":cancel"},hc);function hc(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var lc=(fc.prototype.respondsTo=function(t){return"value"===t},fc.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ac("value",this,new oc(t.snapshotNode,e.getRef(),n))},fc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ao(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},fc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new cc(this,t,e):null},fc.prototype.matches=function(t){return t instanceof fc&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},fc.prototype.hasAnyCallback=function(){return null!==this.callback_},fc);function fc(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var pc,dc=(vc.prototype.respondsTo=function(t){t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t;return Zo(this.callbacks_,t)},vc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new cc(this,t,e):null},vc.prototype.createEvent=function(t,e){Ao(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new ac(t.type,this,new oc(t.snapshotNode,n,e),t.prevName)},vc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ao(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},vc.prototype.matches=function(e){var n=this;if(e instanceof vc){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});t=t[0],r=r[0];return!(r!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r])}}}return!1},vc.prototype.hasAnyCallback=function(){return null!==this.callbacks_},vc);function vc(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var yc=(Object.defineProperty(gc,"__referenceConstructor",{get:function(){return Ao(pc,"Reference.ts has not been loaded"),pc},set:function(t){pc=t},enumerable:!1,configurable:!0}),gc.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===gu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==_a)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==ba)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Nu){if(null!=e&&!qa(e)||null!=n&&!qa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ao(t.getIndex()instanceof rc||t.getIndex()===nc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},gc.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},gc.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},gc.prototype.getQueryParams=function(){return this.queryParams_},gc.prototype.getRef=function(){return cs("Query.ref",0,0,arguments.length),new gc.__referenceConstructor(this.repo,this.path)},gc.prototype.on=function(t,e,n,r){cs("Query.on",2,4,arguments.length),Ha("Query.on",1,t,!1),ls("Query.on",2,e,!1);n=gc.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},gc.prototype.onValueEvent=function(t,e,n){n=new lc(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,n)},gc.prototype.onChildEvent=function(t,e,n){n=new dc(t,e,n);this.repo.addEventCallbackForQuery(this,n)},gc.prototype.off=function(t,e,n){cs("Query.off",0,3,arguments.length),Ha("Query.off",1,t,!0),ls("Query.off",2,e,!0),fs("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new lc(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new dc(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},gc.prototype.once=function(e,n,t,r){var i=this;cs("Query.once",1,4,arguments.length),Ha("Query.once",1,e,!1),ls("Query.once",2,n,!0);var o=gc.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Do;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},gc.prototype.limitToFirst=function(t){if(cs("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new gc(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},gc.prototype.limitToLast=function(t){if(cs("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new gc(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},gc.prototype.orderByChild=function(t){if(cs("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');za("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");t=new ka(t);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");t=new rc(t),t=this.queryParams_.orderBy(t);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.orderByKey=function(){cs("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(gu);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.orderByPriority=function(){cs("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Nu);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.orderByValue=function(){cs("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(nc);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.startAt=function(t,e){void 0===t&&(t=null),cs("Query.startAt",0,2,arguments.length),Ba("Query.startAt",1,t,this.path,!0),Ga("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(gc.validateLimit_(n),gc.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new gc(this.repo,this.path,n,this.orderByCalled_)},gc.prototype.endAt=function(t,e){void 0===t&&(t=null),cs("Query.endAt",0,2,arguments.length),Ba("Query.endAt",1,t,this.path,!0),Ga("Query.endAt",2,e,!0);e=this.queryParams_.endAt(t,e);if(gc.validateLimit_(e),gc.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new gc(this.repo,this.path,e,this.orderByCalled_)},gc.prototype.equalTo=function(t,e){if(cs("Query.equalTo",1,2,arguments.length),Ba("Query.equalTo",1,t,this.path,!1),Ga("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},gc.prototype.toString=function(){return cs("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},gc.prototype.toJSON=function(){return cs("Query.toJSON",0,1,arguments.length),this.toString()},gc.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},gc.prototype.queryIdentifier=function(){var t=this.queryObject(),t=Ea(t);return"{}"===t?"default":t},gc.prototype.isEqual=function(t){if(cs("Query.isEqual",1,1,arguments.length),!(t instanceof gc)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var e=this.repo===t.repo,n=this.path.equals(t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},gc.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,ls(t,3,r.cancel,!0),r.context=n,fs(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(hs(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(gc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),gc);function gc(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var mc=(_c.prototype.getImmediateChild=function(t){return new _c(this.node_.getImmediateChild(t))},_c.prototype.node=function(){return this.node_},_c);function _c(t){this.node_=t}var bc=(wc.prototype.getImmediateChild=function(t){t=this.path_.child(t);return new wc(this.syncTree_,t)},wc.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},wc);function wc(t,e){this.syncTree_=t,this.path_=e}function Ec(t,e,n,r){return Nc(e,new bc(n,t),r)}function Ic(t,e,n){return Nc(t,new mc(e),n)}var Tc=function(t,e,n){return t&&"object"==typeof t?(Ao(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Sc(t[".sv"],e,n):"object"==typeof t[".sv"]?Cc(t[".sv"],e):void Ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Sc=function(t,e,n){if("timestamp"===t)return n.timestamp;Ao(!1,"Unexpected server value: "+t)},Cc=function(t,e,n){t.hasOwnProperty("increment")||Ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&Ao(!1,"Unexpected increment value: "+t);e=e.node();if(Ao(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t};function Nc(t,r,i){var e=t.getPriority().val(),n=Tc(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=Tc(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new Tu(e,Zu(n)):t}var t=t,s=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new Tu(n))),t.forEachChild(Nu,function(t,e){var n=Nc(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}var Ac,kc=(Oc.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Oc.prototype.remember=function(t,e){var n;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new Oc),n=this.children.get(n),t=t.popFront(),n.remember(t,e))},Oc.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Nu,function(t,e){n.remember(new ka(t),e)}),this.forget(t)}if(0<this.children.size){e=t.getFront();return t=t.popFront(),this.children.has(e)&&this.children.get(e).forget(t)&&this.children.delete(e),0===this.children.size}return!0},Oc.prototype.forEachTree=function(n,r){null!==this.value?r(n,this.value):this.forEachChild(function(t,e){t=new ka(n.toString()+"/"+t);e.forEachTree(t,r)})},Oc.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Oc);function Oc(){this.value=null,this.children=new Map}(Dr=Ac=Ac||{})[Dr.OVERWRITE=0]="OVERWRITE",Dr[Dr.MERGE=1]="MERGE",Dr[Dr.ACK_USER_WRITE=2]="ACK_USER_WRITE",Dr[Dr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Pc=(Rc.User=new Rc(!0,!1,null,!1),Rc.Server=new Rc(!1,!0,null,!1),Rc.forServerTaggedQuery=function(t){return new Rc(!1,!0,t,!0)},Rc);function Rc(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Ao(!r||e,"Tagged queries must be from server.")}var Dc,xc=(Lc.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Ao(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new ka(t));return new Lc(ka.Empty,e,this.revert)}return Ao(this.path.getFront()===t,"operationForChild called for unrelated child."),new Lc(this.path.popFront(),this.affectedTree,this.revert)},Lc);function Lc(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ac.ACK_USER_WRITE,this.source=Pc.User}var Mc=(Fc.fromObject=function(t){var n=Fc.Empty;return Ia(t,function(t,e){n=n.set(new ka(t),e)}),n},Fc.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Fc.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ka.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==e?null:{path:new ka(n).child(e.path),value:e.value}},Fc.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Fc.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),e=this.children.get(e);return null!==e?e.subtree(t.popFront()):Fc.Empty},Fc.prototype.set=function(t,e){if(t.isEmpty())return new Fc(e,this.children);var n=t.getFront(),e=(this.children.get(n)||Fc.Empty).set(t.popFront(),e),e=this.children.insert(n,e);return new Fc(this.value,e)},Fc.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Fc.Empty:new Fc(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){n=n.remove(t.popFront()),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?Fc.Empty:new Fc(this.value,t)}return this},Fc.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),e=this.children.get(e);return e?e.get(t.popFront()):null},Fc.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),t=(this.children.get(n)||Fc.Empty).setTree(t.popFront(),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Fc(this.value,e)},Fc.prototype.fold=function(t){return this.fold_(ka.Empty,t)},Fc.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Fc.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ka.Empty,e)},Fc.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),r=this.children.get(i);return r?r.findOnPath_(t.popFront(),e.child(i),n):null},Fc.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ka.Empty,e)},Fc.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Fc.Empty},Fc.prototype.foreach=function(t){this.foreach_(ka.Empty,t)},Fc.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Fc.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Fc.Empty=new Fc(null),Fc);function Fc(t,e){void 0===e&&(e=Dc=Dc||new Du(sa)),this.value=t,this.children=e}var Uc=(jc.prototype.operationForChild=function(t){return this.path.isEmpty()?new jc(this.source,ka.Empty):new jc(this.source,this.path.popFront())},jc);function jc(t,e){this.source=t,this.path=e,this.type=Ac.LISTEN_COMPLETE}var Vc=(qc.prototype.operationForChild=function(t){return this.path.isEmpty()?new qc(this.source,ka.Empty,this.snap.getImmediateChild(t)):new qc(this.source,this.path.popFront(),this.snap)},qc);function qc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ac.OVERWRITE}var Bc=(Wc.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new ka(t));return e.isEmpty()?null:e.value?new Vc(this.source,ka.Empty,e.value):new Wc(this.source,ka.Empty,e)}return Ao(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Wc(this.source,this.path.popFront(),this.children)},Wc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Wc);function Wc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ac.MERGE}var Kc=(Hc.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Hc.prototype.isFiltered=function(){return this.filtered_},Hc.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;t=t.getFront();return this.isCompleteForChild(t)},Hc.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Hc.prototype.getNode=function(){return this.node_},Hc);function Hc(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Gc=(zc.prototype.updateEventSnap=function(t,e,n){return new zc(new Kc(t,e,n),this.serverCache_)},zc.prototype.updateServerSnap=function(t,e,n){return new zc(this.eventCache_,new Kc(t,e,n))},zc.prototype.getEventCache=function(){return this.eventCache_},zc.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},zc.prototype.getServerCache=function(){return this.serverCache_},zc.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},zc.Empty=new zc(new Kc(zu.EMPTY_NODE,!1,!1),new Kc(zu.EMPTY_NODE,!1,!1)),zc);function zc(t,e){this.eventCache_=t,this.serverCache_=e}var Qc=(Yc.valueChange=function(t){return new Yc(Yc.VALUE,t)},Yc.childAddedChange=function(t,e){return new Yc(Yc.CHILD_ADDED,e,t)},Yc.childRemovedChange=function(t,e){return new Yc(Yc.CHILD_REMOVED,e,t)},Yc.childChangedChange=function(t,e,n){return new Yc(Yc.CHILD_CHANGED,e,t,n)},Yc.childMovedChange=function(t,e){return new Yc(Yc.CHILD_MOVED,e,t)},Yc.CHILD_ADDED="child_added",Yc.CHILD_REMOVED="child_removed",Yc.CHILD_CHANGED="child_changed",Yc.CHILD_MOVED="child_moved",Yc.VALUE="value",Yc);function Yc(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var Xc=(Jc.prototype.updateChild=function(t,e,n,r,i,o){Ao(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Qc.childRemovedChange(e,s)):Ao(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Qc.childAddedChange(e,n)):o.trackChildChange(Qc.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Jc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Nu,function(t,e){n.hasChild(t)||i.trackChildChange(Qc.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Nu,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Qc.childChangedChange(t,e,n)):i.trackChildChange(Qc.childAddedChange(t,e))})),n.withIndex(this.index_)},Jc.prototype.updatePriority=function(t,e){return t.isEmpty()?zu.EMPTY_NODE:t.updatePriority(e)},Jc.prototype.filtersNodes=function(){return!1},Jc.prototype.getIndexedFilter=function(){return this},Jc.prototype.getIndex=function(){return this.index_},Jc);function Jc(t){this.index_=t}var $c=(Zc.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Ao(e===Qc.CHILD_ADDED||e===Qc.CHILD_CHANGED||e===Qc.CHILD_REMOVED,"Only child changes supported for tracking"),Ao(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Qc.CHILD_ADDED&&i===Qc.CHILD_REMOVED)this.changeMap.set(n,Qc.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Qc.CHILD_REMOVED&&i===Qc.CHILD_ADDED)this.changeMap.delete(n);else if(e===Qc.CHILD_REMOVED&&i===Qc.CHILD_CHANGED)this.changeMap.set(n,Qc.childRemovedChange(n,r.oldSnap));else if(e===Qc.CHILD_CHANGED&&i===Qc.CHILD_ADDED)this.changeMap.set(n,Qc.childAddedChange(n,t.snapshotNode));else{if(e!==Qc.CHILD_CHANGED||i!==Qc.CHILD_CHANGED)throw ko("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Qc.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Zc.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Zc);function Zc(){this.changeMap=new Map}function th(){}var eh=new(th.prototype.getCompleteChild=function(t){return null},th.prototype.getChildAfterChild=function(t,e,n){return null},th),nh=(rh.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new Kc(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,e)},rh.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),t=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===t.length?null:t[0]},rh);function rh(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var ih=function(t,e){this.viewCache=t,this.changes=e},oh=(sh.prototype.assertIndexed=function(t){Ao(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Ao(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},sh.prototype.applyOperation=function(t,e,n,r){var i=new $c;if(e.type===Ac.OVERWRITE)var o=e,s=o.source.fromUser?this.applyUserOverwrite_(t,o.path,o.snap,n,r,i):(Ao(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered()&&!o.path.isEmpty(),this.applyServerOverwrite_(t,o.path,o.snap,n,r,a,i));else if(e.type===Ac.MERGE){o=e;s=o.source.fromUser?this.applyUserMerge_(t,o.path,o.children,n,r,i):(Ao(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,o.path,o.children,n,r,a,i))}else if(e.type===Ac.ACK_USER_WRITE){var a=e;s=a.revert?this.revertUserWrite_(t,a.path,n,r,i):this.ackUserWrite_(t,a.path,a.affectedTree,n,r,i)}else{if(e.type!==Ac.LISTEN_COMPLETE)throw ko("Unknown operation type: "+e.type);s=this.listenComplete_(t,e.path,n,i)}i=i.getChanges();return sh.maybeAddValueEvent_(t,s,i),new ih(s,i)},sh.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Qc.valueChange(e.getCompleteEventSnap())))},sh.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=void 0,l=void 0;return h=e.isEmpty()?(Ao(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(s=(s=t.getCompleteServerSnap())instanceof zu?s:zu.EMPTY_NODE,s=n.calcCompleteEventChildren(s),this.filter_.updateFullNode(t.getEventCache().getNode(),s,i)):(a=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),a,i))):".priority"===(a=e.getFront())?(Ao(1===e.getLength(),"Can't have a priority with additional path components"),u=o.getNode(),l=t.getServerCache().getNode(),null!=(c=n.calcEventCacheAfterServerOverwrite(e,u,l))?this.filter_.updatePriority(u,c):o.getNode()):(u=e.popFront(),c=void 0,null!=(c=o.isCompleteForChild(a)?(l=t.getServerCache().getNode(),null!=(l=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l))?o.getNode().getImmediateChild(a).updateChild(u,l):o.getNode().getImmediateChild(a)):n.calcCompleteChild(a,t.getServerCache()))?this.filter_.updateChild(o.getNode(),a,c,u,r,i):o.getNode()),t.updateEventSnap(h,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},sh.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{o=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;c=e.popFront(),n=a.getNode().getImmediateChild(o).updateChild(c,n);h=".priority"===o?u.updatePriority(a.getNode(),n):u.updateChild(a.getNode(),o,n,c,eh,null)}u=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),i=new nh(r,u,i);return this.generateEventCacheAfterServerEvent_(u,e,r,i,s)},sh.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new nh(r,t,i);return e.isEmpty()?(a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(a,!0,this.filter_.filtersNodes())):".priority"===(s=e.getFront())?(a=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered())):(r=e.popFront(),i=u.getNode().getImmediateChild(s),a=void 0,a=r.isEmpty()?n:null!=(e=c.getCompleteChild(s))?".priority"===r.getBack()&&e.getChild(r.parent()).isEmpty()?e:e.updateChild(r,n):zu.EMPTY_NODE,i.equals(a)?t:(o=this.filter_.updateChild(u.getNode(),s,a,r,c,o),t.updateEventSnap(o,u.isFullyInitialized(),this.filter_.filtersNodes())))},sh.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},sh.prototype.applyUserMerge_=function(n,r,t,i,o,s){var a=this,u=n;return t.foreach(function(t,e){t=r.child(t);sh.cacheHasChild_(n,t.getFront())&&(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),t.foreach(function(t,e){t=r.child(t);sh.cacheHasChild_(n,t.getFront())||(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),u},sh.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},sh.prototype.applyServerMerge_=function(r,t,e,i,o,s,a){var u=this;if(r.getServerCache().getNode().isEmpty()&&!r.getServerCache().isFullyInitialized())return r;var c=r,e=t.isEmpty()?e:Mc.Empty.setTree(t,e),h=r.getServerCache().getNode();return e.children.inorderTraversal(function(t,e){var n;h.hasChild(t)&&(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new ka(t),e,i,o,s,a))}),e.children.inorderTraversal(function(t,e){var n=!r.getServerCache().isCompleteForChild(t)&&null==e.value;h.hasChild(t)||n||(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new ka(t),e,i,o,s,a))}),c},sh.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Mc.Empty;return a.getNode().forEachChild(gu,function(t,e){u=u.set(new ka(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Mc.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},sh.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),i=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(i,e,n,eh,r)},sh.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u=new nh(n,t,r),c=t.getEventCache().getNode(),r=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),Ao(s instanceof zu,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),r=this.filter_.updateFullNode(c,a,i)):(s=e.getFront(),null==(a=n.calcCompleteChild(s,t.getServerCache()))&&t.getServerCache().isCompleteForChild(s)&&(a=c.getImmediateChild(s)),(r=null!=a?this.filter_.updateChild(c,s,a,e.popFront(),u,i):t.getEventCache().getNode().hasChild(s)?this.filter_.updateChild(c,s,zu.EMPTY_NODE,e.popFront(),u,i):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(r=this.filter_.updateFullNode(r,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ka.Empty),t.updateEventSnap(r,o,this.filter_.filtersNodes())},sh);function sh(t){this.filter_=t}var ah=(uh.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Qc.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Qc.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Qc.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Qc.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Qc.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Qc.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Qc.VALUE,t,n,e),i},uh.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,t=t.filter(function(t){return t.type===e});t.sort(this.compareChanges_.bind(this)),t.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},uh.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},uh.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw ko("Should only compare child_ events.");t=new cu(t.childName,t.snapshotNode),e=new cu(e.childName,e.snapshotNode);return this.index_.compare(t,e)},uh);function uh(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var ch,hh=(lh.prototype.getQuery=function(){return this.query_},lh.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},lh.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},lh.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},lh.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},lh.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(Ao(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(e,n);t&&r.push(t)})),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},lh.prototype.applyOperation=function(t,e,n){t.type===Ac.MERGE&&null!==t.source.queryId&&(Ao(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Ao(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,n=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(n.viewCache),Ao(n.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},lh.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Nu,function(t,e){n.push(Qc.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Qc.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},lh.prototype.generateEventsForChanges_=function(t,e,n){n=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,n)},lh);function lh(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Xc(n.getIndex()),i=n.getNodeFilter();this.processor_=new oh(i);var o=e.getServerCache(),t=e.getEventCache(),n=r.updateFullNode(zu.EMPTY_NODE,o.getNode(),null),e=i.updateFullNode(zu.EMPTY_NODE,t.getNode(),null),r=new Kc(n,o.isFullyInitialized(),r.filtersNodes()),i=new Kc(e,t.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Gc(i,r),this.eventGenerator_=new ah(this.query_)}var fh=(Object.defineProperty(ph,"__referenceConstructor",{get:function(){return Ao(ch,"Reference.ts has not been loaded"),ch},set:function(t){Ao(!ch,"__referenceConstructor has already been defined"),ch=t},enumerable:!1,configurable:!0}),ph.prototype.isEmpty=function(){return 0===this.views.size},ph.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Ao(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=wo(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},ph.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a=t.queryIdentifier(),u=this.views.get(a);return u||(s=!1,s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof zu?n.calcCompleteEventChildren(r):zu.EMPTY_NODE,!1),i=new Gc(new Kc(o,s,!1),new Kc(r,i,!1)),u=new hh(t,i),this.views.set(a,u)),u.addEventRegistration(e),u.getInitialEvents(e)},ph.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=wo(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=Eo(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new ph.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},ph.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=wo(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},ph.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=wo(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},ph.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();t=t.queryIdentifier();return this.views.get(t)},ph.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},ph.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},ph.prototype.getCompleteView=function(){var e,t;try{for(var n=wo(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},ph);function ph(){this.views=new Map}var dh=(vh.prototype.addWrite=function(t,e){if(t.isEmpty())return new vh(new Mc(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,n=ka.relativePath(r,t),i=i.updateChild(n,e);return new vh(this.writeTree_.set(r,i))}e=new Mc(e);return new vh(this.writeTree_.setTree(t,e))},vh.prototype.addWrites=function(n,t){var r=this;return Ia(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},vh.prototype.removeWrite=function(t){return t.isEmpty()?vh.Empty:new vh(this.writeTree_.setTree(t,Mc.Empty))},vh.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},vh.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(ka.relativePath(e.path,t)):null},vh.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Nu,function(t,e){n.push(new cu(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new cu(t,e.value))}),n},vh.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new vh(null!=e?new Mc(e):this.writeTree_.subtree(t))},vh.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},vh.prototype.apply=function(t){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Ao(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}}(ka.Empty,this.writeTree_,t)},vh.Empty=new vh(new Mc(null)),vh);function vh(t){this.writeTree_=t}var yh=(gh.prototype.childWrites=function(t){return new mh(t,this)},gh.prototype.addOverwrite=function(t,e,n,r){Ao(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},gh.prototype.addMerge=function(t,e,n){Ao(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},gh.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},gh.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Ao(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Ia(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},gh.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},gh.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(ka.Empty)){var o=gh.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||zu.EMPTY_NODE;return o.apply(s)}return null}o=this.visibleWrites_.getCompleteNode(e);if(null!=o)return o;o=this.visibleWrites_.childCompoundWrite(e);if(o.isEmpty())return t;if(null!=t||o.hasCompleteWrite(ka.Empty)){var s=t||zu.EMPTY_NODE;return o.apply(s)}return null},gh.prototype.calcCompleteEventChildren=function(t,e){var n=zu.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Nu,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Nu,function(t,e){e=i.childCompoundWrite(new ka(t)).apply(e);n=n.updateImmediateChild(t,e)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},gh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Ao(n||r,"Either existingEventSnap or existingServerSnap must exist");t=t.child(e);if(this.visibleWrites_.hasCompleteWrite(t))return null;t=this.visibleWrites_.childCompoundWrite(t);return t.isEmpty()?r.getChild(e):t.apply(r.getChild(e))},gh.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),t=this.visibleWrites_.getCompleteNode(r);return null!=t?t:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},gh.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},gh.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),t=a.getCompleteNode(ka.Empty);if(null!=t)s=t;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),l=h.getNext();l&&u.length<r;)0!==c(l,n)&&u.push(l),l=h.getNext();return u},gh.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},gh.prototype.resetTree_=function(){this.visibleWrites_=gh.layerTree_(this.allWrites_,gh.DefaultFilter_,ka.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},gh.DefaultFilter_=function(t){return t.visible},gh.layerTree_=function(t,e,n){for(var r=dh.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=ka.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=ka.relativePath(s,n),r=r.addWrite(ka.Empty,o.snap.getChild(a)));else{if(!o.children)throw ko("WriteRecord should have .snap or .children");n.contains(s)?(a=ka.relativePath(n,s),r=r.addWrites(a,o.children)):s.contains(n)&&((a=ka.relativePath(s,n)).isEmpty()?r=r.addWrites(ka.Empty,o.children):(o=ts(o.children,a.getFront()))&&(a=o.getChild(a.popFront()),r=r.addWrite(ka.Empty,a)))}}}return r},gh);function gh(){this.visibleWrites_=dh.Empty,this.allWrites_=[],this.lastWriteId_=-1}var mh=(_h.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},_h.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},_h.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},_h.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},_h.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},_h.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},_h.prototype.child=function(t){return new _h(this.treePath_.child(t),this.writeTree_)},_h);function _h(t,e){this.treePath_=t,this.writeTree_=e}var bh=(wh.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Vc(Pc.User,t,e)):[]},wh.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);e=Mc.fromObject(e);return this.applyOperationToSyncPoints_(new Bc(Pc.User,t,e))},wh.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Mc.Empty;return null!=n.snap?r=r.set(ka.Empty,!0):Ia(n.children,function(t,e){r=r.set(new ka(t),e)}),this.applyOperationToSyncPoints_(new xc(n.path,r,e))}return[]},wh.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Vc(Pc.Server,t,e))},wh.prototype.applyServerMerge=function(t,e){e=Mc.fromObject(e);return this.applyOperationToSyncPoints_(new Bc(Pc.Server,t,e))},wh.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Uc(Pc.Server,t))},wh.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];n=wh.parseQueryKey_(r),r=n.path,n=n.queryId,t=ka.relativePath(r,t),e=new Vc(Pc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)},wh.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){n=wh.parseQueryKey_(r),r=n.path,n=n.queryId,t=ka.relativePath(r,t),e=Mc.fromObject(e),e=new Bc(Pc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)}return[]},wh.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){e=wh.parseQueryKey_(n),n=e.path,e=e.queryId,t=ka.relativePath(n,t),t=new Uc(Pc.forServerTaggedQuery(e),t);return this.applyTaggedOperation_(n,t)}return[]},wh.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(t,e){t=ka.relativePath(t,n);r=r||e.getCompleteServerCache(t),i=i||e.hasCompleteView()});var o=this.syncPointTree_.get(n);o?(i=i||o.hasCompleteView(),r=r||o.getCompleteServerCache(ka.Empty)):(o=new fh,this.syncPointTree_=this.syncPointTree_.set(n,o)),null!=r?c=!0:(c=!1,r=zu.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(t,e){e=e.getCompleteServerCache(ka.Empty);e&&(r=r.updateImmediateChild(t,e))}));var s,a=o.viewExistsForQuery(t);a||t.getQueryParams().loadsAllData()||(u=wh.makeQueryKey_(t),Ao(!this.queryToTagMap.has(u),"View does not exist, but we have a tag"),s=wh.getNextQueryTag_(),this.queryToTagMap.set(u,s),this.tagToQueryMap.set(s,u));var u=this.pendingWriteTree_.childWrites(n),c=o.addEventRegistration(t,e,u,r,c);return a||i||(o=o.viewForQuery(t),c=c.concat(this.setupListener_(t,o))),c},wh.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(o&&!a){i=this.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=this.collectDistinctViewsForSubTree_(i),c=0;c<u.length;++c){var h=u[c],l=h.getQuery(),h=this.createListenerForView_(h);this.listenProvider_.startListening(wh.queryForListening_(l),this.tagForQuery_(l),h.hashFn,h.onComplete)}}!a&&0<e.length&&!n&&(o?this.listenProvider_.stopListening(wh.queryForListening_(t),null):e.forEach(function(t){var e=r.queryToTagMap.get(wh.makeQueryKey_(t));r.listenProvider_.stopListening(wh.queryForListening_(t),e)})),this.removeTags_(e)}return s},wh.prototype.calcCompleteEventCache=function(n,t){var e=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(n,function(t,e){t=ka.relativePath(t,n),t=e.getCompleteServerCache(t);if(t)return t});return e.calcCompleteEventCache(n,r,t,!0)},wh.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Ia(n,function(t,e){r=r.concat(e)}),r})},wh.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r=t[e];r.getQueryParams().loadsAllData()||(n=wh.makeQueryKey_(r),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},wh.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},wh.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),e=this.createListenerForView_(e),e=this.listenProvider_.startListening(wh.queryForListening_(t),r,e.hashFn,e.onComplete),n=this.syncPointTree_.subtree(n);if(r)Ao(!n.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var i=n.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Ia(n,function(t,e){r=r.concat(e)}),r}),o=0;o<i.length;++o){var s=i[o];this.listenProvider_.stopListening(wh.queryForListening_(s),this.tagForQuery_(s))}return e},wh.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||zu.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);t=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");n=new Error(t+" at "+e.path.toString()+": "+n);return n.code=t.toUpperCase(),n}(t,n);return e.removeEventRegistration(n,null,t)}}},wh.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},wh.parseQueryKey_=function(t){var e=t.indexOf("$");return Ao(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ka(t.substr(0,e))}},wh.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},wh.prototype.tagForQuery_=function(t){t=wh.makeQueryKey_(t);return this.queryToTagMap.get(t)},wh.getNextQueryTag_=function(){return wh.nextQueryTag_++},wh.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Ao(n,"Missing sync point for query tag that we're tracking");t=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,t,null)},wh.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(ka.Empty))},wh.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(ka.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(ka.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);return u&&a&&(e=n?n.getImmediateChild(s):null,s=r.child(s),o=o.concat(this.applyOperationHelper_(a,u,e,s))),i&&(o=o.concat(i.applyOperation(t,r,n))),o},wh.prototype.applyOperationDescendantsHelper_=function(i,t,o,s){var a=this,e=t.get(ka.Empty);null==o&&null!=e&&(o=e.getCompleteServerCache(ka.Empty));var u=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=s.child(t),t=i.operationForChild(t);t&&(u=u.concat(a.applyOperationDescendantsHelper_(t,e,n,r)))}),e&&(u=u.concat(e.applyOperation(i,s,o))),u},wh.nextQueryTag_=1,wh);function wh(t){this.listenProvider_=t,this.syncPointTree_=Mc.Empty,this.pendingWriteTree_=new yh,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Eh=(Ih.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Ih.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Ih);function Ih(){this.rootNode_=zu.EMPTY_NODE}var Th=(Sh.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Zo(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Sh.prototype.get=function(){return Po(this.counters_)},Sh);function Sh(){this.counters_={}}var Ch=(Nh.getCollection=function(t){t=t.toString();return this.collections_[t]||(this.collections_[t]=new Th),this.collections_[t]},Nh.getOrCreateReporter=function(t,e){t=t.toString();return this.reporters_[t]||(this.reporters_[t]=e()),this.reporters_[t]},Nh.collections_={},Nh.reporters_={},Nh);function Nh(){}var Ah=(kh.prototype.get=function(){var t=this.collection_.get(),n=mo({},t);return this.last_&&Ia(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},kh);function kh(t){this.collection_=t,this.last_=null}var Oh=(Ph.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Ph.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;Ia(t,function(t,e){0<e&&Zo(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),Ca(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Ph);function Ph(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ah(t);t=1e4+2e4*Math.random();Ca(this.reportStats_.bind(this),Math.floor(t))}var Rh=(Dh.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new xh(i)),e.add(r)}e&&this.eventLists_.push(e)},Dh.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Dh.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Dh.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Dh);function Dh(){this.eventLists_=[],this.recursionDepth_=0}var xh=(Lh.prototype.add=function(t){this.events_.push(t)},Lh.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),va&&ga("event: "+n.toString()),Sa(e))}},Lh.prototype.getPath=function(){return this.path_},Lh);function Lh(t){this.path_=t,this.events_=[]}Mh.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Io(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Mh.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},Mh.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Mh.prototype.validateEventType_=function(e){Ao(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},M=Mh;function Mh(t){this.allowedEvents_=t,this.listeners_={},Ao(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Fh,Uh=(go(jh,Fh=M),jh.getInstance=function(){return new jh},jh.prototype.getInitialEvent=function(t){return Ao("visible"===t,"Unknown event type: "+t),[this.visible_]},jh);function jh(){var e,t,n=Fh.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Vh,qh=(go(Bh,Vh=M),Bh.getInstance=function(){return new Bh},Bh.prototype.getInitialEvent=function(t){return Ao("online"===t,"Unknown event type: "+t),[this.online_]},Bh.prototype.currentlyOnline=function(){return this.online_},Bh);function Bh(){var t=Vh.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Mo()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Wh=(Kh.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Kh.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&Sa(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break}},Kh);function Kh(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Hh="pLPCommand",Gh="pRTLPCB",zh=(Qh.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Wh(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new Yh(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Eo(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Eo(t,2),r=n[0],n=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,n)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Da)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Qh.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Qh.forceAllow=function(){Qh.forceAllow_=!0},Qh.forceDisallow=function(){Qh.forceDisallow_=!0},Qh.isAvailable=function(){return!!Qh.forceAllow_||!(Qh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Qh.prototype.markConnectionHealthy=function(){},Qh.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Qh.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Qh.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Qh.prototype.send=function(t){t=Jo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=So(t);return Oo.encodeByteArray(t,!0)}(t),e=ua(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},Qh.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Qh.prototype.incrementIncomingBytes_=function(t){t=Jo(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Qh);function Qh(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ma(t),this.stats_=Ch.getCollection(e),this.urlFn=function(t){return e.connectionURL(La,t)}}var Yh=(Xh.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ga("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Xh.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Xh.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Xh.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},Xh.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Xh.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Xh.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){ga("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Xh);function Xh(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=pa(),window[Hh+this.uniqueCallbackIdentifier]=t,window[Gh+this.uniqueCallbackIdentifier]=e,this.myIFrame=Xh.createIFrame_();e="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(e='<script>document.domain="'+document.domain+'";<\/script>');var i="<html><body>"+e+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){ga("frame writing exception"),t.stack&&ga(t.stack),ga(t)}}var Jh="";function $h(t){Jh=t}var Zh=null;"undefined"!=typeof MozWebSocket?Zh=MozWebSocket:"undefined"!=typeof WebSocket&&(Zh=WebSocket);var tl=(el.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Da)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(xa,r)},el.prototype.open=function(e,t){var n,r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ha.set("previous_websocket_failure",!0);try{jo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Zh(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&r.log_(t),r.onClosed_()}},el.prototype.start=function(){},el.forceDisallow=function(){el.forceDisallow_=!0},el.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==Zh&&!el.forceDisallow_},el.previouslyFailed=function(){return ha.isInMemoryStorage||!0===ha.get("previous_websocket_failure")},el.prototype.markConnectionHealthy=function(){ha.remove("previous_websocket_failure")},el.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Xo(t),this.onMessage(t))},el.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},el.prototype.extractFrameCount_=function(t){if(Ao(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},el.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},el.prototype.send=function(t){this.resetKeepAlive();t=Jo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=ua(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},el.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},el.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},el.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},el.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},el.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},el.responsesRequiredToBeHealthy=2,el.healthyTimeout=3e4,el);function el(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ma(this.connId),this.stats_=Ch.getCollection(e),this.connURL=el.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var nl=(Object.defineProperty(rl,"ALL_TRANSPORTS",{get:function(){return[zh,tl]},enumerable:!1,configurable:!0}),rl.prototype.initTransports_=function(t){var e,n,r=tl&&tl.isAvailable(),i=r&&!tl.previouslyFailed();if(t.webSocketOnly&&(r||ia("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[tl];else{var o=this.transports_=[];try{for(var s=wo(rl.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},rl.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},rl.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},rl);function rl(t){this.initTransports_(t)}var il=(ol.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=Ca(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},ol.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},ol.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},ol.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},ol.prototype.sendRequest=function(t){t={t:"d",d:t};this.sendData_(t)},ol.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},ol.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},ol.prototype.onSecondaryMessageReceived_=function(t){var e=aa("t",t),t=aa("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},ol.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},ol.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},ol.prototype.onPrimaryMessageReceived_=function(t){var e=aa("t",t),t=aa("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},ol.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},ol.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},ol.prototype.onControl_=function(t){var e=aa("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?na("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):na("Unknown control packet command: "+e)}},ol.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&ia("Protocol version mismatch detected"),this.tryStartUpgrade_())},ol.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},ol.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),Ca(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},ol.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},ol.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ca(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},ol.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},ol.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},ol.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ha.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},ol.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},ol.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},ol.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},ol.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},ol);function ol(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ma("c:"+this.id+":"),this.transportManager_=new nl(e),this.log_("Connection created"),this.start_()}sl.prototype.put=function(t,e,n,r){},sl.prototype.merge=function(t,e,n,r){},sl.prototype.refreshAuthToken=function(t){},sl.prototype.onDisconnectPut=function(t,e,n){},sl.prototype.onDisconnectMerge=function(t,e,n){},sl.prototype.onDisconnectCancel=function(t,e){},sl.prototype.reportStats=function(t){},du=sl;function sl(){}var al,ul=1e3,cl=3e5,hl=(go(ll,al=du),ll.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Jo(e)),Ao(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},ll.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ao(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Ao(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},ll.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;ll.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},ll.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Zo(t,"w")&&(t=ts(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',e=e.path.toString(),ia("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},ll.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},ll.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=$o(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},ll.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=$o(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},ll.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Ao(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},ll.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},ll.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},ll.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},ll.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},ll.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},ll.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},ll.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},ll.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},ll.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},ll.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},ll.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Jo(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},ll.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):na("Unrecognized action received from server: "+Jo(t)+"\nAre you using the latest client?")},ll.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},ll.prototype.scheduleConnect_=function(t){var e=this;Ao(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},ll.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},ll.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},ll.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=ul),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},ll.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ll.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){Ao(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?ga("getToken() completed but was canceled"):(ga("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new il(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){ia(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&ia(t),c())}))},ll.prototype.interrupt=function(t){ga("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},ll.prototype.resume=function(t){ga("Resuming connection for reason: "+t),delete this.interruptReasons_[t],es(this.interruptReasons_)&&(this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0))},ll.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},ll.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},ll.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return Ea(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},ll.prototype.removeListen_=function(t,e){var n,r=new ka(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},ll.prototype.onAuthRevoked_=function(t,e){ga("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},ll.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},ll.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=wo(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,wo(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},ll.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Jh.replace(/\./g,"-")]=1,Mo()?t["framework.cordova"]=1:Uo()&&(t["framework.reactnative"]=1),this.reportStats(t)},ll.prototype.shouldReconnect_=function(){var t=qh.getInstance().currentlyOnline();return es(this.interruptReasons_)&&t},ll.nextPersistentConnectionId_=0,ll.nextConnectionId_=0,ll);function ll(t,e,n,r,i,o,s){var a=al.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=ll.nextPersistentConnectionId_++,a.log_=ma("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=ul,a.maxReconnectDelay_=cl,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!jo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Uh.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&qh.getInstance().on("online",a.onOnline_,a),a}var fl,pl=(go(dl,fl=du),dl.prototype.reportStats=function(t){throw new Error("Method not implemented.")},dl.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Ao(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},dl.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=dl.getListenId_(t,n),a={};this.listens_[s]=a;t=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",t,function(t,e){404===t&&(t=e=null),null===t&&i.onDataUpdate_(o,e,!1,n),ts(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},dl.prototype.unlisten=function(t,e){e=dl.getListenId_(t,e);delete this.listens_[e]},dl.prototype.refreshAuthToken=function(t){},dl.prototype.restRequest_=function(r,i,o){var s=this;void 0===i&&(i={}),i.format="export",this.authTokenProvider_.getToken(!1).then(function(t){t=t&&t.accessToken;t&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+function(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}(i);s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=Xo(n.responseText)}catch(t){ia("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&ia("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},dl);function dl(t,e,n){var r=fl.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=ma("p:rest:"),r.listens_={},r}var vl="repo_interrupt",yl=(gl.prototype.start=function(){var s=this;if(this.stats_=Ch.getCollection(this.repoInfo_),this.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new pl(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var t=this.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jo(t)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new hl(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,t),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=Ch.getOrCreateReporter(this.repoInfo_,function(){return new Oh(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new Eh,this.infoSyncTree_=new bh({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new bh({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e);s.eventQueue_.raiseEventsForChangedPath(n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})},gl.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},gl.prototype.name=function(){return this.repoInfo_.namespace},gl.prototype.serverTime=function(){var t=this.infoData_.getNode(new ka(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},gl.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},gl.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new ka(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s=[],t=i;0<(s=r?n?(o=ns(e,function(t){return Zu(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(o=Zu(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,o,r)):n?(n=ns(e,function(t){return Zu(t)}),this.serverSyncTree_.applyServerMerge(i,n)):(e=Zu(e),this.serverSyncTree_.applyServerOverwrite(i,e))).length&&(t=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(t,s)},gl.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},gl.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},gl.prototype.onServerInfoUpdate_=function(t){var n=this;Ia(t,function(t,e){n.updateInfo_(t,e)})},gl.prototype.updateInfo_=function(t,e){t=new ka("/.info/"+t),e=Zu(e);this.infoData_.updateSnapshot(t,e);e=this.infoSyncTree_.applyServerOverwrite(t,e);this.eventQueue_.raiseEventsForChangedPath(t,e)},gl.prototype.getNextWriteId_=function(){return this.nextWriteId_++},gl.prototype.setWithPriority=function(r,t,e,i){var o=this;this.log_("set",{path:r.toString(),value:t,priority:e});var n=this.generateServerValues(),t=Zu(t,e),e=this.serverSyncTree_.calcCompleteEventCache(r),n=Ic(t,e,n),s=this.getNextWriteId_(),n=this.serverSyncTree_.applyUserOverwrite(r,n,s,!0);this.eventQueue_.queueEvents(n),this.server_.put(r.toString(),t.val(!0),function(t,e){var n="ok"===t;n||ia("set at "+r+" failed: "+t);n=o.serverSyncTree_.ackUserWrite(s,!n);o.eventQueue_.raiseEventsForChangedPath(r,n),o.callOnCompleteCallback(i,t,e)});t=this.abortTransactions_(r);this.rerunTransactions_(t),this.eventQueue_.raiseEventsForChangedPath(t,[])},gl.prototype.update=function(i,t,o){var s=this;this.log_("update",{path:i.toString(),value:t});var a,e,n=!0,r=this.generateServerValues(),u={};Ia(t,function(t,e){n=!1,u[t]=Ec(i.child(t),Zu(e),s.serverSyncTree_,r)}),n?(ga("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(o,"ok")):(a=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(i,u,a),this.eventQueue_.queueEvents(e),this.server_.merge(i.toString(),t,function(t,e){var n="ok"===t;n||ia("update at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(a,!n),n=0<r.length?s.rerunTransactions_(i):i;s.eventQueue_.raiseEventsForChangedPath(n,r),s.callOnCompleteCallback(o,t,e)}),Ia(t,function(t){t=s.abortTransactions_(i.child(t));s.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(i,[]))},gl.prototype.runOnDisconnectEvents_=function(){var n=this;this.log_("onDisconnectEvents");var r=this.generateServerValues(),i=new kc;this.onDisconnect_.forEachTree(ka.Empty,function(t,e){e=Ec(t,e,n.serverSyncTree_,r);i.remember(t,e)});var o=[];i.forEachTree(ka.Empty,function(t,e){o=o.concat(n.serverSyncTree_.applyServerOverwrite(t,e));t=n.abortTransactions_(t);n.rerunTransactions_(t)}),this.onDisconnect_=new kc,this.eventQueue_.raiseEventsForChangedPath(ka.Empty,o)},gl.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},gl.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Zu(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},gl.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Zu(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},gl.prototype.onDisconnectUpdate=function(n,r,i){var o=this;if(es(r))return ga("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(n.toString(),r,function(t,e){"ok"===t&&Ia(r,function(t,e){e=Zu(e);o.onDisconnect_.remember(n.child(t),e)}),o.callOnCompleteCallback(i,t,e)})},gl.prototype.addEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},gl.prototype.removeEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},gl.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(vl)},gl.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(vl)},gl.prototype.stats=function(t){var i;void 0===t&&(t=!1),"undefined"!=typeof console&&(t=t?(this.statsListener_||(this.statsListener_=new Ah(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),Ia(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},gl.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},gl.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),ga.apply(void 0,Io([n],t))},gl.prototype.callOnCompleteCallback=function(n,r,i){n&&Sa(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})},Object.defineProperty(gl.prototype,"database",{get:function(){return this.__database||(this.__database=new Ul(this))},enumerable:!1,configurable:!0}),gl);function gl(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new kc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}var ml=(_l.prototype.getStartPost=function(){return this.startPost_},_l.prototype.getEndPost=function(){return this.endPost_},_l.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},_l.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new cu(e,n))||(n=zu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},_l.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=zu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(zu.EMPTY_NODE),i=this;return e.forEachChild(Nu,function(t,e){i.matches(new cu(t,e))||(r=r.updateImmediateChild(t,zu.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},_l.prototype.updatePriority=function(t,e){return t},_l.prototype.filtersNodes=function(){return!0},_l.prototype.getIndexedFilter=function(){return this.indexedFilter_},_l.prototype.getIndex=function(){return this.index_},_l.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},_l.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},_l);function _l(t){this.indexedFilter_=new Xc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=_l.getStartPost_(t),this.endPost_=_l.getEndPost_(t)}var bl=(wl.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new cu(e,n))||(n=zu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},wl.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=zu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=zu.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(zu.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,zu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},wl.prototype.updatePriority=function(t,e){return t},wl.prototype.filtersNodes=function(){return!0},wl.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},wl.prototype.getIndex=function(){return this.index_},wl.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;Ao(a.numChildren()===this.limit_,"");var u=new cu(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Qc.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Qc.childRemovedChange(e,l));l=a.updateImmediateChild(e,zu.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Qc.childAddedChange(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(Qc.childRemovedChange(c.name,c.node)),i.trackChildChange(Qc.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,zu.EMPTY_NODE)):t},wl);function wl(t){this.rangedFilter_=new ml(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var El=(Il.prototype.hasStart=function(){return this.startSet_},Il.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Il.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Il.prototype.getIndexStartValue=function(){return Ao(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Il.prototype.getIndexStartName=function(){return Ao(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_a},Il.prototype.hasEnd=function(){return this.endSet_},Il.prototype.getIndexEndValue=function(){return Ao(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Il.prototype.getIndexEndName=function(){return Ao(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ba},Il.prototype.hasLimit=function(){return this.limitSet_},Il.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Il.prototype.getLimit=function(){return Ao(this.limitSet_,"Only valid if limit has been set"),this.limit_},Il.prototype.getIndex=function(){return this.index_},Il.prototype.copy_=function(){var t=new Il;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Il.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Il.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Il.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Il.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Il.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Il.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Il.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Il.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Il.prototype.getQueryObject=function(){var t,e=Il.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==Nu&&(n[e.INDEX]=this.index_.toString()),n},Il.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Il.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Nu},Il.prototype.getNodeFilter=function(){return this.loadsAllData()?new Xc(this.getIndex()):new(this.hasLimit()?bl:ml)(this)},Il.prototype.toRestQueryStringParameters=function(){var t,e=Il.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Nu?e.PRIORITY_INDEX:this.index_===nc?e.VALUE_INDEX:this.index_===gu?e.KEY_INDEX:(Ao(this.index_ instanceof rc,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Jo(t),this.startSet_&&(n[e.START_AT]=Jo(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Jo(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Jo(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Jo(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Il.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Il.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Il.DEFAULT=new Il,Il);function Il(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nu}var Tl,Sl=(go(Cl,Tl=yc),Cl.prototype.getKey=function(){return cs("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Cl.prototype.child=function(t){var e,n,r,i;return cs("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof ka||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),za(e,n,r,i)):za("Reference.child",1,t,!1)),new Cl(this.repo,this.path.child(t))},Cl.prototype.getParent=function(){cs("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Cl(this.repo,t)},Cl.prototype.getRoot=function(){cs("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Cl.prototype.databaseProp=function(){return this.repo.database},Cl.prototype.set=function(t,e){cs("Reference.set",1,2,arguments.length),Qa("Reference.set",this.path),Ba("Reference.set",1,t,this.path,!1),ls("Reference.set",2,e,!0);var n=new Do;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Cl.prototype.update=function(t,e){if(cs("Reference.update",1,2,arguments.length),Qa("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ia("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("Reference.update",1,t,this.path,!1),ls("Reference.update",2,e,!0);var i=new Do;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Cl.prototype.setWithPriority=function(t,e,n){if(cs("Reference.setWithPriority",2,3,arguments.length),Qa("Reference.setWithPriority",this.path),Ba("Reference.setWithPriority",1,t,this.path,!1),Ka("Reference.setWithPriority",2,e,!1),ls("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Do;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Cl.prototype.remove=function(t){return cs("Reference.remove",0,1,arguments.length),Qa("Reference.remove",this.path),ls("Reference.remove",1,t,!0),this.set(null,t)},Cl.prototype.transaction=function(t,r,e){if(cs("Reference.transaction",1,3,arguments.length),Qa("Reference.transaction",this.path),ls("Reference.transaction",1,t,!1),ls("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(hs(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Do;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new ru(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Cl.prototype.setPriority=function(t,e){cs("Reference.setPriority",1,2,arguments.length),Qa("Reference.setPriority",this.path),Ka("Reference.setPriority",1,t,!1),ls("Reference.setPriority",2,e,!0);var n=new Do;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Cl.prototype.push=function(t,e){cs("Reference.push",0,2,arguments.length),Qa("Reference.push",this.path),Ba("Reference.push",1,t,this.path,!0),ls("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=uu(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},Cl.prototype.onDisconnect=function(){return Qa("Reference.onDisconnect",this.path),new eu(this.repo,this.path)},Object.defineProperty(Cl.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Cl);function Cl(t,e){if(!(t instanceof yl))throw new Error("new Reference() no longer supported - use app.database().");return Tl.call(this,t,e,El.DEFAULT,!1)||this}yc.__referenceConstructor=Sl,fh.__referenceConstructor=Sl;var Nl,Al=function(){this.children={},this.childCount=0,this.value=null},kl=(Ol.prototype.subTree=function(t){for(var e=t instanceof ka?t:new ka(t),n=this,r=e.getFront();null!==r;)n=new Ol(r,n,ts(n.node_.children,r)||new Al),r=(e=e.popFront()).getFront();return n},Ol.prototype.getValue=function(){return this.node_.value},Ol.prototype.setValue=function(t){Ao(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Ol.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Ol.prototype.hasChildren=function(){return 0<this.node_.childCount},Ol.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Ol.prototype.forEachChild=function(n){var r=this;Ia(this.node_.children,function(t,e){n(new Ol(t,r,e))})},Ol.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Ol.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Ol.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Ol.prototype.path=function(){return new ka(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Ol.prototype.name=function(){return this.name_},Ol.prototype.parent=function(){return this.parent_},Ol.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Ol.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Zo(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Ol);function Ol(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Al),this.name_=t,this.parent_=e,this.node_=n}(G=Nl=Nl||{})[G.RUN=0]="RUN",G[G.SENT=1]="SENT",G[G.COMPLETED=2]="COMPLETED",G[G.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",G[G.NEEDS_ABORT=4]="NEEDS_ABORT",yl.MAX_TRANSACTION_RETRIES_=25,yl.prototype.transactionsInit_=function(){this.transactionQueueTree_=new kl},yl.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new Sl(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:pa(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},e=this.getLatestState_(t);s.currentInputSnapshot=e;var a,n=s.update(e.val());void 0===n?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(a=new oc(s.currentInputSnapshot,new Sl(this,s.path),Nu),s.onComplete(null,!1,a))):(tu("transaction failed: Data returned ",n,s.path),s.status=Nl.RUN,(a=(r=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),r.setValue(a),r=void 0,"object"==typeof n&&null!==n&&Zo(n,".priority")?(r=ts(n,".priority"),Ao(qa(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(this.serverSyncTree_.calcCompleteEventCache(t)||zu.EMPTY_NODE).getPriority().val(),a=this.generateServerValues(),r=Zu(n,r),a=Ic(r,e,a),s.currentOutputSnapshotRaw=r,s.currentOutputSnapshotResolved=a,s.currentWriteId=this.getNextWriteId_(),s=this.serverSyncTree_.applyUserOverwrite(t,a,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,s),this.sendReadyTransactions_())},yl.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||zu.EMPTY_NODE},yl.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),Ao(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===Nl.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},yl.prototype.sendTransactionQueue_=function(s,a){for(var u=this,t=a.map(function(t){return t.currentWriteId}),e=this.getLatestState_(s,t),n=e,t=e.hash(),r=0;r<a.length;r++){var i=a[r];Ao(i.status===Nl.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=Nl.SENT,i.retryCount++;var o=ka.relativePath(s,i.path),n=n.updateChild(o,i.currentOutputSnapshotRaw)}var e=n.val(!0),c=s;this.server_.put(c.toString(),e,function(t){u.log_("transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<a.length;o++){a[o].status=Nl.COMPLETED,e=e.concat(u.serverSyncTree_.ackUserWrite(a[o].currentWriteId)),a[o].onComplete&&(n=a[o].currentOutputSnapshotResolved,r=new Sl(u,a[o].path),r=new oc(n,r,Nu),i.push(a[o].onComplete.bind(null,null,!0,r))),a[o].unwatcher()}u.pruneCompletedTransactionsBelowNode_(u.transactionQueueTree_.subTree(s)),u.sendReadyTransactions_(),u.eventQueue_.raiseEventsForChangedPath(s,e);for(o=0;o<i.length;o++)Sa(i[o])}else{if("datastale"===t)for(o=0;o<a.length;o++)a[o].status===Nl.SENT_NEEDS_ABORT?a[o].status=Nl.NEEDS_ABORT:a[o].status=Nl.RUN;else{ia("transaction at "+c.toString()+" failed: "+t);for(o=0;o<a.length;o++)a[o].status=Nl.NEEDS_ABORT,a[o].abortReason=t}u.rerunTransactions_(s)}},t)},yl.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),t=e.path(),e=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(e,t),t},yl.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===Nl.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var s,a,u,c=t[o],h=ka.relativePath(e,c.path),l=!1,f=void 0;Ao(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===Nl.NEEDS_ABORT?(l=!0,f=c.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):c.status===Nl.RUN&&(r=c.retryCount>=yl.MAX_TRANSACTION_RETRIES_?(l=!0,f="maxretry",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):(s=this.getLatestState_(c.path,i),c.currentInputSnapshot=s,void 0!==(u=t[o].update(s.val()))?(tu("transaction failed: Data returned ",u,c.path),a=Zu(u),"object"==typeof u&&null!=u&&Zo(u,".priority")||(a=a.updatePriority(s.getPriority())),h=c.currentWriteId,u=this.generateServerValues(),u=Ic(a,s,u),c.currentOutputSnapshotRaw=a,c.currentOutputSnapshotResolved=u,c.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(h),1),(r=r.concat(this.serverSyncTree_.applyUserOverwrite(c.path,u,c.currentWriteId,c.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(l=!0,f="nodata",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],l&&(t[o].status=Nl.COMPLETED,c=t[o].unwatcher,setTimeout(c,Math.floor(0)),t[o].onComplete&&("nodata"===f?(l=new Sl(this,t[o].path),c=t[o].currentInputSnapshot,l=new oc(c,l,Nu),n.push(t[o].onComplete.bind(null,null,!1,l))):n.push(t[o].onComplete.bind(null,new Error(f),!1,null))))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(o=0;o<n.length;o++)Sa(n[o]);this.sendReadyTransactions_()}},yl.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},yl.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},yl.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},yl.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Nl.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},yl.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),t=this.transactionQueueTree_.subTree(t);return t.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(t),t.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},yl.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++){e[o].status===Nl.SENT_NEEDS_ABORT||(e[o].status===Nl.SENT?(Ao(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Nl.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Ao(e[o].status===Nl.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Sa(n[o])}};var Pl=(Rl.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(ga("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Rl.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Rl.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Rl.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ia(t)},Rl);function Rl(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Dl=(xl.prototype.getToken=function(t){return Promise.resolve({accessToken:xl.EMULATOR_AUTH_TOKEN})},xl.prototype.addTokenChangeListener=function(t){t(xl.EMULATOR_AUTH_TOKEN)},xl.prototype.removeTokenChangeListener=function(t){},xl.prototype.notifyForInvalidToken=function(){},xl.EMULATOR_AUTH_TOKEN="owner",xl);function xl(){}var Ll,Ml=(Fl.getInstance=function(){return Ll=Ll||new Fl},Fl.prototype.interrupt=function(){var e,t,n,r;try{for(var i=wo(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,wo(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Fl.prototype.resume=function(){var e,t,n,r;try{for(var i=wo(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,wo(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Fl.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Ma(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Dl)},Fl.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||ra("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ga("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Ua(i,r),a=s.repoInfo,n=void 0;"undefined"!=typeof process&&(n=process.env.FIREBASE_DATABASE_EMULATOR_HOST),n?(o=!0,i="http://"+n+"?ns="+a.namespace,a=(s=Ua(i,r)).repoInfo):o=!s.repoInfo.secure;e=r&&o?new Dl:new Pl(t,e);return Ya("Invalid Firebase Database URL",1,s),s.path.isEmpty()||ra("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,e).database},Fl.prototype.deleteRepo=function(t){var e=ts(this.repos_,t.app.name);e&&ts(e,t.key)===t||ra("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},Fl.prototype.createRepo=function(t,e,n){var r=ts(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ts(r,t.toURLString());return i&&ra("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new yl(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Fl.prototype.forceRestClient=function(t){this.useRestClient_=t},Fl);function Fl(){this.repos_={},this.useRestClient_=!1}var Ul=(Object.defineProperty(jl.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(jl.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Sl(this.repo_,ka.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(jl.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),jl.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?ra("Cannot call useEmulator() after instance has already been initialized."):Ml.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},jl.prototype.ref=function(t){return this.checkDeleted_("ref"),cs("database.ref",0,1,arguments.length),t instanceof Sl?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},jl.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),cs(e,1,1,arguments.length);var n=Ua(t,this.repo_.repoInfo_.nodeAdmin);Ya(e,1,n);t=n.repoInfo;return t.isCustomHost()||t.host===this.repo_.repoInfo_.host||ra(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},jl.prototype.checkDeleted_=function(t){null===this.repoInternal_&&ra("Cannot call "+t+" on a deleted database.")},jl.prototype.goOffline=function(){cs("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},jl.prototype.goOnline=function(){cs("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},jl.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},jl);function jl(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return _o(e,void 0,void 0,function(){return bo(this,function(t){return this.checkDeleted_("delete"),Ml.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof yl||ra("Don't call new Database() directly - please use firebase.database().")}var Vl=Object.freeze({__proto__:null,forceLongPolling:function(){tl.forceDisallow(),zh.forceAllow()},forceWebSockets:function(){zh.forceDisallow()},isWebSocketsAvailable:function(){return tl.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return $h(r),(r=new Es("auth-internal",new Ts("database-standalone"))).setComponent(new _s("auth-internal",function(){return i},"PRIVATE")),{instance:Ml.getInstance().databaseFromApp(e,r,n,t),namespace:o}}}),Dr=hl;hl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},hl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var ql,Bl=Object.freeze({__proto__:null,DataConnection:Dr,RealTimeConnection:il,hijackHash:function(i){var o=hl.prototype.put;return hl.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){hl.prototype.put=o}},ConnectionTarget:Ma,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Ml.getInstance().forceRestClient(t)}}),Wl=Ul.ServerValue;$h((ql=Jl).SDK_VERSION),ql.INTERNAL.registerComponent(new _s("database",function(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return Ml.getInstance().databaseFromApp(n,t,e)},"PUBLIC").setServiceProps({Reference:Sl,Query:yc,Database:Ul,DataSnapshot:oc,enableLogging:ea,INTERNAL:Vl,ServerValue:Wl,TEST_ACCESS:Bl}).setMultipleInstances(!0)),ql.registerVersion("@firebase/database","0.7.1");var Kl=function(t,e){return(Kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Hl(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Gl={},zl=M||self;function Ql(){}function Yl(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Xl(t){var e=Yl(t);return"array"==e||"object"==e&&"number"==typeof t.length}function $l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Zl="closure_uid_"+(1e9*Math.random()>>>0),tf=0;function ef(t,e,n){return t.call.apply(t.bind,arguments)}function nf(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function rf(t,e,n){return(rf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ef:nf).apply(null,arguments)}function of(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var sf=Date.now;function af(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t}function uf(){this.j=this.j,this.i=this.i}uf.prototype.j=!1,uf.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Zl)&&t[Zl]||(t[Zl]=++tf))},uf.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var cf=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},hf=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function lf(){return Array.prototype.concat.apply([],arguments)}function ff(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function pf(t){return/^[\s\xa0]*$/.test(t)}var df,vf=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function yf(t,e){return-1!=t.indexOf(e)}function gf(t,e){return t<e?-1:e<t?1:0}t:{var mf=zl.navigator;if(mf){mf=mf.userAgent;if(mf){df=mf;break t}}df=""}function _f(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function bf(t){var e,n={};for(e in t)n[e]=t[e];return n}var wf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ef(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<wf.length;i++)e=wf[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function If(t){return If[" "](t),t}If[" "]=Ql;var Tf,Sf=yf(df,"Opera"),Cf=yf(df,"Trident")||yf(df,"MSIE"),Nf=yf(df,"Edge"),Af=Nf||Cf,kf=yf(df,"Gecko")&&!(yf(df.toLowerCase(),"webkit")&&!yf(df,"Edge"))&&!(yf(df,"Trident")||yf(df,"MSIE"))&&!yf(df,"Edge"),Of=yf(df.toLowerCase(),"webkit")&&!yf(df,"Edge");function Pf(){var t=zl.document;return t?t.documentMode:void 0}t:{var Rf="",Df=(Df=df,kf?/rv:([^\);]+)(\)|;)/.exec(Df):Nf?/Edge\/([\d\.]+)/.exec(Df):Cf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Df):Of?/WebKit\/(\S+)/.exec(Df):Sf?/(?:Version)[ \/]?(\S+)/.exec(Df):void 0);if(Df&&(Rf=Df?Df[1]:""),Cf){Df=Pf();if(null!=Df&&Df>parseFloat(Rf)){Tf=String(Df);break t}}Tf=Rf}var xf={};function Lf(a){return t=a,e=function(){for(var t=0,e=vf(String(Tf)).split("."),n=vf(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=gf(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||gf(0==o[2].length,0==s[2].length)||gf(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=xf,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Mf=zl.document&&Cf?Pf()||(parseInt(Tf,10)||void 0):void 0,Ff=!Cf||9<=Number(Mf),Uf=Cf&&!Lf("9"),jf=function(){if(!zl.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{zl.addEventListener("test",Ql,e),zl.removeEventListener("test",Ql,e)}catch(t){}return t}();function Vf(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function qf(t,e){if(Vf.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(kf){t:{try{If(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Bf[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Vf.prototype.b=function(){this.defaultPrevented=!0},af(qf,Vf);var Bf={2:"touch",3:"pen",4:"mouse"};qf.prototype.b=function(){qf.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Uf)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Wf="closure_listenable_"+(1e6*Math.random()|0),Kf=0;function Hf(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Kf,this.Y=this.Z=!1}function Gf(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function zf(t){this.src=t,this.a={},this.b=0}function Qf(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=cf(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Gf(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Yf(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}zf.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Yf(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Hf(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Xf="closure_lm_"+(1e6*Math.random()|0),Jf={};function $f(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=sp(r);return e&&e[Wf]?e.wa(n,r,$l(i)?!!i.capture:!!i,o):Zf(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)$f(t,e[o],n,r,i);return null}return n=sp(n),t&&t[Wf]?t.va(e,n,$l(r)?!!r.capture:!!r,i):Zf(t,e,n,!1,r,i)}function Zf(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=$l(i)?!!i.capture:!!i;if(s&&!Ff)return null;var a,u,c=ip(t);if(c||(t[Xf]=c=new zf(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=rp,r=u=Ff?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)jf||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ep(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function tp(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Wf]?Qf(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ep(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ip(e))?(Qf(n,t),0==n.b&&(n.src=null,e[Xf]=null)):Gf(t)))}function ep(t){return t in Jf?Jf[t]:Jf[t]="on"+t}function np(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&tp(t),n.call(r,e)}function rp(t,e){if(t.Y)return!0;if(Ff)return np(t,new qf(e,this));if(!e)t:{e=["window","event"];for(var n=zl,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return np(t,e=new qf(e,this))}function ip(t){return(t=t[Xf])instanceof zf?t:null}var op="__closure_events_fn_"+(1e9*Math.random()>>>0);function sp(e){return"function"==Yl(e)?e:(e[op]||(e[op]=function(t){return e.handleEvent(t)}),e[op])}function ap(){uf.call(this),this.c=new zf(this),(this.J=this).C=null}function up(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new Vf(e,t):e instanceof Vf?e.target=e.target||t:(s=e,Ef(e=new Vf(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=cp(o,r,!0,e)&&s;if(s=cp(o=e.a=t,r,!0,e)&&s,s=cp(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=cp(o=e.a=n[i],r,!1,e)&&s}function cp(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Qf(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}af(ap,uf),ap.prototype[Wf]=!0,(du=ap.prototype).addEventListener=function(t,e,n,r){$f(this,t,e,n,r)},du.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=$l(i)?!!i.capture:!!i,r=sp(r),e&&e[Wf]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Yf(s=e.a[n],r,i,o))&&(Gf(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&ip(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Yf(n,r,i,o)),(r=-1<e?n[e]:null)&&tp(r))}(this,t,e,n,r)},du.G=function(){if(ap.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Gf(n[r]);delete e.a[t],e.b--}}this.C=null},du.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},du.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var hp=zl.JSON.stringify;function lp(){this.b=this.a=null}var fp,pp=(dp.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new dp(function(){return new vp},function(t){t.reset()},100));function dp(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function vp(){this.next=this.b=this.a=null}function yp(t,e){var n;fp||(n=zl.Promise.resolve(void 0),fp=function(){n.then(_p)}),gp||(fp(),gp=!0),mp.add(t,e)}lp.prototype.add=function(t,e){var n=pp.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},vp.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var gp=!(vp.prototype.reset=function(){this.next=this.b=this.a=null}),mp=new lp;function _p(){for(var t,e;n=e=void 0,n=null,(e=mp).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){zl.setTimeout(function(){throw t},0)}(t)}var n=pp;n.g(t),n.b<n.f&&(n.b++,t.next=n.a,n.a=t)}gp=!1}function bp(t,e){ap.call(this),this.b=t||1,this.a=e||zl,this.f=rf(this.Xa,this),this.g=sf()}function wp(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ep(t,e,n){if("function"==Yl(t))n&&(t=rf(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=rf(t.handleEvent,t)}return 2147483647<Number(e)?-1:zl.setTimeout(t,e||0)}af(bp,ap),(du=bp.prototype).aa=!1,du.M=null,du.Xa=function(){var t;this.aa&&(0<(t=sf()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),up(this,"tick"),this.aa&&(wp(this),this.start())))},du.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=sf())},du.G=function(){bp.X.G.call(this),wp(this),delete this.a};var Ip,Tp,Sp,Cp=(Kl(Tp=Ap,Sp=Ip=uf),Tp.prototype=null===Sp?Object.create(Sp):(Np.prototype=Sp.prototype,new Np),Ap.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Ep(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},Ap.prototype.G=function(){Ip.prototype.G.call(this),this.a&&(zl.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},Ap);function Np(){this.constructor=Tp}function Ap(t,e,n){var r=Ip.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function kp(t){uf.call(this),this.b=t,this.a={}}af(kp,uf);var Op=[];function Pp(t,e,n,r){Array.isArray(n)||(n&&(Op[0]=n.toString()),n=Op);for(var i=0;i<n.length;i++){var o=$f(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Rp(t){_f(t.a,function(t,e){this.a.hasOwnProperty(e)&&tp(t)},t),t.a={}}function Dp(){this.a=!0}function xp(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return hp(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}kp.prototype.G=function(){kp.X.G.call(this),Rp(this)},kp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dp.prototype.info=function(){};var Lp=null;function Mp(){return Lp=Lp||new ap}function Fp(t){Vf.call(this,"serverreachability",t)}function Up(t){var e=Mp();up(e,new Fp(e))}function jp(t){Vf.call(this,"statevent",t)}function Vp(t){var e=Mp();up(e,new jp(e))}function qp(t){Vf.call(this,"timingevent",t)}function Bp(t,e){if("function"!=Yl(t))throw Error("Fn must not be null and must be a function");return zl.setTimeout(function(){t()},e)}af(Fp,Vf),af(jp,Vf),af(qp,Vf);G={NO_ERROR:0,Ya:1,fb:2,eb:3,ab:4,cb:5,gb:6,Da:7,TIMEOUT:8,jb:9},Dr={$a:"complete",nb:"success",Ea:"error",Da:"abort",lb:"ready",mb:"readystatechange",TIMEOUT:"timeout",hb:"incrementaldata",kb:"progress",bb:"downloadprogress",ob:"uploadprogress"};function Wp(){}function Kp(t){var e;return(e=t.a)||(e=t.a={}),e}function Hp(){}Wp.prototype.a=null;var Gp,M={OPEN:"a",Za:"b",Ea:"c",ib:"d"};function zp(){Vf.call(this,"d")}function Qp(){Vf.call(this,"c")}function Yp(){}function Xp(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new kp(this),this.P=Jp,t=Af?125:void 0,this.R=new bp(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}af(zp,Vf),af(Qp,Vf),af(Yp,Wp),Gp=new Yp;var Jp=45e3,$p={},Zp={};function td(t,e,n){t.H=1,t.i=wd(vd(e)),t.j=n,t.I=!0,ed(t,null)}function ed(t,e){t.u=sf(),rd(t),t.l=vd(t.i);var s,a,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),xd(n.b,"t",r),t.D=0,t.a=Nv(t.g,t.g.C?e:null),0<t.O&&(t.F=new Cp(rf(t.Ca,t,t.a),t.O)),Pp(t.J,t.a,"readystatechange",t.Va),e=t.B?bf(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Up(1),s=t.c,a=t.m,u=t.l,c=t.f,h=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function nd(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=i=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?Zp:(i=Number(a.substring(i,o)),isNaN(i)?$p:(o+=1)+i>a.length?Zp:(a=a.substr(o,i),r.D=o+i,a)));if(a==Zp){4==e&&(t.h=4,Vp(14),s=!1),xp(t.c,t.f,null,"[Incomplete Response]");break}if(a==$p){t.h=4,Vp(15),xp(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}xp(t.c,t.f,a,null),ud(t,a)}4==e&&0==n.length&&(t.h=1,Vp(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),_v(e),e.F=!0,Vp(11))):(xp(t.c,t.f,n,"[Invalid Chunked Response]"),ad(t),sd(t))}function rd(t){t.T=sf()+t.P,id(t,t.P)}function id(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Bp(rf(t.Ta,t),e)}function od(t){t.o&&(zl.clearTimeout(t.o),t.o=null)}function sd(t){0==t.g.v||t.A||Ev(t.g,t)}function ad(t){od(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,wp(t.R),Rp(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ud(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||qd(a.b,t)))if(a.I=t.N,!t.C&&qd(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;wv(a),hv(a)}mv(a),Vp(18)}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=Bp(rf(a.Qa,a),6e3));if(Vd(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else Tv(a,11)}else if(!t.C&&a.a!=t||wv(a),!pf(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++){c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(yf(r,"spdy")||yf(r,"quic")||yf(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(Bd(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,bd(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.U&&(a.N=sf()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=Cv(n,n.C?n.ga:null,n.fa),i.C?(Wd(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(od(o),rd(o)),n.a=i):gv(n),0<a.g.length&&pv(a)):"stop"!=c[0]&&"close"!=c[0]||Tv(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Tv(a,7):cv(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0)}Up(4)}catch(t){}}function cd(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Xl(t)||"string"==typeof t)hf(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Xl(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Xl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function hd(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof hd)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ld(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];fd(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)fd(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function fd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(du=Xp.prototype).setTimeout=function(t){this.P=t},du.Va=function(t){t=t.target;var e=this.F;e&&3==ov(t)?e.f():this.Ca(t)},du.Ca=function(t){try{if(t==this.a)t:{var e=ov(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!Af&&!this.a.$())){this.A||4!=e||7==n||Up(8==n||r<=0?3:2),od(this);var i=this.a.W();this.N=i;n=this.a.$();if(this.b=200==i,r=this.c,a=this.m,u=this.l,c=this.f,h=this.S,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+a+"\n"+u+"\n"+l+" "+f}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pf(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,Vp(12),ad(this),sd(this);break t}xp(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ud(this,s)}this.I?(nd(this,e,n),Af&&this.b&&3==e&&(Pp(this.J,this.R,"tick",this.Ua),this.R.start())):(xp(this.c,this.f,n,null),ud(this,n)),4==e&&ad(this),this.b&&!this.A&&(4==e?Ev(this.g,this):(this.b=!1,rd(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,Vp(12)):(this.h=0,Vp(13)),ad(this),sd(this)}}}catch(t){}var a,u,c,h,l,f},du.Ua=function(){var t,e;this.a&&(t=ov(this.a),e=this.a.$(),this.D<e.length&&(od(this),nd(this,t,e),this.b&&4!=t&&rd(this)))},du.cancel=function(){this.A=!0,ad(this)},du.Ta=function(){this.o=null;var t,e,n=sf();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(Up(3),Vp(17)),ad(this),this.h=2,sd(this)):id(this,this.T-n)},(du=hd.prototype).K=function(){ld(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},du.L=function(){return ld(this),this.a.concat()},du.get=function(t,e){return fd(this.b,t)?this.b[t]:e},du.set=function(t,e){fd(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},du.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var pd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dd(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof dd?(this.a=void 0!==e?e:t.a,yd(this,t.f),this.j=t.j,gd(this,t.c),md(this,t.h),this.g=t.g,e=t.b,(n=new Od).c=e.c,e.a&&(n.a=new hd(e.a),n.b=e.b),_d(this,n),this.i=t.i):t&&(n=String(t).match(pd))?(this.a=!!e,yd(this,n[1]||"",!0),this.j=Ed(n[2]||""),gd(this,n[3]||"",!0),md(this,n[4]),this.g=Ed(n[5]||"",!0),_d(this,n[6]||"",!0),this.i=Ed(n[7]||"")):(this.a=!!e,this.b=new Od(null,this.a))}function vd(t){return new dd(t)}function yd(t,e,n){t.f=n?Ed(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function gd(t,e,n){t.c=n?Ed(e,!0):e}function md(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function _d(t,e,n){var r,i;e instanceof Od?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Pd(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Rd(this,e),xd(this,n,t))},r)),r.f=i):(n||(e=Id(e,Ad)),t.b=new Od(e,t.a))}function bd(t,e,n){t.b.set(e,n)}function wd(t){return bd(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^sf()).toString(36)),t}function Ed(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Id(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Td),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Td(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}dd.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Id(e,Sd,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Id(e,Sd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Id(n,"/"==n.charAt(0)?Nd:Cd,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Id(n,kd)),t.join("")};var Sd=/[#\/\?@]/g,Cd=/[#\?:]/g,Nd=/[#\?]/g,Ad=/[#\?@]/g,kd=/#/g;function Od(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Pd(n){n.a||(n.a=new hd,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Rd(t,e){Pd(t),e=Ld(t,e),fd(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,fd((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ld(t)))}function Dd(t,e){return Pd(t),e=Ld(t,e),fd(t.a.b,e)}function xd(t,e,n){Rd(t,e),0<n.length&&(t.c=null,t.a.set(Ld(t,e),ff(n)),t.b+=n.length)}function Ld(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Md(t,e){this.b=t,this.a=e}function Fd(t){this.g=t||Ud,t=zl.PerformanceNavigationTiming?0<(t=zl.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(zl.ia&&zl.ia.ya&&zl.ia.ya()&&zl.ia.ya().pb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(du=Od.prototype).add=function(t,e){Pd(this),this.c=null,t=Ld(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},du.forEach=function(n,r){Pd(this),this.a.forEach(function(t,e){hf(t,function(t){n.call(r,t,e,this)},this)},this)},du.L=function(){Pd(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},du.K=function(t){Pd(this);var e=[];if("string"==typeof t)Dd(this,t)&&(e=lf(e,this.a.get(Ld(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=lf(e,t[n])}return e},du.set=function(t,e){return Pd(this),this.c=null,Dd(this,t=Ld(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},du.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},du.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Ud=10;function jd(t){return t.b||t.a&&t.a.size>=t.f}function Vd(t){return t.b?1:t.a?t.a.size:0}function qd(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Bd(t,e){t.a?t.a.add(e):t.b=e}function Wd(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Kd(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return ff(t.c);var r=t.c;try{for(var i=Hl(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Hd(){}function Gd(){this.a=new Hd}function zd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Fd.prototype.cancel=function(){var e,t;if(this.c=Kd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Hl(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Hd.prototype.stringify=function(t){return zl.JSON.stringify(t,void 0)},Hd.prototype.parse=function(t){return zl.JSON.parse(t,void 0)};var Qd=zl.JSON.parse;function Yd(t){ap.call(this),this.headers=new hd,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Xd,this.D=this.F=!1}af(Yd,ap);var Xd="",Jd=/^https?$/i,$d=["POST","PUT"];function Zd(t){return"content-type"==t.toLowerCase()}function tv(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ev(t),rv(t)}function ev(t){t.u||(t.u=!0,up(t,"complete"),up(t,"error"))}function nv(t){if(t.b&&void 0!==Gl&&(!t.s[1]||4!=ov(t)||2!=t.W()))if(t.l&&4==ov(t))Ep(t.za,0,t);else if(up(t,"readystatechange"),4==ov(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(pd)[1]||null)&&zl.self&&zl.self.location&&(i=(r=zl.self.location.protocol).substr(0,r.length-1)),n=!Jd.test(i?i.toLowerCase():"")),e=n),e)up(t,"complete"),up(t,"success");else{t.h=6;try{var a=2<ov(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.W()+"]",ev(t)}}finally{rv(t)}}}function rv(t,e){if(t.a){iv(t);var n=t.a,r=t.s[0]?Ql:null;t.a=null,t.s=null,e||up(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function iv(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(zl.clearTimeout(t.m),t.m=null)}function ov(t){return t.a?t.a.readyState:0}function sv(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",_f(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):bd(t,e,n))}function av(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function uv(t){this.pa=0,this.g=[],this.c=new Dp,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Ma=this.R=0,this.Ja=av("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Fa=av("baseRetryDelayMs",5e3,t),this.Pa=av("retryDelaySeedMs",1e4,t),this.Ka=av("forwardChannelMaxRetries",2,t),this.ma=av("forwardChannelRequestTimeoutMs",2e4,t),this.La=t&&t.h||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Fd(t&&t.concurrentRequestLimit),this.ka=new Gd,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.g&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ia=t&&t.f||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function cv(t){var e,n;lv(t),3==t.v&&(e=t.R++,bd(n=vd(t.B),"SID",t.J),bd(n,"RID",e),bd(n,"TYPE","terminate"),vv(t,n),(e=new Xp(t,t.c,e,void 0)).H=2,e.i=wd(vd(n)),n=!1,zl.navigator&&zl.navigator.sendBeacon&&(n=zl.navigator.sendBeacon(e.i.toString(),"")),!n&&zl.Image&&((new Image).src=e.i,n=!0),n||(e.a=Nv(e.g,null),e.a.ba(e.i)),e.u=sf(),rd(e)),Sv(t)}function hv(t){t.a&&(_v(t),t.a.cancel(),t.a=null)}function lv(t){hv(t),t.j&&(zl.clearTimeout(t.j),t.j=null),wv(t),t.b.cancel(),t.h&&("number"==typeof t.h&&zl.clearTimeout(t.h),t.h=null)}function fv(t,e){t.g.push(new Md(t.Ma++,e)),3==t.v&&pv(t)}function pv(t){jd(t.b)||t.h||(t.h=!0,yp(t.Ba,t),t.u=0)}function dv(t,e){var n=e?e.f:t.R++,r=vd(t.B);bd(r,"SID",t.J),bd(r,"RID",n),bd(r,"AID",t.P),vv(t,r),t.i&&t.l&&sv(r,t.i,t.l),n=new Xp(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=yv(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Bd(t.b,n),td(n,r,e)}function vv(t,n){t.f&&cd({},function(t,e){bd(n,e,t)})}function yv(t,e,n){n=Math.min(t.g.length,n);var r=t.f?rf(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r,e){var i=e||"";try{cd(t,function(t,e){var n=t;$l(t)&&(n=hp(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function gv(t){t.a||t.j||(t.T=1,yp(t.Aa,t),t.o=0)}function mv(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Bp(rf(t.Aa,t),Iv(t,t.o)),t.o++,1)}function _v(t){null!=t.s&&(zl.clearTimeout(t.s),t.s=null)}function bv(t){t.a=new Xp(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=vd(t.la);bd(e,"RID","rpc"),bd(e,"SID",t.J),bd(e,"CI",t.H?"0":"1"),bd(e,"AID",t.P),vv(t,e),bd(e,"TYPE","xmlhttp"),t.i&&t.l&&sv(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=wd(vd(e)),n.j=null,n.I=!0,ed(n,t)}function wv(t){null!=t.m&&(zl.clearTimeout(t.m),t.m=null)}function Ev(t,e){var n,r=null;if(t.a==e){wv(t),_v(t),t.a=null;var i=2}else{if(!qd(t.b,e))return;r=e.s,Wd(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b){1==i?(r=e.j?e.j.length:0,e=sf()-e.u,n=t.u,up(i=Mp(),new qp(i)),pv(t)):gv(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(Vd(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.Ja?0:t.Ka)))return t.h=Bp(rf(t.Ba,t,e),Iv(t,t.u)),t.u++,1}}(t,e)||2==i&&mv(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:Tv(t,5);break;case 4:Tv(t,10);break;case 3:Tv(t,6);break;default:Tv(t,2)}}function Iv(t,e){var n=t.Fa+Math.floor(Math.random()*t.Pa);return t.f||(n*=2),n*e}function Tv(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=rf(t.Wa,t),r||(r=new dd("//www.google.com/images/cleardot.gif"),zl.location&&"http"==zl.location.protocol||yd(r,"https"),wd(r)),n=r.toString(),r=o,o=new Dp,zl.Image?((i=new Image).onload=of(zd,o,i,"TestLoadImage: loaded",!0,r),i.onerror=of(zd,o,i,"TestLoadImage: error",!1,r),i.onabort=of(zd,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=of(zd,o,i,"TestLoadImage: timeout",!1,r),zl.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):Vp(2),t.v=0,t.f&&t.f.ra(e),Sv(t),lv(t)}function Sv(t){t.v=0,t.I=-1,t.f&&(0==Kd(t.b).length&&0==t.g.length||(t.b.c.length=0,ff(t.g),t.g.length=0),t.f.qa())}function Cv(t,e,n){var r,i,o,s,a,u=(s=n)instanceof dd?vd(s):new dd(s,void 0);return""!=u.c?(e&&gd(u,e+"."+u.c),md(u,u.h)):(a=zl.location,r=a.protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new dd(null,void 0),r&&yd(a,r),i&&gd(a,i),o&&md(a,o),s&&(a.g=s),u=a),t.V&&_f(t.V,function(t,e){bd(u,e,t)}),e=t.A,n=t.na,e&&n&&bd(u,e,n),bd(u,"VER",t.ha),vv(t,u),u}function Nv(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yd(t.La)).F=t.C,e}function Av(){}function kv(){if(Cf&&!(10<=Number(Mf)))throw Error("Environmental error: no available transport.")}function Ov(t,e){ap.call(this),this.a=new uv(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!pf(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pf(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Dv(this)}function Pv(t){zp.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Rv(){Qp.call(this),this.status=1}function Dv(t){this.a=t}(du=Yd.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Kp(this.H):Kp(Gp),this.a.onreadystatechange=rf(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void tv(this,t)}t=n||"";var i,o=new hd(this.headers);r&&cd(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Zd,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=zl.FormData&&t instanceof zl.FormData,0<=cf($d,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{iv(this),0<this.o&&((this.D=(i=this.a,Cf&&Lf(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=rf(this.xa,this)):this.m=Ep(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){tv(this,t)}},du.xa=function(){void 0!==Gl&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,up(this,"timeout"),this.abort(8))},du.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,up(this,"complete"),up(this,"abort"),rv(this))},du.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),rv(this,!0)),Yd.X.G.call(this)},du.za=function(){this.j||(this.A||this.l||this.g?nv(this):this.Sa())},du.Sa=function(){nv(this)},du.W=function(){try{return 2<ov(this)?this.a.status:-1}catch(t){return-1}},du.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},du.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Qd(e)}},du.ua=function(){return this.h},du.Oa=function(){return"string"==typeof this.f?this.f:String(this.f)},(du=uv.prototype).ha=8,du.v=1,du.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Xp(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ef(r=bf(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=yv(this,n,e),bd(i=vd(this.B),"RID",t),bd(i,"CVER",22),this.A&&bd(i,"X-HTTP-Session-Id",this.A),vv(this,i),this.i&&r&&sv(i,this.i,r),Bd(this.b,n),this.Ga&&bd(i,"TYPE","init"),this.da?(bd(i,"$req",e),bd(i,"SID","null"),n.U=!0,td(n,i,null)):td(n,i,e),this.v=2}}else 3==this.v&&(t?dv(this,t):0==this.g.length||jd(this.b)||dv(this))},du.Aa=function(){var t;this.j=null,bv(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=Bp(rf(this.Ra,this),t))},du.Ra=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Vp(10),hv(this),bv(this))},du.Qa=function(){null!=this.m&&(this.m=null,hv(this),mv(this),Vp(19))},du.Wa=function(t){t?(this.c.info("Successfully pinged google.com"),Vp(2)):(this.c.info("Failed to ping google.com"),Vp(1))},(du=Av.prototype).ta=function(){},du.sa=function(){},du.ra=function(){},du.qa=function(){},du.Ha=function(){},kv.prototype.a=function(t,e){return new Ov(t,e)},af(Ov,ap),Ov.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Vp(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Cv(t,null,t.fa),pv(t)},Ov.prototype.close=function(){cv(this.a)},Ov.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,fv(this.a,e)):this.l?((e={}).__data__=hp(t),fv(this.a,e)):fv(this.a,t)},Ov.prototype.G=function(){this.a.f=null,delete this.f,cv(this.a),delete this.a,Ov.X.G.call(this)},af(Pv,zp),af(Rv,Qp),af(Dv,Av),Dv.prototype.ta=function(){up(this.a,"a")},Dv.prototype.sa=function(t){up(this.a,new Pv(t))},Dv.prototype.ra=function(t){up(this.a,new Rv)},Dv.prototype.qa=function(){up(this.a,"b")},kv.prototype.createWebChannel=kv.prototype.a,Ov.prototype.send=Ov.prototype.h,Ov.prototype.open=Ov.prototype.g,G.NO_ERROR=0,G.TIMEOUT=8,G.HTTP_ERROR=6,Dr.COMPLETE="complete",(Hp.EventType=M).OPEN="a",M.CLOSE="b",M.ERROR="c",M.MESSAGE="d",ap.prototype.listen=ap.prototype.va,Yd.prototype.listenOnce=Yd.prototype.wa,Yd.prototype.getLastError=Yd.prototype.Oa,Yd.prototype.getLastErrorCode=Yd.prototype.ua,Yd.prototype.getStatus=Yd.prototype.W,Yd.prototype.getResponseJson=Yd.prototype.Na,Yd.prototype.getResponseText=Yd.prototype.$,Yd.prototype.send=Yd.prototype.ba;var xv=G,Lv=Dr,Mv=Hp,Fv=Yd,Uv=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},jv=(Object.defineProperty(qv.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),qv.prototype.isEqual=function(t){return t instanceof qv&&t.projectId===this.projectId&&t.database===this.database},qv),Vv=new Ds("@firebase/firestore");function qv(t,e){this.projectId=t,this.database=e||"(default)"}function Bv(){return Vv.logLevel}function Wv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vv.logLevel<=Ns.DEBUG&&(e=n.map(Gv),Vv.debug.apply(Vv,To(["Firestore (8.0.2): "+t],e)))}function Kv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vv.logLevel<=Ns.ERROR&&(e=n.map(Gv),Vv.error.apply(Vv,To(["Firestore (8.0.2): "+t],e)))}function Hv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vv.logLevel<=Ns.WARN&&(e=n.map(Gv),Vv.warn.apply(Vv,To(["Firestore (8.0.2): "+t],e)))}function Gv(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function zv(t){void 0===t&&(t="Unexpected state");t="FIRESTORE (8.0.2) INTERNAL ASSERTION FAILED: "+t;throw Kv(t),new Error(t)}function Qv(t){t||zv()}var Yv=(Xv.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Xv);function Xv(){}function Jv(t,e){return t<e?-1:e<t?1:0}function $v(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Zv(t){return t+"\0"}function ty(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function ey(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ny(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ry,iy,oy,sy=(Ey.prototype.get=function(t){var e=this.h(t),e=this._[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.l(o,t))return i}},Ey.prototype.has=function(t){return void 0!==this.get(t)},Ey.prototype.set=function(t,e){var n=this.h(t),r=this._[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.l(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this._[n]=[[t,e]]},Ey.prototype.delete=function(t){var e=this.h(t),n=this._[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.l(n[r][0],t))return 1===n.length?delete this._[e]:n.splice(r,1),!0;return!1},Ey.prototype.forEach=function(s){ey(this._,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},Ey.prototype.T=function(){return ny(this._)},Ey),ay={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},uy=(go(wy,oy=Error),wy),cy=(by.now=function(){return by.fromMillis(Date.now())},by.fromDate=function(t){return by.fromMillis(t.getTime())},by.fromMillis=function(t){var e=Math.floor(t/1e3);return new by(e,1e6*(t-1e3*e))},by.prototype.toDate=function(){return new Date(this.toMillis())},by.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},by.prototype.I=function(t){return this.seconds===t.seconds?Jv(this.nanoseconds,t.nanoseconds):Jv(this.seconds,t.seconds)},by.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},by.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},by.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},by.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},by),hy=(_y.m=function(t){return new _y(t)},_y.min=function(){return new _y(new cy(0,0))},_y.prototype.A=function(t){return this.timestamp.I(t.timestamp)},_y.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},_y.prototype.R=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},_y.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},_y.prototype.P=function(){return this.timestamp},_y),M=(Object.defineProperty(my.prototype,"length",{get:function(){return this.g},enumerable:!1,configurable:!0}),my.prototype.isEqual=function(t){return 0===my.V(this,t)},my.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof my?t.forEach(function(t){e.push(t)}):e.push(t),this.p(e)},my.prototype.limit=function(){return this.offset+this.length},my.prototype.v=function(t){return t=void 0===t?1:t,this.p(this.segments,this.offset+t,this.length-t)},my.prototype.S=function(){return this.p(this.segments,this.offset,this.length-1)},my.prototype.D=function(){return this.segments[this.offset]},my.prototype.C=function(){return this.get(this.length-1)},my.prototype.get=function(t){return this.segments[this.offset+t]},my.prototype.T=function(){return 0===this.length},my.prototype.N=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},my.prototype.F=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},my.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},my.prototype.O=function(){return this.segments.slice(this.offset,this.limit())},my.V=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},my),ly=(go(gy,iy=M),gy.prototype.p=function(t,e,n){return new gy(t,e,n)},gy.prototype.M=function(){return this.O().join("/")},gy.prototype.toString=function(){return this.M()},gy.k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new uy(ay.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new gy(n)},gy.$=function(){return new gy([])},gy),fy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,py=(go(yy,ry=M),yy.prototype.p=function(t,e,n){return new yy(t,e,n)},yy.L=function(t){return fy.test(t)},yy.prototype.M=function(){return this.O().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),yy.L(t)||(t="`"+t+"`"),t}).join(".")},yy.prototype.toString=function(){return this.M()},yy.prototype.B=function(){return 1===this.length&&"__name__"===this.get(0)},yy.q=function(){return new yy(["__name__"])},yy.U=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new uy(ay.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new uy(ay.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new uy(ay.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new uy(ay.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new yy(e)},yy.$=function(){return new yy([])},yy),dy=(vy.K=function(t){return new vy(ly.k(t))},vy.W=function(t){return new vy(ly.k(t).v(5))},vy.prototype.j=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},vy.prototype.isEqual=function(t){return null!==t&&0===ly.V(this.path,t.path)},vy.prototype.toString=function(){return this.path.toString()},vy.V=function(t,e){return ly.V(t.path,e.path)},vy.G=function(t){return t.length%2==0},vy.H=function(t){return new vy(new ly(t.slice()))},vy);function vy(t){this.path=t}function yy(){return null!==ry&&ry.apply(this,arguments)||this}function gy(){return null!==iy&&iy.apply(this,arguments)||this}function my(t,e,n){void 0===e?e=0:e>t.length&&zv(),void 0===n?n=t.length-e:n>t.length-e&&zv(),this.segments=t,this.offset=e,this.g=n}function _y(t){this.timestamp=t}function by(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new uy(ay.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new uy(ay.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new uy(ay.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new uy(ay.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function wy(t,e){var n=this;return(n=oy.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Ey(t,e){this.h=t,this.l=e,this._={}}function Iy(t){return null==t}function Ty(t){return 0===t&&1/t==-1/0}function Sy(t){return"number"==typeof t&&Number.isInteger(t)&&!Ty(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Cy=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.J=null};function Ny(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Cy(t,e,n,r,i,o,s)}function Ay(t){var e=t;return null===e.J&&(t=e.path.M(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.M()+t.op.toString()+kg(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.M()+t.dir}).join(","),Iy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=ub(e.startAt)),e.endAt&&(t+="|ub:",t+=ub(e.endAt)),e.J=t),e.J}function ky(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!Sg(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hb(t.startAt,e.startAt)&&hb(t.endAt,e.endAt)}function Oy(t){return dy.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Py=(Ry.fromBase64String=function(t){return new Ry(atob(t))},Ry.fromUint8Array=function(t){return new Ry(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Ry.prototype.toBase64=function(){return t=this.Y,btoa(t);var t},Ry.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Y)},Ry.prototype.X=function(){return 2*this.Y.length},Ry.prototype.A=function(t){return Jv(this.Y,t.Y)},Ry.prototype.isEqual=function(t){return this.Y===t.Y},Ry);function Ry(t){this.Y=t}Py.Z=new Py("");function Dy(t){this.count=t}var xy,Ly=(My.prototype.nt=function(t){return new My(this.target,this.targetId,this.tt,t,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},My.prototype.st=function(t,e){return new My(this.target,this.targetId,this.tt,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},My.prototype.it=function(t){return new My(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,t,this.resumeToken)},My);function My(t,e,n,r,i,o,s){void 0===i&&(i=hy.min()),void 0===o&&(o=hy.min()),void 0===s&&(s=Py.Z),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Fy(t){switch(t){case ay.OK:return zv(),0;case ay.CANCELLED:case ay.UNKNOWN:case ay.DEADLINE_EXCEEDED:case ay.RESOURCE_EXHAUSTED:case ay.INTERNAL:case ay.UNAVAILABLE:case ay.UNAUTHENTICATED:return;case ay.INVALID_ARGUMENT:case ay.NOT_FOUND:case ay.ALREADY_EXISTS:case ay.PERMISSION_DENIED:case ay.FAILED_PRECONDITION:case ay.ABORTED:case ay.OUT_OF_RANGE:case ay.UNIMPLEMENTED:case ay.DATA_LOSS:return 1;default:return zv(),0}}function Uy(t){if(void 0===t)return Kv("GRPC error has no .code"),ay.UNKNOWN;switch(t){case xy.OK:return ay.OK;case xy.CANCELLED:return ay.CANCELLED;case xy.UNKNOWN:return ay.UNKNOWN;case xy.DEADLINE_EXCEEDED:return ay.DEADLINE_EXCEEDED;case xy.RESOURCE_EXHAUSTED:return ay.RESOURCE_EXHAUSTED;case xy.INTERNAL:return ay.INTERNAL;case xy.UNAVAILABLE:return ay.UNAVAILABLE;case xy.UNAUTHENTICATED:return ay.UNAUTHENTICATED;case xy.INVALID_ARGUMENT:return ay.INVALID_ARGUMENT;case xy.NOT_FOUND:return ay.NOT_FOUND;case xy.ALREADY_EXISTS:return ay.ALREADY_EXISTS;case xy.PERMISSION_DENIED:return ay.PERMISSION_DENIED;case xy.FAILED_PRECONDITION:return ay.FAILED_PRECONDITION;case xy.ABORTED:return ay.ABORTED;case xy.OUT_OF_RANGE:return ay.OUT_OF_RANGE;case xy.UNIMPLEMENTED:return ay.UNIMPLEMENTED;case xy.DATA_LOSS:return ay.DATA_LOSS;default:return zv()}}(G=xy=xy||{})[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var jy=(Ky.prototype.rt=function(t,e){return new Ky(this.V,this.root.rt(t,e,this.V).copy(null,null,qy.ot,null,null))},Ky.prototype.remove=function(t){return new Ky(this.V,this.root.remove(t,this.V).copy(null,null,qy.ot,null,null))},Ky.prototype.get=function(t){for(var e=this.root;!e.T();){var n=this.V(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Ky.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.T();){var r=this.V(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Ky.prototype.T=function(){return this.root.T()},Object.defineProperty(Ky.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Ky.prototype.at=function(){return this.root.at()},Ky.prototype.ct=function(){return this.root.ct()},Ky.prototype.ut=function(t){return this.root.ut(t)},Ky.prototype.forEach=function(n){this.ut(function(t,e){return n(t,e),!1})},Ky.prototype.toString=function(){var n=[];return this.ut(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Ky.prototype.ht=function(t){return this.root.ht(t)},Ky.prototype.lt=function(){return new Vy(this.root,null,this.V,!1)},Ky.prototype._t=function(t){return new Vy(this.root,t,this.V,!1)},Ky.prototype.ft=function(){return new Vy(this.root,null,this.V,!0)},Ky.prototype.dt=function(t){return new Vy(this.root,t,this.V,!0)},Ky),Vy=(Wy.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.T();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.T();)this.Tt.push(t),t=t.left;return e},Wy.prototype.It=function(){return 0<this.Tt.length},Wy.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},Wy),qy=(By.prototype.copy=function(t,e,n,r,i){return new By(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},By.prototype.T=function(){return!1},By.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},By.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},By.prototype.min=function(){return this.left.T()?this:this.left.min()},By.prototype.at=function(){return this.min().key},By.prototype.ct=function(){return this.right.T()?this.key:this.right.ct()},By.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},By.prototype.Pt=function(){if(this.left.T())return By.EMPTY;var t=this;return t.left.gt()||t.left.left.gt()||(t=t.Vt()),(t=t.copy(null,null,null,t.left.Pt(),null)).Rt()},By.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.T()||r.left.gt()||r.left.left.gt()||(r=r.Vt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.gt()&&(r=r.yt()),r.right.T()||r.right.gt()||r.right.left.gt()||(r=r.vt()),0===e(t,r.key)){if(r.right.T())return By.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Pt())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Rt()},By.prototype.gt=function(){return this.color},By.prototype.Rt=function(){var t=this;return t.right.gt()&&!t.left.gt()&&(t=t.bt()),t.left.gt()&&t.left.left.gt()&&(t=t.yt()),t.left.gt()&&t.right.gt()&&(t=t.St()),t},By.prototype.Vt=function(){var t=this.St();return t.right.left.gt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.yt())).bt()).St()),t},By.prototype.vt=function(){var t=this.St();return t.left.left.gt()&&(t=(t=t.yt()).St()),t},By.prototype.bt=function(){var t=this.copy(null,null,By.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},By.prototype.yt=function(){var t=this.copy(null,null,By.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},By.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},By.prototype.Dt=function(){var t=this.Ct();return Math.pow(2,t)<=this.size+1},By.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw zv();if(this.right.gt())throw zv();var t=this.left.Ct();if(t!==this.right.Ct())throw zv();return t+(this.gt()?0:1)},By);function By(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:By.RED,this.left=null!=r?r:By.EMPTY,this.right=null!=i?i:By.EMPTY,this.size=this.left.size+1+this.right.size}function Wy(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.T();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}function Ky(t,e){this.V=t,this.root=e||qy.EMPTY}function Hy(){this.size=0}qy.EMPTY=null,qy.RED=!0,qy.ot=!1,qy.EMPTY=(Object.defineProperty(Hy.prototype,"key",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Object.defineProperty(Hy.prototype,"value",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Object.defineProperty(Hy.prototype,"color",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Object.defineProperty(Hy.prototype,"left",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Object.defineProperty(Hy.prototype,"right",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Hy.prototype.copy=function(t,e,n,r,i){return this},Hy.prototype.rt=function(t,e,n){return new qy(t,e)},Hy.prototype.remove=function(t,e){return this},Hy.prototype.T=function(){return!0},Hy.prototype.ut=function(t){return!1},Hy.prototype.ht=function(t){return!1},Hy.prototype.at=function(){return null},Hy.prototype.ct=function(){return null},Hy.prototype.gt=function(){return!1},Hy.prototype.Dt=function(){return!0},Hy.prototype.Ct=function(){return 0},new Hy);var Gy=(Xy.prototype.has=function(t){return null!==this.data.get(t)},Xy.prototype.first=function(){return this.data.at()},Xy.prototype.last=function(){return this.data.ct()},Object.defineProperty(Xy.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Xy.prototype.indexOf=function(t){return this.data.indexOf(t)},Xy.prototype.forEach=function(n){this.data.ut(function(t,e){return n(t),!1})},Xy.prototype.Nt=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(0<=this.V(r.key,t[1]))return;e(r.key)}},Xy.prototype.xt=function(t,e){for(var n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},Xy.prototype.Ft=function(t){t=this.data._t(t);return t.It()?t.Et().key:null},Xy.prototype.lt=function(){return new zy(this.data.lt())},Xy.prototype._t=function(t){return new zy(this.data._t(t))},Xy.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},Xy.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Xy.prototype.T=function(){return this.data.T()},Xy.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Xy.prototype.isEqual=function(t){if(!(t instanceof Xy))return!1;if(this.size!==t.size)return!1;for(var e=this.data.lt(),n=t.data.lt();e.It();){var r=e.Et().key,i=n.Et().key;if(0!==this.V(r,i))return!1}return!0},Xy.prototype.O=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Xy.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Xy.prototype.copy=function(t){var e=new Xy(this.V);return e.data=t,e},Xy),zy=(Yy.prototype.Et=function(){return this.Mt.Et().key},Yy.prototype.It=function(){return this.Mt.It()},Yy),Qy=new jy(dy.V);function Yy(t){this.Mt=t}function Xy(t){this.V=t,this.data=new jy(this.V)}var Jy=new jy(dy.V);var $y=new jy(dy.V),Zy=new Gy(dy.V);function tg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Zy,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var eg=new Gy(Jv);var ng=(mg.Lt=function(t){return new mg(t.V)},mg.prototype.has=function(t){return null!=this.kt.get(t)},mg.prototype.get=function(t){return this.kt.get(t)},mg.prototype.first=function(){return this.$t.at()},mg.prototype.last=function(){return this.$t.ct()},mg.prototype.T=function(){return this.$t.T()},mg.prototype.indexOf=function(t){t=this.kt.get(t);return t?this.$t.indexOf(t):-1},Object.defineProperty(mg.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),mg.prototype.forEach=function(n){this.$t.ut(function(t,e){return n(t),!1})},mg.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.rt(t.key,t),e.$t.rt(t,null))},mg.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},mg.prototype.isEqual=function(t){if(!(t instanceof mg))return!1;if(this.size!==t.size)return!1;for(var e=this.$t.lt(),n=t.$t.lt();e.It();){var r=e.Et().key,i=n.Et().key;if(!r.isEqual(i))return!1}return!0},mg.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},mg.prototype.copy=function(t,e){var n=new mg;return n.V=this.V,n.kt=t,n.$t=e,n},mg),rg=(gg.prototype.track=function(t){var e=t.doc.key,n=this.Bt.get(e);!n||0!==t.type&&3===n.type?this.Bt=this.Bt.rt(e,t):3===t.type&&1!==n.type?this.Bt=this.Bt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Bt=this.Bt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Bt=this.Bt.remove(e):1===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):zv()},gg.prototype.qt=function(){var n=[];return this.Bt.ut(function(t,e){n.push(e)}),n},gg),ig=(yg.jt=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new yg(t,e,ng.Lt(e),i,n,r,!0,!1)},Object.defineProperty(yg.prototype,"hasPendingWrites",{get:function(){return!this.Qt.T()},enumerable:!1,configurable:!0}),yg.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Kt===t.Kt&&this.Qt.isEqual(t.Qt)&&P_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ut.isEqual(t.Ut)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},yg),og=(vg.Yt=function(t,e){var n=new Map;return n.set(t,sg.Xt(t,e)),new vg(hy.min(),n,eg,Qy,tg())},vg),sg=(dg.Xt=function(t,e){return new dg(Py.Z,e,tg(),tg(),tg())},dg),ag=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},ug=function(t,e){this.targetId=t,this.re=e},cg=function(t,e,n,r){void 0===n&&(n=Py.Z),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},hg=(Object.defineProperty(pg.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(pg.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(pg.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(pg.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),pg.prototype.fe=function(t){0<t.X()&&(this.he=!0,this.ce=t)},pg.prototype.de=function(){var n=tg(),r=tg(),i=tg();return this.ae.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:zv()}}),new sg(this.ce,this.ue,n,r,i)},pg.prototype.we=function(){this.he=!1,this.ae=bg()},pg.prototype.Te=function(t,e){this.he=!0,this.ae=this.ae.rt(t,e)},pg.prototype.Ee=function(t){this.he=!0,this.ae=this.ae.remove(t)},pg.prototype.Ie=function(){this.oe+=1},pg.prototype.me=function(){--this.oe},pg.prototype.Ae=function(){this.he=!0,this.ue=!0},pg),lg=(fg.prototype.pe=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof f_?this.ve(r,t.ie):t.ie instanceof p_&&this.be(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.be(s,t.key,t.ie)}},fg.prototype.Se=function(n){var r=this;this.De(n,function(t){var e=r.Ce(t);switch(n.state){case 0:r.Ne(t)&&e.fe(n.resumeToken);break;case 1:e.me(),e.le||e.we(),e.fe(n.resumeToken);break;case 2:e.me(),e.le||r.removeTarget(t);break;case 3:r.Ne(t)&&(e.Ae(),e.fe(n.resumeToken));break;case 4:r.Ne(t)&&(r.xe(t),e.fe(n.resumeToken));break;default:zv()}})},fg.prototype.De=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Pe.forEach(function(t,e){r.Ne(e)&&n(e)})},fg.prototype.Fe=function(t){var e=t.targetId,n=t.re.count,t=this.Oe(e);t&&(Oy(t=t.target)?0===n?(t=new dy(t.path),this.be(e,t,new p_(t,hy.min()))):Qv(1===n):this.Me(e)!==n&&(this.xe(e),this.ye=this.ye.add(e)))},fg.prototype.ke=function(r){var i=this,o=new Map;this.Pe.forEach(function(t,e){var n=i.Oe(e);n&&(t.Zt&&Oy(n.target)&&(n=new dy(n.target.path),null!==i.ge.get(n)||i.$e(e,n)||i.be(e,n,new p_(n,r))),t._e&&(o.set(e,t.de()),t.we()))});var s=tg();this.Ve.forEach(function(t,e){var n=!0;e.xt(function(t){t=i.Oe(t);return!t||2===t.tt||(n=!1)}),n&&(s=s.add(t))});var t=new og(r,o,this.ye,this.ge,s);return this.ge=Qy,this.Ve=_g(),this.ye=new Gy(Jv),t},fg.prototype.ve=function(t,e){var n;this.Ne(t)&&(n=this.$e(t,e.key)?2:0,this.Ce(t).Te(e.key,n),this.ge=this.ge.rt(e.key,e),this.Ve=this.Ve.rt(e.key,this.Le(e.key).add(t)))},fg.prototype.be=function(t,e,n){var r;this.Ne(t)&&(r=this.Ce(t),this.$e(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.rt(e,this.Le(e).delete(t)),n&&(this.ge=this.ge.rt(e,n)))},fg.prototype.removeTarget=function(t){this.Pe.delete(t)},fg.prototype.Me=function(t){var e=this.Ce(t).de();return this.Re.Be(t).size+e.te.size-e.ne.size},fg.prototype.Ie=function(t){this.Ce(t).Ie()},fg.prototype.Ce=function(t){var e=this.Pe.get(t);return e||(e=new hg,this.Pe.set(t,e)),e},fg.prototype.Le=function(t){var e=this.Ve.get(t);return e||(e=new Gy(Jv),this.Ve=this.Ve.rt(t,e)),e},fg.prototype.Ne=function(t){var e=null!==this.Oe(t);return e||Wv("WatchChangeAggregator","Detected inactive target",t),e},fg.prototype.Oe=function(t){var e=this.Pe.get(t);return e&&e.le?null:this.Re.qe(t)},fg.prototype.xe=function(e){var n=this;this.Pe.set(e,new hg),this.Re.Be(e).forEach(function(t){n.be(e,t,null)})},fg.prototype.$e=function(t,e){return this.Re.Be(t).has(e)},fg);function fg(t){this.Re=t,this.Pe=new Map,this.ge=Qy,this.Ve=_g(),this.ye=new Gy(Jv)}function pg(){this.oe=0,this.ae=bg(),this.ce=Py.Z,this.ue=!1,this.he=!0}function dg(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}function vg(t,e,n,r,i){this.et=t,this.Gt=e,this.zt=n,this.Ht=r,this.Jt=i}function yg(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Kt=s,this.Wt=a}function gg(){this.Bt=new jy(dy.V)}function mg(n){this.V=n?function(t,e){return n(t,e)||dy.V(t.key,e.key)}:function(t,e){return dy.V(t.key,e.key)},this.kt=Jy,this.$t=new jy(this.V)}function _g(){return new jy(dy.V)}function bg(){return new jy(dy.V)}function wg(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Eg(t){t=Og(t.mapValue.fields.__local_write_time__.timestampValue);return new cy(t.seconds,t.nanos)}var Ig=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wg(t)?4:10:zv()}function Sg(r,i){var t,e=Tg(r);if(e!==Tg(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Eg(r).isEqual(Eg(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Og(r.timestampValue),t=Og(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,Rg(r.bytesValue).isEqual(Rg(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,Pg((t=r).geoPointValue.latitude)===Pg(e.geoPointValue.latitude)&&Pg(t.geoPointValue.longitude)===Pg(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Pg(t.integerValue)===Pg(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=Pg(t.doubleValue),e=Pg(e.doubleValue);return t===e?Ty(t)===Ty(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return $v(r.arrayValue.values||[],i.arrayValue.values||[],Sg);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(ty(e)!==ty(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Sg(e[t],n[t])))return!1;return!0}();default:return zv()}}function Cg(t,e){return void 0!==(t.values||[]).find(function(t){return Sg(t,e)})}function Ng(t,e){var n,r,i=Tg(t),o=Tg(e);if(i!==o)return Jv(i,o);switch(i){case 0:return 0;case 1:return Jv(t.booleanValue,e.booleanValue);case 2:return n=e,r=Pg(t.integerValue||t.doubleValue),n=Pg(n.integerValue||n.doubleValue),r<n?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return Ag(t.timestampValue,e.timestampValue);case 4:return Ag(Eg(t),Eg(e));case 5:return Jv(t.stringValue,e.stringValue);case 6:return function(t,e){t=Rg(t),e=Rg(e);return t.A(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Jv(n[i],r[i]);if(0!==o)return o}return Jv(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return i=t.geoPointValue,r=e.geoPointValue,0!==(n=Jv(Pg(i.latitude),Pg(r.latitude)))?n:Jv(Pg(i.longitude),Pg(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ng(n[i],r[i]);if(o)return o}return Jv(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Jv(r[s],o[s]);if(0!==a)return a;a=Ng(n[r[s]],i[o[s]]);if(0!==a)return a}return Jv(r.length,o.length)}(t.mapValue,e.mapValue);default:throw zv()}}function Ag(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Jv(t,e);var n=Og(t),t=Og(e),e=Jv(n.seconds,t.seconds);return 0!==e?e:Jv(n.nanos,t.nanos)}function kg(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=Og(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Rg(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,dy.W(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):zv();var e}(t)}function Og(t){if(Qv(!!t),"string"!=typeof t)return{seconds:Pg(t.seconds),nanos:Pg(t.nanos)};var e=0,n=Ig.exec(t);Qv(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Pg(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Rg(t){return"string"==typeof t?Py.fromBase64String(t):Py.fromUint8Array(t)}function Dg(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.M()}}function xg(t){return t&&"integerValue"in t}function Lg(t){return!!t&&"arrayValue"in t}function Mg(t){return t&&"nullValue"in t}function Fg(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ug(t){return t&&"mapValue"in t}var jg={asc:"ASCENDING",desc:"DESCENDING"},Vg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qg=function(t,e){this.t=t,this.Ue=e};function Bg(t){return{integerValue:""+t}}function Wg(t,e){if(t.Ue){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ty(e)?"-0":e}}function Kg(t,e){return Sy(e)?Bg(e):Wg(t,e)}function Hg(t,e){return t.Ue?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gg(t,e){return t.Ue?e.toBase64():e.toUint8Array()}function zg(t){return Qv(!!t),hy.m((t=Og(t),new cy(t.seconds,t.nanos)))}function Qg(t,e){return new ly(["projects",t.projectId,"databases",t.database]).child("documents").child(e).M()}function Yg(t){t=ly.k(t);return Qv(pm(t)),t}function Xg(t,e){return Qg(t.t,e.path)}function Jg(t,e){e=Yg(e);if(e.get(1)!==t.t.projectId)throw new uy(ay.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.t.projectId);if(e.get(3)!==t.t.database)throw new uy(ay.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.t.database);return new dy(em(e))}function $g(t,e){return Qg(t.t,e)}function Zg(t){t=Yg(t);return 4===t.length?ly.$():em(t)}function tm(t){return new ly(["projects",t.t.projectId,"databases",t.t.database]).M()}function em(t){return Qv(4<t.length&&"documents"===t.get(4)),t.v(5)}function nm(t,e,n){return{name:Xg(t,e),fields:n.proto.mapValue.fields}}function rm(t,e){var n,r,i;if(e instanceof Km)n={update:nm(t,e.key,e.value)};else if(e instanceof e_)n={delete:Xg(t,e.key)};else if(e instanceof Hm)n={update:nm(t,e.key,e.data),updateMask:(i=e.Qe,r=[],i.fields.forEach(function(t){return r.push(t.M())}),{fieldPaths:r})};else if(e instanceof Xm)n={transform:{document:Xg(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof gm)return{fieldPath:t.field.M(),setToServerValue:"REQUEST_TIME"};if(e instanceof mm)return{fieldPath:t.field.M(),appendMissingElements:{values:e.elements}};if(e instanceof Im)return{fieldPath:t.field.M(),removeAllFromArray:{values:e.elements}};if(e instanceof Nm)return{fieldPath:t.field.M(),increment:e.Ke};throw zv()})}};else{if(!(e instanceof n_))return zv();n={verify:Xg(t,e.key)}}return e.je.We||(n.currentDocument=void 0!==(i=e.je).updateTime?{updateTime:(e=t,t=i.updateTime,Hg(e,t.P()))}:void 0!==i.exists?{exists:i.exists}:zv()),n}function im(e,t){var n=t.currentDocument?void 0!==(o=t.currentDocument).updateTime?Lm.updateTime(zg(o.updateTime)):void 0!==o.exists?Lm.exists(o.exists):Lm.Ge():Lm.Ge();if(t.update){t.update.name;var r=Jg(e,t.update.name),i=new r_({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=(o=t.updateMask.fieldPaths||[],new Pm(o.map(function(t){return py.U(t)})));return new Hm(r,i,o,n)}return new Km(r,i,n)}if(t.delete){var s=Jg(e,t.delete);return new e_(s,n)}if(t.transform){i=Jg(e,t.transform.document),s=t.transform.fieldTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(Qv("REQUEST_TIME"===e.setToServerValue),r=new gm):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new mm(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new Im(n)):"increment"in e?r=new Nm(t,e.increment):zv();e=py.U(e.fieldPath);return new Rm(e,r)}(e,t)});return Qv(!0===n.exists),new Xm(i,s)}if(t.verify){t=Jg(e,t.verify);return new n_(t,n)}return zv()}function om(t,e){return{documents:[$g(t,e.path)]}}function sm(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=$g(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$g(t,r.S()),n.structuredQuery.from=[{collectionId:r.C()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(Fg(t.value))return{unaryFilter:{field:hm(t.field),op:"IS_NAN"}};if(Mg(t.value))return{unaryFilter:{field:hm(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Fg(t.value))return{unaryFilter:{field:hm(t.field),op:"IS_NOT_NAN"}};if(Mg(t.value))return{unaryFilter:{field:hm(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hm(t.field),op:(e=t.op,Vg[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:hm((t=t).field),direction:(t=t.dir,jg[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.Ue||Iy(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=um(e.startAt)),e.endAt&&(n.structuredQuery.endAt=um(e.endAt)),n}function am(t){var e=Zg(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Qv(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[fm(t)]:void 0!==t.fieldFilter?[(n=t,F_.create(lm(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return zv()}}(),n.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):zv():[];var n}(n.where));t=[];n.orderBy&&(t=n.orderBy.map(function(t){return new lb(lm((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));r=null;n.limit&&(r=Iy(a="object"==typeof(a=n.limit)?a.value:a)?null:a);var s=null;n.startAt&&(s=cm(n.startAt));var a=null;return n.endAt&&(a=cm(n.endAt)),__(e,i,t,o,r,"F",s,a)}function um(t){return{before:t.before,values:t.position}}function cm(t){var e=!!t.before,t=t.values||[];return new rb(t,e)}function hm(t){return{fieldPath:t.M()}}function lm(t){return py.U(t.fieldPath)}function fm(t){switch(t.unaryFilter.op){case"IS_NAN":var e=lm(t.unaryFilter.field);return F_.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=lm(t.unaryFilter.field);return F_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":n=lm(t.unaryFilter.field);return F_.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":t=lm(t.unaryFilter.field);return F_.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return zv()}}function pm(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}Dr=function(){this.ze=void 0};function dm(t,e){return t instanceof Nm?xg(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var vm,ym,gm=(go(bm,ym=Dr),bm),mm=(go(_m,vm=Dr),_m);function _m(t){var e=this;return(e=vm.call(this)||this).elements=t,e}function bm(){return null!==ym&&ym.apply(this,arguments)||this}function wm(t,e){for(var n=Om(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Sg(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Em,Im=(go(Tm,Em=Dr),Tm);function Tm(t){var e=this;return(e=Em.call(this)||this).elements=t,e}function Sm(t,e){for(var n=Om(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Sg(t,e)})}(i[r]);return{arrayValue:{values:n}}}var Cm,Nm=(go(Am,Cm=Dr),Am);function Am(t,e){var n=this;return(n=Cm.call(this)||this).serializer=t,n.Ke=e,n}function km(t){return Pg(t.integerValue||t.doubleValue)}function Om(t){return Lg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Pm=(Dm.prototype.He=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].N(t))return!0;return!1},Dm.prototype.isEqual=function(t){return $v(this.fields,t.fields,function(t,e){return t.isEqual(e)})},Dm),Rm=function(t,e){this.field=t,this.transform=e};function Dm(t){(this.fields=t).sort(py.V)}function xm(t,e){this.version=t,this.transformResults=e}var Lm=(Mm.Ge=function(){return new Mm},Mm.exists=function(t){return new Mm(void 0,t)},Mm.updateTime=function(t){return new Mm(t)},Object.defineProperty(Mm.prototype,"We",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Mm.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Mm);function Mm(t,e){this.updateTime=t,this.exists=e}function Fm(t,e){return void 0!==t.updateTime?e instanceof f_&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof f_}M=function(){};function Um(t,e,n){return t instanceof Km?new f_(t.key,n.version,t.value,{hasCommittedMutations:!0}):t instanceof Hm?function(t,e,n){if(!Fm(t.je,e))return new d_(t.key,n.version);e=Qm(t,e);return new f_(t.key,n.version,e,{hasCommittedMutations:!0})}(t,e,n):t instanceof Xm?function(t,e,n){if(Qv(null!=n.transformResults),!Fm(t.je,e))return new d_(t.key,n.version);var r=e,e=function(t,e,n){var r=[];Qv(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof f_&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof mm?wm(o,s):o instanceof Im?Sm(o,s):a))}return r}(t.fieldTransforms,e,n.transformResults),n=n.version,e=$m(t,r.data(),e);return new f_(t.key,n,e,{hasCommittedMutations:!0})}(t,e,n):new p_(t.key,n.version,{hasCommittedMutations:!0})}function jm(t,e,n,r){return t instanceof Km?function(t,e){if(!Fm(t.je,e))return e;e=qm(e);return new f_(t.key,e,t.value,{Je:!0})}(t,e):t instanceof Hm?function(t,e){if(!Fm(t.je,e))return e;var n=qm(e),e=Qm(t,e);return new f_(t.key,n,e,{Je:!0})}(t,e):t instanceof Xm?function(t,e,n,r){if(!Fm(t.je,e))return e;var i=e,r=function(t,e,n,r){for(var i,o=[],s=0,a=t;s<a.length;s++){var u=a[s],c=u.transform,h=null;n instanceof f_&&(h=n.field(u.field)),null===h&&r instanceof f_&&(h=r.field(u.field)),o.push((i=h,u=e,h=void 0,(c=c)instanceof gm?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}},i&&(h.fields.__previous_value__=i),{mapValue:h}):c instanceof mm?wm(c,i):c instanceof Im?Sm(c,i):(c=dm(h=c,i),i=km(c)+km(h.Ke),xg(c)&&xg(h.Ke)?Bg(i):Wg(h.serializer,i))))}return o}(t.fieldTransforms,n,e,r),r=$m(t,i.data(),r);return new f_(t.key,i.version,r,{Je:!0})}(t,e,r,n):(e=e,Fm((t=t).je,e)?new p_(t.key,hy.min()):e)}function Vm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.je.isEqual(e.je)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||$v(t.fieldTransforms,t.fieldTransforms,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof mm&&e instanceof mm||t instanceof Im&&e instanceof Im?$v(t.elements,e.elements,Sg):t instanceof Nm&&e instanceof Nm?Sg(t.Ke,e.Ke):t instanceof gm&&e instanceof gm)}))}function qm(t){return t instanceof f_?t.version:hy.min()}var Bm,Wm,Km=(go(zm,Wm=M),zm),Hm=(go(Gm,Bm=M),Gm);function Gm(t,e,n,r){var i=this;return(i=Bm.call(this)||this).key=t,i.data=e,i.Qe=n,i.je=r,i.type=1,i}function zm(t,e,n){var r=this;return(r=Wm.call(this)||this).key=t,r.value=e,r.je=n,r.type=0,r}function Qm(t,e){return n=t,e=e instanceof f_?e.data():r_.empty(),r=new i_(e),n.Qe.fields.forEach(function(t){var e;t.T()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.Ye();var n,r}var Ym,Xm=(go(Jm,Ym=M),Jm);function Jm(t,e){var n=this;return(n=Ym.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.je=Lm.exists(!0),n}function $m(t,e,n){for(var r=new i_(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Ye()}var Zm,t_,e_=(go(u_,t_=M),u_),n_=(go(a_,Zm=M),a_),r_=(s_.empty=function(){return new s_({mapValue:{}})},s_.prototype.field=function(t){if(t.T())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ug(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.C()])||null},s_.prototype.isEqual=function(t){return Sg(this.proto,t.proto)},s_),i_=(o_.prototype.set=function(t,e){return this.tn(t,e),this},o_.prototype.delete=function(t){return this.tn(t,null),this},o_.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Tg(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.C(),e)},o_.prototype.Ye=function(){var t=this.en(py.$(),this.Ze);return null!=t?new r_(t):this.Xe},o_.prototype.en=function(r,t){var i=this,o=!1,e=this.Xe.field(r),s=Ug(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.en(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},o_);function o_(t){void 0===t&&(t=r_.empty()),this.Xe=t,this.Ze=new Map}function s_(t){this.proto=t}function a_(t,e){var n=this;return(n=Zm.call(this)||this).key=t,n.je=e,n.type=4,n}function u_(t,e){var n=this;return(n=t_.call(this)||this).key=t,n.je=e,n.type=3,n}var c_,h_,l_,G=function(t,e){this.key=t,this.version=e},f_=(go(m_,l_=G),m_.prototype.field=function(t){return this.nn.field(t)},m_.prototype.data=function(){return this.nn},m_.prototype.sn=function(){return this.nn.proto},m_.prototype.isEqual=function(t){return t instanceof m_&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},m_.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(m_.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),m_),p_=(go(g_,h_=G),g_.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(g_.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),g_.prototype.isEqual=function(t){return t instanceof g_&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},g_),d_=(go(y_,c_=G),y_.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(y_.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),y_.prototype.isEqual=function(t){return t instanceof y_&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},y_),v_=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.on=null,this.an=null,this.startAt,this.endAt};function y_(){return null!==c_&&c_.apply(this,arguments)||this}function g_(t,e,n){var r=this;return(r=h_.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function m_(t,e,n,r){var i=this;return(i=l_.call(this,t,e)||this).nn=n,i.Je=!!r.Je,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function __(t,e,n,r,i,o,s,a){return new v_(t,e,n,r,i,o,s,a)}function b_(t){return new v_(t)}function w_(t){return!Iy(t.limit)&&"F"===t.limitType}function E_(t){return!Iy(t.limit)&&"L"===t.limitType}function I_(t){return 0<t.rn.length?t.rn[0].field:null}function T_(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.cn())return r.field}return null}function S_(t){return null!==t.collectionGroup}function C_(t){var e=t;if(null===e.on){e.on=[];var n=T_(e),t=I_(e);if(null!==n&&null===t)n.B()||e.on.push(new lb(n)),e.on.push(new lb(py.q(),"asc"));else{for(var r=!1,i=0,o=e.rn;i<o.length;i++){var s=o[i];e.on.push(s),s.field.B()&&(r=!0)}r||(n=0<e.rn.length?e.rn[e.rn.length-1].dir:"asc",e.on.push(new lb(py.q(),n)))}}return e.on}function N_(t){var e=t;if(!e.an)if("F"===e.limitType)e.an=Ny(e.path,e.collectionGroup,C_(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=C_(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new lb(o.field,s))}var a=e.endAt?new rb(e.endAt.position,!e.endAt.before):null,t=e.startAt?new rb(e.startAt.position,!e.startAt.before):null;e.an=Ny(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.an}function A_(t,e,n){return new v_(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function k_(t,e){return new v_(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function O_(t,e){return new v_(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function P_(t,e){return ky(N_(t),N_(e))&&t.limitType===e.limitType}function R_(t){return Ay(N_(t))+"|lt:"+t.limitType}function D_(t){return"Query(target="+(e=N_(t),n=e.path.M(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.M()+" "+t.op+" "+kg(t.value)}).join(", ")+"]"),Iy(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.M()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+ub(e.startAt)),e.endAt&&(n+=", endAt: "+ub(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function x_(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.j(e.collectionGroup)&&e.path.N(n):dy.G(e.path)?e.path.isEqual(n):e.path.F(n))&&function(t){for(var e=0,n=i.rn;e<n.length;e++){var r=n[e];if(!r.field.B()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||cb(t.startAt,C_(t),n))&&(!t.endAt||!cb(t.endAt,C_(t),n)));var e,n}function L_(a){return function(t,e){for(var n=!1,r=0,i=C_(a);r<i.length;r++){var o=i[r],s=function(t,r,e){e=t.field.B()?dy.V(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?Ng(n,t):zv()}(t.field,e);switch(t.dir){case"asc":return e;case"desc":return-1*e;default:return zv()}}(o,t,e);if(0!==s)return s;n=n||o.field.B()}return 0}}var M_,F_=(go(U_,M_=function(){}),U_.create=function(t,e,n){return t.B()?"in"===e||"not-in"===e?this.un(t,e,n):new B_(t,e,n):"array-contains"===e?new Z_(t,n):"in"===e?new tb(t,n):"not-in"===e?new eb(t,n):"array-contains-any"===e?new nb(t,n):new U_(t,e,n)},U_.un=function(t,e,n){return new("in"===e?W_:K_)(t,n)},U_.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this.hn(Ng(t,this.value)):null!==t&&Tg(this.value)===Tg(t)&&this.hn(Ng(t,this.value))},U_.prototype.hn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return zv()}},U_.prototype.cn=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},U_);function U_(t,e,n){var r=this;return(r=M_.call(this)||this).field=t,r.op=e,r.value=n,r}var j_,V_,q_,B_=(go(z_,q_=F_),z_.prototype.matches=function(t){t=dy.V(t.key,this.key);return this.hn(t)},z_),W_=(go(G_,V_=F_),G_.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},G_),K_=(go(H_,j_=F_),H_.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},H_);function H_(t,e){var n=this;return(n=j_.call(this,t,"not-in",e)||this).keys=Q_(0,e),n}function G_(t,e){var n=this;return(n=V_.call(this,t,"in",e)||this).keys=Q_(0,e),n}function z_(t,e,n){var r=this;return(r=q_.call(this,t,e,n)||this).key=dy.W(n.referenceValue),r}function Q_(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return dy.W(t.referenceValue)})}var Y_,X_,J_,$_,Z_=(go(ab,$_=F_),ab.prototype.matches=function(t){t=t.field(this.field);return Lg(t)&&Cg(t.arrayValue,this.value)},ab),tb=(go(sb,J_=F_),sb.prototype.matches=function(t){t=t.field(this.field);return null!==t&&Cg(this.value.arrayValue,t)},sb),eb=(go(ob,X_=F_),ob.prototype.matches=function(t){if(Cg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!Cg(this.value.arrayValue,t)},ob),nb=(go(ib,Y_=F_),ib.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!Lg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Cg(e.value.arrayValue,t)})},ib),rb=function(t,e){this.position=t,this.before=e};function ib(t,e){return Y_.call(this,t,"array-contains-any",e)||this}function ob(t,e){return X_.call(this,t,"not-in",e)||this}function sb(t,e){return J_.call(this,t,"in",e)||this}function ab(t,e){return $_.call(this,t,"array-contains",e)||this}function ub(t){return(t.before?"b":"a")+":"+t.position.map(kg).join(",")}function cb(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.B()?dy.V(dy.W(s.referenceValue),n.key):Ng(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function hb(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Sg(t.position[n],e.position[n]))return!1;return!0}var lb=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};var fb,pb=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},db=(Ib.prototype.reset=function(){this.Tn=0},Ib.prototype.mn=function(){this.Tn=this.wn},Ib.prototype.An=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.Rn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);0<i&&Wv("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this.ln.Pn(this._n,i,function(){return e.In=Date.now(),t()}),this.Tn*=this.dn,this.Tn<this.fn&&(this.Tn=this.fn),this.Tn>this.wn&&(this.Tn=this.wn)},Ib.prototype.gn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},Ib.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},Ib.prototype.Rn=function(){return(Math.random()-.5)*this.Tn},Ib),vb=(Eb.prototype.catch=function(t){return this.next(void 0,t)},Eb.prototype.next=function(r,i){var o=this;return this.bn&&zv(),this.bn=!0,this.vn?this.error?this.Sn(i,this.error):this.Dn(r,this.result):new Eb(function(e,n){o.yn=function(t){o.Dn(r,t).next(e,n)},o.pn=function(t){o.Sn(i,t).next(e,n)}})},Eb.prototype.Cn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},Eb.prototype.Nn=function(t){try{var e=t();return e instanceof Eb?e:Eb.resolve(e)}catch(t){return Eb.reject(t)}},Eb.prototype.Dn=function(t,e){return t?this.Nn(function(){return t(e)}):Eb.resolve(e)},Eb.prototype.Sn=function(t,e){return t?this.Nn(function(){return t(e)}):Eb.reject(e)},Eb.resolve=function(n){return new Eb(function(t,e){t(n)})},Eb.reject=function(n){return new Eb(function(t,e){e(n)})},Eb.xn=function(t){return new Eb(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},Eb.Fn=function(t){for(var n=Eb.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?Eb.resolve(t):e()})}(r[e]);return n},Eb.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.xn(i)},Eb),yb=(wb.delete=function(t){return Wv("SimpleDb","Removing database:",t),kb(window.indexedDB.deleteDatabase(t)).Cn()},wb.kn=function(){if("undefined"==typeof indexedDB)return!1;if(wb.$n())return!0;var t=Lo(),e=wb.Mn(t),n=0<e&&e<10,e=wb.Ln(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},wb.$n=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Bn)},wb.qn=function(t,e){return t.store(e)},wb.Mn=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},wb.Ln=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},wb.prototype.Un=function(o){return _o(this,void 0,void 0,function(){var e,i=this;return bo(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Wv("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new mb(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new uy(ay.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new mb(o,t))},r.onupgradeneeded=function(t){Wv("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.On.createOrUpgrade(e,r.transaction,t.oldVersion,i.version).next(function(){Wv("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Qn&&(this.db.onversionchange=function(t){return i.Qn(t)}),this.db)]}})})},wb.prototype.Kn=function(e){this.Qn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},wb.prototype.runTransaction=function(a,n,u,c){return _o(this,void 0,void 0,function(){var i,o,s,e;return bo(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Un(a)];case 2:return s.db=t.sent(),e=Sb.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),vb.reject(t)}).Cn(),r={},n.catch(function(){}),[4,e.Wn];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Wv("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},wb.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},wb),gb=(Object.defineProperty(bb.prototype,"vn",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),Object.defineProperty(bb.prototype,"Hn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(bb.prototype,"cursor",{set:function(t){this.jn=t},enumerable:!1,configurable:!0}),bb.prototype.done=function(){this.Gn=!0},bb.prototype.Jn=function(t){this.zn=t},bb.prototype.delete=function(){return kb(this.jn.delete())},bb),mb=(go(_b,fb=uy),_b);function _b(t,e){var n=this;return(n=fb.call(this,ay.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function bb(t){this.jn=t,this.Gn=!1,this.zn=null}function wb(t,e,n){this.name=t,this.version=e,this.On=n,12.2===wb.Mn(Lo())&&Kv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function Eb(t){var e=this;this.yn=null,this.pn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.bn=!1,t(function(t){e.vn=!0,e.result=t,e.yn&&e.yn(t)},function(t){e.vn=!0,e.error=t,e.pn&&e.pn(t)})}function Ib(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ln=t,this._n=e,this.fn=n,this.dn=r,this.wn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}function Tb(t){return"IndexedDbTransactionError"===t.name}var Sb=(Ab.open=function(t,e,n,r){try{return new Ab(e,t.transaction(r,n))}catch(t){throw new mb(e,t)}},Object.defineProperty(Ab.prototype,"Wn",{get:function(){return this.Yn.promise},enumerable:!1,configurable:!0}),Ab.prototype.abort=function(t){t&&this.Yn.reject(t),this.aborted||(Wv("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Ab.prototype.store=function(t){t=this.transaction.objectStore(t);return new Cb(t)},Ab),Cb=(Nb.prototype.put=function(t,e){t=void 0!==e?(Wv("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Wv("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return kb(t)},Nb.prototype.add=function(t){return Wv("SimpleDb","ADD",this.store.name,t,t),kb(this.store.add(t))},Nb.prototype.get=function(e){var n=this;return kb(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Wv("SimpleDb","GET",n.store.name,e,t),t})},Nb.prototype.delete=function(t){return Wv("SimpleDb","DELETE",this.store.name,t),kb(this.store.delete(t))},Nb.prototype.count=function(){return Wv("SimpleDb","COUNT",this.store.name),kb(this.store.count())},Nb.prototype.Xn=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.Zn(e,function(t,e){n.push(e)}).next(function(){return n})},Nb.prototype.ts=function(t,e){Wv("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.es=!1;e=this.cursor(e);return this.Zn(e,function(t,e,n){return n.delete()})},Nb.prototype.ns=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.Zn(n,e)},Nb.prototype.ss=function(r){var t=this.cursor({});return new vb(function(n,e){t.onerror=function(t){t=Pb(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},Nb.prototype.Zn=function(t,i){var o=[];return new vb(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new gb(n),(t=i(n.primaryKey,n.value,e))instanceof vb&&(t=t.catch(function(t){return e.done(),vb.reject(t)}),o.push(t)),e.vn?r():null===e.Hn?n.continue():n.continue(e.Hn)):r()}}).next(function(){return vb.xn(o)})},Nb.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},Nb.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.es?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},Nb);function Nb(t){this.store=t}function Ab(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.Yn=new pb,this.transaction.oncomplete=function(){n.Yn.resolve()},this.transaction.onabort=function(){t.error?n.Yn.reject(new mb(e,t.error)):n.Yn.resolve()},this.transaction.onerror=function(t){t=Pb(t.target.error);n.Yn.reject(new mb(e,t))}}function kb(t){return new vb(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=Pb(t.target.error);n(t)}})}var Ob=!1;function Pb(t){var e=yb.Mn(Lo());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new uy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ob||(Ob=!0,setTimeout(function(){throw n},0)),n}}return t}function Rb(){return"undefined"!=typeof window?window:null}function Db(){return"undefined"!=typeof document?document:null}var xb=(Fb.hs=function(t,e,n,r,i){i=new Fb(t,e,Date.now()+n,r,i);return i.start(n),i},Fb.prototype.start=function(t){var e=this;this.ls=setTimeout(function(){return e._s()},t)},Fb.prototype.Vn=function(){return this._s()},Fb.prototype.cancel=function(t){null!==this.ls&&(this.clearTimeout(),this.us.reject(new uy(ay.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Fb.prototype._s=function(){var e=this;this.rs.fs(function(){return null!==e.ls?(e.clearTimeout(),e.op().then(function(t){return e.us.resolve(t)})):Promise.resolve()})},Fb.prototype.clearTimeout=function(){null!==this.ls&&(this.cs(this),clearTimeout(this.ls),this.ls=null)},Fb),Lb=(Object.defineProperty(Mb.prototype,"Vs",{get:function(){return this.Ts},enumerable:!1,configurable:!0}),Mb.prototype.fs=function(t){this.enqueue(t)},Mb.prototype.ys=function(t){this.ps(),this.vs(t)},Mb.prototype.bs=function(){var t;this.Ts||(this.Ts=!0,(t=Db())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gs))},Mb.prototype.enqueue=function(t){return this.ps(),this.Ts?new Promise(function(t){}):this.vs(t)},Mb.prototype.Ss=function(t){var e=this;this.fs(function(){return e.ws.push(t),e.Ds()})},Mb.prototype.Ds=function(){return _o(this,void 0,void 0,function(){var e,n=this;return bo(this,function(t){switch(t.label){case 0:if(0===this.ws.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.ws[0]()];case 2:return t.sent(),this.ws.shift(),this.Ps.reset(),[3,4];case 3:if(!Tb(e=t.sent()))throw e;return Wv("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.ws.length&&this.Ps.An(function(){return n.Ds()}),t.label=5;case 5:return[2]}})})},Mb.prototype.vs=function(t){var r=this,e=this.ds.then(function(){return r.As=!0,t().catch(function(t){throw r.Is=t,r.As=!1,Kv("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.As=!1,t})});return this.ds=e},Mb.prototype.Pn=function(t,e,n){var r=this;this.ps(),-1<this.Rs.indexOf(t)&&(e=0);n=xb.hs(this,t,e,n,function(t){return r.Cs(t)});return this.Es.push(n),n},Mb.prototype.ps=function(){this.Is&&zv()},Mb.prototype.Ns=function(){},Mb.prototype.xs=function(){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,e=this.ds];case 1:t.sent(),t.label=2;case 2:if(e!==this.ds)return[3,0];t.label=3;case 3:return[2]}})})},Mb.prototype.Fs=function(t){for(var e=0,n=this.Es;e<n.length;e++)if(n[e]._n===t)return!0;return!1},Mb.prototype.Os=function(r){var i=this;return this.xs().then(function(){i.Es.sort(function(t,e){return t.os-e.os});for(var t=0,e=i.Es;t<e.length;t++){var n=e[t];if(n.Vn(),"all"!==r&&n._n===r)break}return i.xs()})},Mb.prototype.Ms=function(t){this.Rs.push(t)},Mb.prototype.Cs=function(t){t=this.Es.indexOf(t);this.Es.splice(t,1)},Mb);function Mb(){var e=this;this.ds=Promise.resolve(),this.ws=[],this.Ts=!1,this.Es=[],this.Is=null,this.As=!1,this.Rs=[],this.Ps=new db(this,"async_queue_retry"),this.gs=function(){var t=Db();t&&Wv("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Ps.gn()};var t=Db();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.gs)}function Fb(t,e,n,r,i){this.rs=t,this._n=e,this.os=n,this.op=r,this.cs=i,this.us=new pb,this.then=this.us.promise.then.bind(this.us.promise),this.us.promise.catch(function(t){})}function Ub(t,e){if(Kv("AsyncQueue",e+": "+t),Tb(t))return new uy(ay.UNAVAILABLE,e+": "+t);throw t}function jb(){this.queries=new sy(R_,P_),this.onlineState="Unknown",this.$s=new Set}var Vb=function(){this.ks=void 0,this.listeners=[]};function qb(s,a){return _o(this,void 0,void 0,function(){var e,n,r,i,o;return bo(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new Vb),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.Ls(n)];case 2:return o.ks=t.sent(),[3,4];case 3:return o=t.sent(),o=Ub(o,"Initialization of query '"+D_(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(a),a.Bs(e.onlineState),i.ks&&a.qs(i.ks)&&Wb(e),[2]}})})}function Bb(s,a){return _o(this,void 0,void 0,function(){var e,n,r,i,o;return bo(this,function(t){return e=s,n=a.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.Us(n))]:[2]})})}function Wb(t){t.$s.forEach(function(t){t.next()})}var Kb=(zb.prototype.qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ig(t.query,t.docs,t.Ut,e,t.Qt,t.fromCache,t.Kt,!0)}var o=!1;return this.Ks?this.js(t)&&(this.Qs.next(t),o=!0):this.Gs(t,this.onlineState)&&(this.zs(t),o=!0),this.Ws=t,o},zb.prototype.onError=function(t){this.Qs.error(t)},zb.prototype.Bs=function(t){this.onlineState=t;var e=!1;return this.Ws&&!this.Ks&&this.Gs(this.Ws,t)&&(this.zs(this.Ws),e=!0),e},zb.prototype.Gs=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Hs&&n||t.docs.T()&&"Offline"!==e)},zb.prototype.js=function(t){if(0<t.docChanges.length)return!0;var e=this.Ws&&this.Ws.hasPendingWrites!==t.hasPendingWrites;return!(!t.Kt&&!e)&&!0===this.options.includeMetadataChanges},zb.prototype.zs=function(t){t=ig.jt(t.query,t.docs,t.Qt,t.fromCache),this.Ks=!0,this.Qs.next(t)},zb),Hb=(Gb.prototype.Js=function(){return null!=this.uid},Gb.prototype.Ys=function(){return this.Js()?"uid:"+this.uid:"anonymous-user"},Gb.prototype.isEqual=function(t){return t.uid===this.uid},Gb);function Gb(t){this.uid=t}function zb(t,e,n){this.query=t,this.Qs=e,this.Ks=!1,this.Ws=null,this.onlineState="Unknown",this.options=n||{}}Hb.UNAUTHENTICATED=new Hb(null),Hb.Xs=new Hb("google-credentials-uid"),Hb.Zs=new Hb("first-party-uid");function Qb(t,e){this.user=e,this.type="OAuth",this.ti={},this.ti.Authorization="Bearer "+t}var Yb=(aw.prototype.getToken=function(){return Promise.resolve(null)},aw.prototype.ni=function(){},aw.prototype.si=function(t){(this.ei=t)(Hb.UNAUTHENTICATED)},aw.prototype.ii=function(){this.ei=null},aw),Xb=(sw.prototype.getToken=function(){var e=this,n=this.ai,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.ai!==n?(Wv("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Qv("string"==typeof t.accessToken),new Qb(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},sw.prototype.ni=function(){this.forceRefresh=!0},sw.prototype.si=function(t){this.ei=t,this.oi&&t(this.currentUser)},sw.prototype.ii=function(){this.auth&&this.auth.removeAuthTokenListener(this.ri),this.ri=null,this.ei=null},sw.prototype.ci=function(){var t=this.auth&&this.auth.getUid();return Qv(null===t||"string"==typeof t),new Hb(t)},sw),Jb=(Object.defineProperty(ow.prototype,"ti",{get:function(){var t={"X-Goog-AuthUser":this.hi},e=this.ui.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),ow),$b=(iw.prototype.getToken=function(){return Promise.resolve(new Jb(this.ui,this.hi))},iw.prototype.si=function(t){t(Hb.Zs)},iw.prototype.ii=function(){},iw.prototype.ni=function(){},iw),Zb=(rw.prototype._i=function(t,e,n){for(var r=n.fi,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Um(o,e,r[i]))}return e},rw.prototype.di=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=jm(i,e,e,this.li))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=jm(u,e,o,this.li))}return e},rw.prototype.wi=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.di(t.key,n.get(t.key));e&&(i=i.rt(t.key,e))}),i},rw.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},tg())},rw.prototype.isEqual=function(t){return this.batchId===t.batchId&&$v(this.mutations,t.mutations,Vm)&&$v(this.baseMutations,t.baseMutations,Vm)},rw),tw=(nw.from=function(t,e,n){Qv(t.mutations.length===n.length);for(var r=$y,i=t.mutations,o=0;o<i.length;o++)r=r.rt(i[o].key,n[o].version);return new nw(t,e,n,r)},nw),Dr=(ew.prototype.Ai=function(t){t=this.Ii.get(t);return t?t.readTime:hy.min()},ew.prototype.Ri=function(t,e){this.Pi(),this.Ii.set(t.key,{gi:t,readTime:e})},ew.prototype.Vi=function(t,e){void 0===e&&(e=null),this.Pi(),this.Ii.set(t,{gi:null,readTime:e})},ew.prototype.yi=function(t,e){this.Pi();var n=this.Ii.get(e);return void 0!==n?vb.resolve(n.gi):this.pi(t,e)},ew.prototype.getEntries=function(t,e){return this.vi(t,e)},ew.prototype.apply=function(t){return this.Pi(),this.mi=!0,this.bi(t)},ew.prototype.Pi=function(){},ew);function ew(){this.Ii=new sy(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.mi=!1}function nw(t,e,n,r){this.batch=t,this.Ti=e,this.fi=n,this.Ei=r}function rw(t,e,n,r){this.batchId=t,this.li=e,this.baseMutations=n,this.mutations=r}function iw(t,e){this.ui=t,this.hi=e}function ow(t,e){this.ui=t,this.hi=e,this.type="FirstParty",this.user=Hb.Zs}function sw(t){var e=this;this.ri=null,this.currentUser=Hb.UNAUTHENTICATED,this.oi=!1,this.ai=0,this.ei=null,this.forceRefresh=!1,this.ri=function(){e.ai++,e.currentUser=e.ci(),e.oi=!0,e.ei&&e.ei(e.currentUser)},this.ai=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ri):(this.ri(null),t.get().then(function(t){e.auth=t,e.ri&&e.auth.addAuthTokenListener(e.ri)},function(){}))}function aw(){this.ei=null}function uw(t){return new qg(t,!0)}function cw(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var hw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",M=(gw.prototype.Di=function(t){this.Si.push(t)},gw.prototype.Ci=function(){this.Si.forEach(function(t){return t()})},gw),lw=(yw.prototype.Oi=function(e,n){var r=this;return this.xi.Mi(e,n).next(function(t){return r.ki(e,n,t)})},yw.prototype.ki=function(t,r,i){return this.Ni.yi(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].di(r,t);return t})},yw.prototype.$i=function(t,e,i){var o=Qy;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].di(t,e);o=o.rt(t,e)}),o},yw.prototype.Li=function(e,t){var n=this;return this.Ni.getEntries(e,t).next(function(t){return n.Bi(e,t)})},yw.prototype.Bi=function(e,r){var i=this;return this.xi.qi(e,r).next(function(t){var t=i.$i(e,r,t),n=Qy;return t.forEach(function(t,e){e=e||new p_(t,hy.min()),n=n.rt(t,e)}),n})},yw.prototype.Ui=function(t,e,n){return r=e,dy.G(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Qi(t,e.path):S_(e)?this.Ki(t,e,n):this.Wi(t,e,n);var r},yw.prototype.Qi=function(t,e){return this.Oi(t,new dy(e)).next(function(t){var e=Jy;return t instanceof f_&&(e=e.rt(t.key,t)),e})},yw.prototype.Ki=function(n,r,i){var o=this,s=r.collectionGroup,a=Jy;return this.Fi.ji(n,s).next(function(t){return vb.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new v_(t,null,e.rn.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.Wi(n,e,i).next(function(t){t.forEach(function(t,e){a=a.rt(t,e)})})}).next(function(){return a})})},yw.prototype.Wi=function(e,n,t){var c,h,r=this;return this.Ni.Ui(e,n,t).next(function(t){return c=t,r.xi.Gi(e,n)}).next(function(t){return h=t,r.zi(e,h,c).next(function(t){c=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=c.get(a),u=jm(s,u,u,r.li);c=u instanceof f_?c.rt(a,u):c.remove(a)}})}).next(function(){return c.forEach(function(t,e){x_(n,e)||(c=c.remove(t))}),c})},yw.prototype.zi=function(t,e,n){for(var r=tg(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Hm&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ni.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof f_&&(c=c.rt(t,e))}),c})},yw),fw=(vw.Yi=function(t,e){for(var n=tg(),r=tg(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new vw(t,e.fromCache,n,r)},vw),pw=(dw.prototype.Zi=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},dw.prototype.next=function(){var t=++this.previousValue;return this.tr&&this.tr(t),t},dw);function dw(t,e){var n=this;this.previousValue=t,e&&(e.Xi=function(t){return n.Zi(t)},this.tr=function(t){return e.er(t)})}function vw(t,e,n,r){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=r}function yw(t,e,n){this.Ni=t,this.xi=e,this.Fi=n}function gw(){this.Si=[]}function mw(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=Jv(n,t);return 0===t?Jv(r,e):t}pw.nr=-1;var _w=(Iw.prototype.rr=function(){return++this.ir},Iw.prototype.ar=function(t){var e=[t,this.rr()];this.buffer.size<this.sr?this.buffer=this.buffer.add(e):mw(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(Iw.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),Iw),bw={cr:!1,ur:0,hr:0,lr:0},ww=(Ew.Tr=function(t){return new Ew(t,Ew.Er,Ew.Ir)},Ew);function Ew(t,e,n){this._r=t,this.dr=e,this.wr=n}function Iw(t){this.sr=t,this.buffer=new Gy(mw),this.ir=0}ww.Er=10,ww.Ir=1e3,ww.mr=new ww(41943040,ww.Er,ww.Ir),ww.Ar=new ww(-1,0,0);var Tw=(Nw.prototype.start=function(t){-1!==this.Rr.params._r&&this.Vr(t)},Nw.prototype.stop=function(){this.gr&&(this.gr.cancel(),this.gr=null)},Object.defineProperty(Nw.prototype,"yr",{get:function(){return null!==this.gr},enumerable:!1,configurable:!0}),Nw.prototype.Vr=function(n){var t=this,e=this.Pr?3e5:6e4;Wv("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gr=this.rs.Pn("lru_garbage_collection",e,function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:this.gr=null,this.Pr=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.pr(this.Rr)];case 2:return t.sent(),[3,7];case 3:return Tb(e=t.sent())?(Wv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,dI(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.Vr(n)];case 8:return t.sent(),[2]}})})})},Nw),Sw=(Cw.prototype.br=function(t,e){return this.vr.Sr(t).next(function(t){return Math.floor(e/100*t)})},Cw.prototype.Dr=function(t,e){var n=this;if(0===e)return vb.resolve(pw.nr);var r=new _w(e);return this.vr.De(t,function(t){return r.ar(t.sequenceNumber)}).next(function(){return n.vr.Cr(t,function(t){return r.ar(t)})}).next(function(){return r.maxValue})},Cw.prototype.Nr=function(t,e,n){return this.vr.Nr(t,e,n)},Cw.prototype.Fr=function(t,e){return this.vr.Fr(t,e)},Cw.prototype.Or=function(e,n){var r=this;return-1===this.params._r?(Wv("LruGarbageCollector","Garbage collection skipped; disabled"),vb.resolve(bw)):this.Mr(e).next(function(t){return t<r.params._r?(Wv("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params._r),bw):r.kr(e,n)})},Cw.prototype.Mr=function(t){return this.vr.Mr(t)},Cw.prototype.kr=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.br(e,this.params.dr).next(function(t){return i=t>h.params.wr?(Wv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.wr+" from "+t),h.params.wr):t,s=Date.now(),h.Dr(e,i)}).next(function(t){return r=t,a=Date.now(),h.Nr(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.Fr(e,r)}).next(function(t){return c=Date.now(),Bv()<=Ns.DEBUG&&Wv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),vb.resolve({cr:!0,ur:i,hr:o,lr:t})})},Cw);function Cw(t,e){this.vr=t,this.params=e}function Nw(t,e){this.Rr=t,this.rs=e,this.Pr=!1,this.gr=null}function Aw(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=kw(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return kw(e)}function kw(t){return t+""}function Ow(t){var e=t.length;if(Qv(2<=e),2===e)return Qv(""===t.charAt(0)&&""===t.charAt(1)),ly.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&zv(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:zv()}o=s+2}return new ly(r)}var Pw=function(t){this.$r=t};function Rw(t,e){if(e.document)return n=t.$r,r=e.document,i=!!e.hasCommittedMutations,t=Jg(n,r.name),n=zg(r.updateTime),r=new r_({mapValue:{fields:r.fields}}),new f_(t,n,r,{hasCommittedMutations:!!i});var n,r;if(e.noDocument){var i=dy.H(e.noDocument.path),o=Fw(e.noDocument.readTime);return new p_(i,o,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){o=dy.H(e.unknownDocument.path),e=Fw(e.unknownDocument.version);return new d_(o,e)}return zv()}function Dw(t,e,n){var r=xw(n),n=e.key.path.S().O();if(e instanceof f_){var i={name:Xg(i=t.$r,(o=e).key),fields:o.sn().mapValue.fields,updateTime:Hg(i,o.version.P())},o=e.hasCommittedMutations;return new mE(null,null,i,o,r,n)}if(e instanceof p_){var i=e.key.path.O(),o=Mw(e.version),s=e.hasCommittedMutations;return new mE(null,new yE(i,o),null,s,r,n)}if(e instanceof d_){s=e.key.path.O(),e=Mw(e.version);return new mE(new gE(s,e),null,null,!0,r,n)}return zv()}function xw(t){t=t.P();return[t.seconds,t.nanoseconds]}function Lw(t){t=new cy(t[0],t[1]);return hy.m(t)}function Mw(t){t=t.P();return new aE(t.seconds,t.nanoseconds)}function Fw(t){t=new cy(t.seconds,t.nanoseconds);return hy.m(t)}function Uw(e,t){var n=(t.baseMutations||[]).map(function(t){return im(e.$r,t)}),r=t.mutations.map(function(t){return im(e.$r,t)}),i=cy.fromMillis(t.localWriteTimeMs);return new Zb(t.batchId,i,n,r)}function jw(t){var e=Fw(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Fw(t.lastLimboFreeSnapshotVersion):hy.min(),r=void 0!==t.query.documents?(Qv(1===(r=t.query).documents.length),N_(b_(Zg(r.documents[0])))):N_(am(t.query));return new Ly(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Py.fromBase64String(t.resumeToken))}function Vw(t,e){var n=Mw(e.et),r=Mw(e.lastLimboFreeSnapshotVersion),i=(Oy(e.target)?om:sm)(t.$r,e.target),t=e.resumeToken.toBase64();return new bE(e.targetId,Ay(e.target),n,t,e.sequenceNumber,r,i)}function qw(t){var e=am({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?A_(e,e.limit,"L"):e}var Bw=(Ww.qr=function(t,e,n,r){return Qv(""!==t.uid),new Ww(t.Js()?t.uid:"",e,n,r)},Ww.prototype.Ur=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gw(t).ns({index:pE.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},Ww.prototype.Qr=function(d,v,y,g){var m=this,_=zw(d),b=Gw(d);return b.add({}).next(function(t){Qv("number"==typeof t);for(var e,n,r,i,o,s=new Zb(t,v,y,g),a=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return rm(e.$r,t)}),o=r.mutations.map(function(t){return rm(e.$r,t)}),new pE(n,r.batchId,r.li.toMillis(),i,o)),u=[],c=new Gy(function(t,e){return Jv(t.M(),e.M())}),h=0,l=g;h<l.length;h++){var f=l[h],p=dE.key(m.userId,f.key.path,t),c=c.add(f.key.path.S());u.push(b.put(a)),u.push(_.put(p,dE.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Fi.Kr(d,t))}),d.Di(function(){m.Br[t]=s.keys()}),vb.xn(u).next(function(){return s})})},Ww.prototype.Wr=function(t,e){var n=this;return Gw(t).get(e).next(function(t){return t?(Qv(t.userId===n.userId),Uw(n.serializer,t)):null})},Ww.prototype.jr=function(t,e){var n=this;return this.Br[e]?vb.resolve(this.Br[e]):this.Wr(t,e).next(function(t){if(t){t=t.keys();return n.Br[e]=t}return null})},Ww.prototype.Gr=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Gw(t).ns({index:pE.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(Qv(e.batchId>=i),o=Uw(r.serializer,e)),n.done()}).next(function(){return o})},Ww.prototype.zr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Gw(t).ns({index:pE.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},Ww.prototype.Hr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gw(t).Xn(pE.userMutationsIndex,n).next(function(t){return t.map(function(t){return Uw(e.serializer,t)})})},Ww.prototype.Mi=function(o,s){var a=this,t=dE.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return zw(o).ns({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=Ow(i);if(r===a.userId&&s.path.isEqual(i))return Gw(o).get(t).next(function(t){if(!t)throw zv();Qv(t.userId===a.userId),u.push(Uw(a.serializer,t))});n.done()}).next(function(){return u})},Ww.prototype.qi=function(e,t){var s=this,a=new Gy(Jv),n=[];return t.forEach(function(o){var t=dE.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=zw(e).ns({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=Ow(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),vb.xn(n).next(function(){return s.Jr(e,a)})},Ww.prototype.Gi=function(t,e){var o=this,s=e.path,a=s.length+1,e=dE.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new Gy(Jv);return zw(t).ns({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=Ow(i);r===o.userId&&s.N(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Jr(t,u)})},Ww.prototype.Jr=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Gw(e).get(t).next(function(t){if(null===t)throw zv();Qv(t.userId===n.userId),r.push(Uw(n.serializer,t))}))}),vb.xn(i).next(function(){return r})},Ww.prototype.Yr=function(e,n){var r=this;return Hw(e.Xr,this.userId,n).next(function(t){return e.Di(function(){r.Zr(n.batchId)}),vb.forEach(t,function(t){return r.Lr.eo(e,t)})})},Ww.prototype.Zr=function(t){delete this.Br[t]},Ww.prototype.no=function(e){var i=this;return this.Ur(e).next(function(t){if(!t)return vb.resolve();var t=IDBKeyRange.lowerBound(dE.prefixForUser(i.userId)),r=[];return zw(e).ns({range:t},function(t,e,n){t[0]===i.userId?(t=Ow(t[1]),r.push(t)):n.done()}).next(function(){Qv(0===r.length)})})},Ww.prototype.so=function(t,e){return Kw(t,this.userId,e)},Ww.prototype.io=function(t){var e=this;return Qw(t).get(this.userId).next(function(t){return t||new fE(e.userId,-1,"")})},Ww);function Ww(t,e,n,r){this.userId=t,this.serializer=e,this.Fi=n,this.Lr=r,this.Br={}}function Kw(t,o,e){var e=dE.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),a=!1;return zw(t).ns({range:e,es:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function Hw(t,e,n){var r=t.store(pE.store),i=t.store(dE.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.ns({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){Qv(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=dE.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return vb.xn(o).next(function(){return a})}function Gw(t){return GE.qn(t,pE.store)}function zw(t){return GE.qn(t,dE.store)}function Qw(t){return GE.qn(t,fE.store)}var Yw,Xw=(Zw.prototype.Ri=function(t,e,n){return eE(t).put(nE(e),n)},Zw.prototype.Vi=function(t,e){t=eE(t),e=nE(e);return t.delete(e)},Zw.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.ro(e,t)})},Zw.prototype.yi=function(t,e){var n=this;return eE(t).get(nE(e)).next(function(t){return n.oo(t)})},Zw.prototype.ao=function(t,e){var n=this;return eE(t).get(nE(e)).next(function(t){var e=n.oo(t);return e?{gi:e,size:rE(t)}:null})},Zw.prototype.getEntries=function(t,e){var n=this,r=Qy;return this.co(t,e,function(t,e){e=n.oo(e);r=r.rt(t,e)}).next(function(){return r})},Zw.prototype.uo=function(t,e){var r=this,i=Qy,o=new jy(dy.V);return this.co(t,e,function(t,e){var n=r.oo(e);o=n?(i=i.rt(t,n),o.rt(t,rE(e))):(i=i.rt(t,null),o.rt(t,0))}).next(function(){return{ho:i,lo:o}})},Zw.prototype.co=function(t,e,i){if(e.T())return vb.resolve();var n=IDBKeyRange.bound(e.first().path.O(),e.last().path.O()),o=e.lt(),s=o.Et();return eE(t).ns({range:n},function(t,e,n){for(var r=dy.H(t);s&&dy.V(s,r)<0;)i(s,null),s=o.Et();s&&s.isEqual(r)&&(i(s,e),s=o.It()?o.Et():null),s?n.Jn(s.path.O()):n.done()}).next(function(){for(;s;)i(s,null),s=o.It()?o.Et():null})},Zw.prototype.Ui=function(t,r,e){var n,i=this,o=Jy,s=r.path.length+1,a={};return e.isEqual(hy.min())?(n=r.path.O(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.O(),e=xw(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=mE.collectionReadTimeIndex),eE(t).ns(a,function(t,e,n){t.length===s&&(e=Rw(i.serializer,e),r.path.N(e.key.path)?e instanceof f_&&x_(r,e)&&(o=o.rt(e.key,e)):n.done())}).next(function(){return o})},Zw.prototype._o=function(t){return new Jw(this,!!t&&t.fo)},Zw.prototype.wo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},Zw.prototype.getMetadata=function(t){return tE(t).get(_E.key).next(function(t){return Qv(!!t),t})},Zw.prototype.ro=function(t,e){return tE(t).put(_E.key,e)},Zw.prototype.oo=function(t){if(t){t=Rw(this.serializer,t);return t instanceof p_&&t.version.isEqual(hy.min())?null:t}return null},Zw),Jw=(go($w,Yw=Dr),$w.prototype.bi=function(i){var o=this,s=[],a=0,u=new Gy(function(t,e){return Jv(t.M(),e.M())});return this.Ii.forEach(function(t,e){var n,r=o.Eo.get(t);e.gi?(n=Dw(o.To.serializer,e.gi,o.Ai(t)),u=u.add(t.path.S()),e=rE(n),a+=e-r,s.push(o.To.Ri(i,t,n))):(a-=r,o.fo?(r=Dw(o.To.serializer,new p_(t,hy.min()),o.Ai(t)),s.push(o.To.Ri(i,t,r))):s.push(o.To.Vi(i,t)))}),u.forEach(function(t){s.push(o.To.Fi.Kr(i,t))}),s.push(this.To.updateMetadata(i,a)),vb.xn(s)},$w.prototype.pi=function(t,e){var n=this;return this.To.ao(t,e).next(function(t){return null===t?(n.Eo.set(e,0),null):(n.Eo.set(e,t.size),t.gi)})},$w.prototype.vi=function(t,e){var n=this;return this.To.uo(t,e).next(function(t){var e=t.ho;return t.lo.forEach(function(t,e){n.Eo.set(t,e)}),e})},$w);function $w(t,e){var n=this;return(n=Yw.call(this)||this).To=t,n.fo=e,n.Eo=new sy(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function Zw(t,e){this.serializer=t,this.Fi=e}function tE(t){return GE.qn(t,_E.store)}function eE(t){return GE.qn(t,mE.store)}function nE(t){return t.path.O()}function rE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw zv();e=t.noDocument}return JSON.stringify(e).length}var iE=(lE.prototype.Kr=function(t,e){return this.Io.add(e),vb.resolve()},lE.prototype.ji=function(t,e){return vb.resolve(this.Io.getEntries(e))},lE),oE=(hE.prototype.add=function(t){var e=t.C(),n=t.S(),r=this.index[e]||new Gy(ly.V),t=!r.has(n);return this.index[e]=r.add(n),t},hE.prototype.has=function(t){var e=t.C(),t=t.S(),e=this.index[e];return e&&e.has(t)},hE.prototype.getEntries=function(t){return(this.index[t]||new Gy(ly.V)).O()},hE),sE=(cE.prototype.createOrUpgrade=function(e,n,t,r){var i=this;Qv(t<r&&0<=t&&r<=11);var o=new Sb("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(uE.store),(s=e).createObjectStore(fE.store,{keyPath:fE.keyPath}),s.createObjectStore(pE.store,{keyPath:pE.keyPath,autoIncrement:!0}).createIndex(pE.userMutationsIndex,pE.userMutationsKeyPath,{unique:!0}),s.createObjectStore(dE.store),TE(e),e.createObjectStore(mE.store));var s,a=vb.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(wE.store),s.deleteObjectStore(bE.store),s.deleteObjectStore(EE.store),TE(e)),a=a.next(function(){return t=o.store(EE.store),e=new EE(0,0,hy.min().P(),0),t.put(EE.key,e);var t,e})),t<4&&4<=r&&(0!==t&&(a=a.next(function(){return n=e,(r=o).store(pE.store).Xn().next(function(t){n.deleteObjectStore(pE.store),n.createObjectStore(pE.store,{keyPath:pE.keyPath,autoIncrement:!0}).createIndex(pE.userMutationsIndex,pE.userMutationsKeyPath,{unique:!0});var e=r.store(pE.store),t=t.map(function(t){return e.put(t)});return vb.xn(t)});var n,r})),a=a.next(function(){e.createObjectStore(SE.store,{keyPath:SE.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.removeAcknowledgedMutations(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(_E.store),i.addDocumentGlobal(o)})),t<7&&7<=r&&(a=a.next(function(){return i.ensureSequenceNumbers(o)})),t<8&&8<=r&&(a=a.next(function(){return i.createCollectionParentIndex(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(mE.store)).createIndex(mE.readTimeIndex,mE.readTimeIndexPath,{unique:!1}),t.createIndex(mE.collectionReadTimeIndex,mE.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.rewriteCanonicalIds(o)})),t<11&&11<=r&&(a=a.next(function(){e.createObjectStore(CE.store,{keyPath:CE.keyPath}),e.createObjectStore(NE.store,{keyPath:NE.keyPath})})),a},cE.prototype.addDocumentGlobal=function(e){var n=0;return e.store(mE.store).ns(function(t,e){n+=rE(e)}).next(function(){var t=new _E(n);return e.store(_E.store).put(_E.key,t)})},cE.prototype.removeAcknowledgedMutations=function(n){var r=this,t=n.store(fE.store),i=n.store(pE.store);return t.Xn().next(function(t){return vb.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.Xn(pE.userMutationsIndex,t).next(function(t){return vb.forEach(t,function(t){Qv(t.userId===e.userId);t=Uw(r.serializer,t);return Hw(n,e.userId,t).next(function(){})})})})})},cE.prototype.ensureSequenceNumbers=function(t){var o=t.store(wE.store),e=t.store(mE.store);return t.store(EE.store).get(EE.key).next(function(r){var i=[];return e.ns(function(t,e){var n=new ly(t),t=[0,Aw(n)];i.push(o.get(t).next(function(t){return t?vb.resolve():o.put(new wE(0,Aw(n),r.highestListenSequenceNumber))}))}).next(function(){return vb.xn(i)})})},cE.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(IE.store,{keyPath:IE.keyPath});function r(t){if(i.add(t)){var e=t.C(),t=t.S();return n.put({collectionId:e,parent:Aw(t)})}}var n=e.store(IE.store),i=new oE;return e.store(mE.store).ns({es:!0},function(t,e){t=new ly(t);return r(t.S())}).next(function(){return e.store(dE.store).ns({es:!0},function(t,e){t[0];var n=t[1],n=(t[2],Ow(n));return r(n.S())})})},cE.prototype.rewriteCanonicalIds=function(t){var n=this,r=t.store(bE.store);return r.ns(function(t,e){e=jw(e),e=Vw(n.serializer,e);return r.put(e)})},cE),aE=function(t,e){this.seconds=t,this.nanoseconds=e},uE=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function cE(t){this.serializer=t}function hE(){this.index={}}function lE(){this.Io=new oE}uE.store="owner",uE.key="owner";var fE=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};fE.store="mutationQueues",fE.keyPath="userId";var pE=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};pE.store="mutations",pE.keyPath="batchId",pE.userMutationsIndex="userMutationsIndex",pE.userMutationsKeyPath=["userId","batchId"];var dE=(vE.prefixForUser=function(t){return[t]},vE.prefixForPath=function(t,e){return[t,Aw(e)]},vE.key=function(t,e,n){return[t,Aw(e),n]},vE);function vE(){}dE.store="documentMutations",dE.PLACEHOLDER=new dE;var yE=function(t,e){this.path=t,this.readTime=e},gE=function(t,e){this.path=t,this.version=e},mE=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};mE.store="remoteDocuments",mE.readTimeIndex="readTimeIndex",mE.readTimeIndexPath="readTime",mE.collectionReadTimeIndex="collectionReadTimeIndex",mE.collectionReadTimeIndexPath=["parentPath","readTime"];var _E=function(t){this.byteSize=t};_E.store="remoteDocumentGlobal",_E.key="remoteDocumentGlobalKey";var bE=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};bE.store="targets",bE.keyPath="targetId",bE.queryTargetsIndexName="queryTargetsIndex",bE.queryTargetsKeyPath=["canonicalId","targetId"];var wE=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};wE.store="targetDocuments",wE.keyPath=["targetId","path"],wE.documentTargetsIndex="documentTargetsIndex",wE.documentTargetsKeyPath=["path","targetId"];var EE=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};EE.key="targetGlobalKey",EE.store="targetGlobal";var IE=function(t,e){this.collectionId=t,this.parent=e};function TE(t){t.createObjectStore(wE.store,{keyPath:wE.keyPath}).createIndex(wE.documentTargetsIndex,wE.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bE.store,{keyPath:bE.keyPath}).createIndex(bE.queryTargetsIndexName,bE.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(EE.store)}IE.store="collectionParents",IE.keyPath=["collectionId","parent"];var SE=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};SE.store="clientMetadata",SE.keyPath="clientId";var CE=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};CE.store="bundles",CE.keyPath="bundleId";var NE=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};NE.store="namedQueries",NE.keyPath="name";var AE=To(To(To(To([fE.store,pE.store,dE.store,mE.store,bE.store,uE.store,EE.store,wE.store],[SE.store]),[_E.store]),[IE.store]),[CE.store,NE.store]),kE=(OE.prototype.mo=function(t,e){return PE(t).get(e).next(function(t){if(t)return{id:(t=t).bundleId,createTime:Fw(t.createTime),version:t.version}})},OE.prototype.Ao=function(t,e){return PE(t).put({bundleId:(e=e).id,createTime:Mw(zg(e.createTime)),version:e.version})},OE.prototype.Ro=function(t,e){return RE(t).get(e).next(function(t){if(t)return{name:(t=t).name,query:qw(t.bundledQuery),readTime:Fw(t.readTime)}})},OE.prototype.Po=function(t,e){return RE(t).put({name:(e=e).name,readTime:Mw(zg(e.readTime)),bundledQuery:e.bundledQuery})},OE);function OE(t){this.serializer=t}function PE(t){return GE.qn(t,CE.store)}function RE(t){return GE.qn(t,NE.store)}var DE=(xE.prototype.Kr=function(t,e){var n=this;if(this.Vo.has(e))return vb.resolve();var r=e.C(),i=e.S();t.Di(function(){n.Vo.add(e)});i={collectionId:r,parent:Aw(i)};return LE(t).put(i)},xE.prototype.ji=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Zv(i),""],!1,!0);return LE(t).Xn(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(Ow(r.parent))}return o})},xE);function xE(){this.Vo=new oE}function LE(t){return GE.qn(t,IE.store)}var ME=(jE.prototype.next=function(){return this.yo+=2,this.yo},jE.po=function(){return new jE(0)},jE.vo=function(){return new jE(-1)},jE),FE=(UE.prototype.bo=function(n){var r=this;return this.So(n).next(function(t){var e=new ME(t.highestTargetId);return t.highestTargetId=e.next(),r.Do(n,t).next(function(){return t.highestTargetId})})},UE.prototype.Co=function(t){return this.So(t).next(function(t){return hy.m(new cy(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},UE.prototype.No=function(t){return this.So(t).next(function(t){return t.highestListenSequenceNumber})},UE.prototype.xo=function(e,n,r){var i=this;return this.So(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.P()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Do(e,t)})},UE.prototype.Fo=function(e,n){var r=this;return this.Oo(e,n).next(function(){return r.So(e).next(function(t){return t.targetCount+=1,r.Mo(n,t),r.Do(e,t)})})},UE.prototype.ko=function(t,e){return this.Oo(t,e)},UE.prototype.$o=function(e,t){var n=this;return this.Lo(e,t.targetId).next(function(){return VE(e).delete(t.targetId)}).next(function(){return n.So(e)}).next(function(t){return Qv(0<t.targetCount),--t.targetCount,n.Do(e,t)})},UE.prototype.Nr=function(n,r,i){var o=this,s=0,a=[];return VE(n).ns(function(t,e){e=jw(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.$o(n,e)))}).next(function(){return vb.xn(a)}).next(function(){return s})},UE.prototype.De=function(t,n){return VE(t).ns(function(t,e){e=jw(e);n(e)})},UE.prototype.So=function(t){return qE(t).get(EE.key).next(function(t){return Qv(null!==t),t})},UE.prototype.Do=function(t,e){return qE(t).put(EE.key,e)},UE.prototype.Oo=function(t,e){return VE(t).put(Vw(this.serializer,e))},UE.prototype.Mo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},UE.prototype.Bo=function(t){return this.So(t).next(function(t){return t.targetCount})},UE.prototype.qo=function(t,r){var e=Ay(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return VE(t).ns({range:e,index:bE.queryTargetsIndexName},function(t,e,n){e=jw(e);ky(r,e.target)&&(i=e,n.done())}).next(function(){return i})},UE.prototype.Uo=function(n,t,r){var i=this,o=[],s=BE(n);return t.forEach(function(t){var e=Aw(t.path);o.push(s.put(new wE(r,e))),o.push(i.Lr.Qo(n,r,t))}),vb.xn(o)},UE.prototype.Ko=function(n,t,r){var i=this,o=BE(n);return vb.forEach(t,function(t){var e=Aw(t.path);return vb.xn([o.delete([r,e]),i.Lr.Wo(n,r,t)])})},UE.prototype.Lo=function(t,e){t=BE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},UE.prototype.jo=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=BE(t),r=tg();return t.ns({range:e,es:!0},function(t,e,n){t=Ow(t[1]),t=new dy(t);r=r.add(t)}).next(function(){return r})},UE.prototype.so=function(t,e){var e=Aw(e.path),e=IDBKeyRange.bound([e],[Zv(e)],!1,!0),i=0;return BE(t).ns({index:wE.documentTargetsIndex,es:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},UE.prototype.qe=function(t,e){return VE(t).get(e).next(function(t){return t?jw(t):null})},UE);function UE(t,e){this.Lr=t,this.serializer=e}function jE(t){this.yo=t}function VE(t){return GE.qn(t,bE.store)}function qE(t){return GE.qn(t,EE.store)}function BE(t){return GE.qn(t,wE.store)}var WE,KE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",HE=(go(QE,WE=M),QE),GE=(zE.qn=function(t,e){if(t instanceof HE)return yb.qn(t.Xr,e);throw zv()},zE.prototype.start=function(){var e=this;return this.ca().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new uy(ay.FAILED_PRECONDITION,KE);return e.ua(),e.ha(),e.la(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.ra.No(t)})}).then(function(t){e.Jo=new pw(t,e.zo)}).then(function(){e.Yo=!0}).catch(function(t){return e.ia&&e.ia.close(),Promise.reject(t)})},zE.prototype._a=function(n){var t=this;return this.na=function(e){return _o(t,void 0,void 0,function(){return bo(this,function(t){return this.yr?[2,n(e)]:[2]})})},n(this.isPrimary)},zE.prototype.fa=function(n){var t=this;this.ia.Kn(function(e){return _o(t,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},zE.prototype.da=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ln.fs(function(){return _o(e,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return this.yr?[4,this.ca()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},zE.prototype.ca=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return XE(e).put(new SE(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.wa(e).next(function(t){t||(n.isPrimary=!1,n.ln.Ss(function(){return n.na(!1)}))})}).next(function(){return n.Ta(e)}).next(function(t){return n.isPrimary&&!t?n.Ea(e).next(function(){return!1}):!!t&&n.Ia(e).next(function(){return!0})})}).catch(function(t){if(Tb(t))return Wv("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Wv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.ln.Ss(function(){return n.na(t)}),n.isPrimary=t})},zE.prototype.wa=function(t){var e=this;return YE(t).get(uE.key).next(function(t){return vb.resolve(e.ma(t))})},zE.prototype.Aa=function(t){return XE(t).delete(this.clientId)},zE.prototype.Ra=function(){return _o(this,void 0,void 0,function(){var e,n,r,i,o=this;return bo(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.Pa(this.ea,18e5)?[3,2]:(this.ea=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=zE.qn(t,SE.store);return r.Xn().next(function(t){var e=o.ga(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return vb.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.aa)for(n=0,r=e;n<r.length;n++)i=r[n],this.aa.removeItem(this.Va(i.clientId));t.label=2;case 2:return[2]}})})},zE.prototype.la=function(){var t=this;this.ta=this.ln.Pn("client_metadata_refresh",4e3,function(){return t.ca().then(function(){return t.Ra()}).then(function(){return t.la()})})},zE.prototype.ma=function(t){return!!t&&t.ownerId===this.clientId},zE.prototype.Ta=function(e){var r=this;return this.Ho?vb.resolve(!0):YE(e).get(uE.key).next(function(t){if(null!==t&&r.Pa(t.leaseTimestampMs,5e3)&&!r.ya(t.ownerId)){if(r.ma(t)&&r.networkEnabled)return!0;if(!r.ma(t)){if(!t.allowTabSynchronization)throw new uy(ay.FAILED_PRECONDITION,KE);return!1}}return!(!r.networkEnabled||!r.inForeground)||XE(e).Xn().next(function(t){return void 0===r.ga(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Wv("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},zE.prototype.pa=function(){return _o(this,void 0,void 0,function(){var n=this;return bo(this,function(t){switch(t.label){case 0:return this.Yo=!1,this.va(),this.ta&&(this.ta.cancel(),this.ta=null),this.ba(),this.Sa(),[4,this.ia.runTransaction("shutdown","readwrite",[uE.store,SE.store],function(t){var e=new HE(t,pw.nr);return n.Ea(e).next(function(){return n.Aa(e)})})];case 1:return t.sent(),this.ia.close(),this.Da(),[2]}})})},zE.prototype.ga=function(t,e){var n=this;return t.filter(function(t){return n.Pa(t.updateTimeMs,e)&&!n.ya(t.clientId)})},zE.prototype.Ca=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return XE(t).Xn().next(function(t){return e.ga(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(zE.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),zE.prototype.Na=function(t){return Bw.qr(t,this.serializer,this.Fi,this.Lr)},zE.prototype.xa=function(){return this.ra},zE.prototype.Fa=function(){return this.Ni},zE.prototype.Oa=function(){return this.Fi},zE.prototype.Ma=function(){return this.oa},zE.prototype.runTransaction=function(e,n,r){var i=this;Wv("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.ia.runTransaction(e,t,AE,function(t){return o=new HE(t,i.Jo?i.Jo.next():pw.nr),"readwrite-primary"===n?i.wa(o).next(function(t){return!!t||i.Ta(o)}).next(function(t){if(!t)throw Kv("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.ln.Ss(function(){return i.na(!1)}),new uy(ay.FAILED_PRECONDITION,hw);return r(o)}).next(function(t){return i.Ia(o).next(function(){return t})}):i.ka(o).next(function(){return r(o)})}).then(function(t){return o.Ci(),t})},zE.prototype.ka=function(t){var e=this;return YE(t).get(uE.key).next(function(t){if(null!==t&&e.Pa(t.leaseTimestampMs,5e3)&&!e.ya(t.ownerId)&&!e.ma(t)&&!(e.Ho||e.allowTabSynchronization&&t.allowTabSynchronization))throw new uy(ay.FAILED_PRECONDITION,KE)})},zE.prototype.Ia=function(t){var e=new uE(this.clientId,this.allowTabSynchronization,Date.now());return YE(t).put(uE.key,e)},zE.kn=function(){return yb.kn()},zE.prototype.Ea=function(t){var e=this,n=YE(t);return n.get(uE.key).next(function(t){return e.ma(t)?(Wv("IndexedDbPersistence","Releasing primary lease."),n.delete(uE.key)):vb.resolve()})},zE.prototype.Pa=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Kv("Detected an update time that is in the future: "+t+" > "+n),1))},zE.prototype.ua=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Zo=function(){t.ln.fs(function(){return t.inForeground="visible"===t.document.visibilityState,t.ca()})},this.document.addEventListener("visibilitychange",this.Zo),this.inForeground="visible"===this.document.visibilityState)},zE.prototype.ba=function(){this.Zo&&(this.document.removeEventListener("visibilitychange",this.Zo),this.Zo=null)},zE.prototype.ha=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Xo=function(){e.va(),e.ln.fs(function(){return e.pa()})},this.window.addEventListener("unload",this.Xo))},zE.prototype.Sa=function(){this.Xo&&(this.window.removeEventListener("unload",this.Xo),this.Xo=null)},zE.prototype.ya=function(t){try{var e=null!==(null===(e=this.aa)||void 0===e?void 0:e.getItem(this.Va(t)));return Wv("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Kv("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},zE.prototype.va=function(){if(this.aa)try{this.aa.setItem(this.Va(this.clientId),String(Date.now()))}catch(t){Kv("Failed to set zombie client id.",t)}},zE.prototype.Da=function(){if(this.aa)try{this.aa.removeItem(this.Va(this.clientId))}catch(t){}},zE.prototype.Va=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},zE);function zE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.ln=i,this.window=o,this.document=s,this.zo=u,this.Ho=c,this.Jo=null,this.Yo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Xo=null,this.inForeground=!1,this.Zo=null,this.ta=null,this.ea=Number.NEGATIVE_INFINITY,this.na=function(t){return Promise.resolve()},!zE.kn())throw new uy(ay.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Lr=new JE(this,r),this.sa=e+"main",this.serializer=new Pw(a),this.ia=new yb(this.sa,11,new sE(this.serializer)),this.ra=new FE(this.Lr,this.serializer),this.Fi=new DE,this.Ni=(e=this.serializer,a=this.Fi,new Xw(e,a)),this.oa=new kE(this.serializer),this.window&&this.window.localStorage?this.aa=this.window.localStorage:(this.aa=null,!1===c&&Kv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function QE(t,e){var n=this;return(n=WE.call(this)||this).Xr=t,n.Go=e,n}function YE(t){return GE.qn(t,uE.store)}function XE(t){return GE.qn(t,SE.store)}var JE=($E.prototype.Sr=function(t){var n=this.$a(t);return this.db.xa().Bo(t).next(function(e){return n.next(function(t){return e+t})})},$E.prototype.$a=function(t){var e=0;return this.Cr(t,function(t){e++}).next(function(){return e})},$E.prototype.De=function(t,e){return this.db.xa().De(t,e)},$E.prototype.Cr=function(t,n){return this.La(t,function(t,e){return n(e)})},$E.prototype.Qo=function(t,e,n){return ZE(t,n)},$E.prototype.Wo=function(t,e,n){return ZE(t,n)},$E.prototype.Nr=function(t,e,n){return this.db.xa().Nr(t,e,n)},$E.prototype.eo=ZE,$E.prototype.Ba=function(t,e){return r=e,i=!1,Qw(n=t).ss(function(t){return Kw(n,t,r).next(function(t){return t&&(i=!0),vb.resolve(!t)})}).next(function(){return i});var n,r,i},$E.prototype.Fr=function(n,r){var i=this,o=this.db.Fa()._o(),s=[],a=0;return this.La(n,function(e,t){t<=r&&(t=i.Ba(n,e).next(function(t){if(!t)return a++,o.yi(n,e).next(function(){return o.Vi(e),BE(n).delete([0,Aw(e.path)])})}),s.push(t))}).next(function(){return vb.xn(s)}).next(function(){return o.apply(n)}).next(function(){return a})},$E.prototype.removeTarget=function(t,e){e=e.nt(t.Go);return this.db.xa().ko(t,e)},$E.prototype.qa=ZE,$E.prototype.La=function(t,r){var i,t=BE(t),o=pw.nr;return t.ns({index:wE.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==pw.nr&&r(new dy(Ow(i)),o),o=e,i=t):o=pw.nr}).next(function(){o!==pw.nr&&r(new dy(Ow(i)),o)})},$E.prototype.Mr=function(t){return this.db.Fa().wo(t)},$E);function $E(t,e){this.db=t,this.Rr=new Sw(this,e)}function ZE(t,e){return BE(t).put((t=t.Go,new wE(0,Aw(e.path),t)))}function tI(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var eI=(nI.prototype.pr=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Or(t,n.Qa)})},nI);function nI(t,e,n,r){this.persistence=t,this.Ua=e,this.serializer=r,this.Qa=new jy(Jv),this.Ka=new sy(Ay,ky),this.Wa=hy.min(),this.xi=t.Na(n),this.ja=t.Fa(),this.ra=t.xa(),this.Ga=new lw(this.ja,this.xi,this.persistence.Oa()),this.oa=t.Ma(),this.Ua.za(this.Ga)}function rI(t,e,n,r){return new eI(t,e,n,r)}function iI(i,o){return _o(this,void 0,void 0,function(){var e,n,m,r;return bo(this,function(t){switch(t.label){case 0:return n=(e=i).xi,m=e.Ga,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.xi.Hr(y).next(function(t){return g=t,n=e.persistence.Na(o),m=new lw(e.ja,n,e.persistence.Oa()),n.Hr(y)}).next(function(t){for(var e=[],n=[],r=tg(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Li(y,r).next(function(t){return{Ha:t,Ja:e,Ya:n}})})})];case 1:return r=t.sent(),[2,(e.xi=n,e.Ga=m,e.Ua.za(e.Ga),r)]}})})}function oI(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,a,u=h.batch.keys(),c=l.ja._o({fo:!0});return e=l,r=t,o=c,s=(i=h).batch,n=s.keys(),a=vb.resolve(),n.forEach(function(n){a=a.next(function(){return o.yi(r,n)}).next(function(t){var e=t,t=i.Ei.get(n);Qv(null!==t),(!e||e.version.A(t)<0)&&(e=s._i(n,e,i))&&o.Ri(e,i.Ti)})}),a.next(function(){return e.xi.Yr(r,s)}).next(function(){return c.apply(t)}).next(function(){return l.xi.no(t)}).next(function(){return l.Ga.Li(t,u)})})}function sI(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.ra.Co(t)})}function aI(t,o){var h=t,l=o.et,f=h.Qa;return h.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=h.ja._o({fo:!0});f=h.Qa;var a=[];o.Gt.forEach(function(t,e){var n,r,i,o=f.get(e);o&&(a.push(h.ra.Ko(s,t.ne,e).next(function(){return h.ra.Uo(s,t.te,e)})),0<(i=t.resumeToken).X()&&(n=o.st(i,l).nt(s.Go),f=f.rt(e,n),r=o,i=t,Qv(0<(o=n).resumeToken.X()),(0===r.resumeToken.X()||3e8<=o.et.R()-r.et.R()||0<i.te.size+i.ee.size+i.ne.size)&&a.push(h.ra.ko(s,n))))});var e,u,n,c,r,i=Qy;return o.Ht.forEach(function(t,e){o.Jt.has(t)&&a.push(h.persistence.Lr.qa(s,t))}),a.push((e=s,u=t,n=o.Ht,c=l,r=tg(),n.forEach(function(t){return r=r.add(t)}),u.getEntries(e,r).next(function(i){var o=Qy;return n.forEach(function(t,e){var n=i.get(t),r=c;e instanceof p_&&e.version.isEqual(hy.min())?(u.Vi(t,r),o=o.rt(t,e)):null==n||0<e.version.A(n.version)||0===e.version.A(n.version)&&n.hasPendingWrites?(u.Ri(e,r),o=o.rt(t,e)):Wv("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o}).next(function(t){i=t}))),l.isEqual(hy.min())||(e=h.ra.Co(s).next(function(t){return h.ra.xo(s,s.Go,l)}),a.push(e)),vb.xn(a).next(function(){return t.apply(s)}).next(function(){return h.Ga.Bi(s,i)})}).then(function(t){return h.Qa=f,t})}function uI(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.ra.qo(e,r).next(function(t){return t?(n=t,vb.resolve(n)):i.ra.bo(e).next(function(t){return n=new Ly(r,t,0,e.Go),i.ra.Fo(e,n).next(function(){return n})})})}).then(function(t){var e=i.Qa.get(t.targetId);return(null===e||0<t.et.A(e.et))&&(i.Qa=i.Qa.rt(t.targetId,t),i.Ka.set(r,t.targetId)),t})}function cI(i,o,s){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:n=(e=i).Qa.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Lr.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!Tb(r=t.sent()))throw r;return Wv("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Qa=e.Qa.remove(o),e.Ka.delete(n.target),[2]}})})}function hI(t,o,s){var a=t,u=hy.min(),c=tg();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=N_(o),(void 0!==(t=(i=t).Ka.get(r))?vb.resolve(i.Qa.get(t)):i.ra.qo(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a.ra.jo(e,t.targetId).next(function(t){c=t})}).next(function(){return a.Ua.Ui(e,o,s?u:hy.min(),s?c:tg())}).next(function(t){return{documents:t,Xa:c}});var t,n,r,i})}function lI(t,e){var n=t,r=n.ra,t=n.Qa.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.qe(t,e).next(function(t){return t?t.target:null})})}function fI(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.ja,n=t,t=s.Wa,r=e,i=Qy,o=xw(t),t=eE(n),n=IDBKeyRange.lowerBound(o,!0),t.ns({index:mE.readTimeIndex,range:n},function(t,e){var n=Rw(r.serializer,e);i=i.rt(n.key,n),o=e.readTime}).next(function(){return{Za:i,readTime:Lw(o)}});var e,n,r,i,o}).then(function(t){var e=t.Za,t=t.readTime;return s.Wa=t,e})}function pI(n){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=eE(t),r=hy.min(),t.ns({index:mE.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=Lw(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.Wa=t})]})})}function dI(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){if(e.code!==ay.FAILED_PRECONDITION||e.message!==hw)throw e;return Wv("LocalStore","Unexpectedly lost primary lease"),[2]})})}function vI(t,e,n,r,i){var o=this;this.Kc=t,this.Wc=e,this.rs=n,this.jc={},this.Gc=[],this.zc=new Map,this.Hc=new Set,this.Jc=[],this.Yc=i,this.Yc.Xc(function(t){n.fs(function(){return _o(o,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return MI(this)?(Wv("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return(e=n).Hc.add(4),[4,kI(e)];case 1:return t.sent(),e.Zc.set("Unknown"),e.Hc.delete(4),[4,AI(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Zc=new EI(n,r)}var yI,gI,mI,G=(NI.prototype.rc=function(){return 1===this.state||2===this.state||4===this.state},NI.prototype.oc=function(){return 2===this.state},NI.prototype.start=function(){3!==this.state?this.auth():this.ac()},NI.prototype.stop=function(){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return this.rc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},NI.prototype.cc=function(){this.state=0,this.Ps.reset()},NI.prototype.uc=function(){var t=this;this.oc()&&null===this.ic&&(this.ic=this.ln.Pn(this.tc,6e4,function(){return t.hc()}))},NI.prototype.lc=function(t){this._c(),this.stream.send(t)},NI.prototype.hc=function(){return _o(this,void 0,void 0,function(){return bo(this,function(t){return this.oc()?[2,this.close(0)]:[2]})})},NI.prototype._c=function(){this.ic&&(this.ic.cancel(),this.ic=null)},NI.prototype.close=function(e,n){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return this._c(),this.Ps.cancel(),this.sc++,3!==e?this.Ps.reset():n&&n.code===ay.RESOURCE_EXHAUSTED?(Kv(n.toString()),Kv("Using maximum backoff delay to prevent overloading the backend."),this.Ps.mn()):n&&n.code===ay.UNAUTHENTICATED&&this.nc.ni(),null!==this.stream&&(this.fc(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.dc(n)];case 1:return t.sent(),[2]}})})},NI.prototype.fc=function(){},NI.prototype.auth=function(){var n=this;this.state=1;var t=this.wc(this.sc),e=this.sc;this.nc.getToken().then(function(t){n.sc===e&&n.Tc(t)},function(e){t(function(){var t=new uy(ay.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Ec(t)})})},NI.prototype.Tc=function(t){var e=this,n=this.wc(this.sc);this.stream=this.Ic(t),this.stream.mc(function(){n(function(){return e.state=2,e.listener.mc()})}),this.stream.dc(function(t){n(function(){return e.Ec(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},NI.prototype.ac=function(){var t=this;this.state=4,this.Ps.An(function(){return _o(t,void 0,void 0,function(){return bo(this,function(t){return this.state=0,this.start(),[2]})})})},NI.prototype.Ec=function(t){return Wv("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},NI.prototype.wc=function(e){var n=this;return function(t){n.ln.fs(function(){return n.sc===e?t():(Wv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},NI),_I=(go(CI,mI=G),CI.prototype.Ic=function(t){return this.ec.Ac("Listen",t)},CI.prototype.onMessage=function(t){this.Ps.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:zv(),r=e.targetChange.targetIds||[],i=(o=e.targetChange.resumeToken,t.Ue?(Qv(void 0===o||"string"==typeof o),Py.fromBase64String(o||"")):(Qv(void 0===o||o instanceof Uint8Array),Py.fromUint8Array(o||new Uint8Array))),o=e.targetChange.cause,s=o&&(o=void 0===(s=o).code?ay.UNKNOWN:Uy(s.code),new uy(o,s.message||"")),r=new cg(n,r,i,s||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var i=Jg(t,a.document.name),u=zg(a.document.updateTime),s=new r_({mapValue:{fields:a.document.fields}}),u=new f_(i,u,s,{}),s=a.targetIds||[],a=a.removedTargetIds||[];r=new ag(s,a,u.key,u)}else if("documentDelete"in e){e.documentDelete;a=e.documentDelete;a.document;var u=Jg(t,a.document),c=a.readTime?zg(a.readTime):hy.min(),c=new p_(u,c),a=a.removedTargetIds||[];r=new ag([],a,c.key,c)}else if("documentRemove"in e){e.documentRemove;c=e.documentRemove;c.document;var h=Jg(t,c.document),c=c.removedTargetIds||[];r=new ag([],c,h,null)}else{if(!("filter"in e))return zv();e.filter;h=e.filter;h.targetId;e=h.count||0,e=new Dy(e),h=h.targetId;r=new ug(h,e)}return r}(this.serializer,t),t=function(t){if(!("targetChange"in t))return hy.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?zg(t.readTime):hy.min()}(t);return this.listener.Rc(e,t)},CI.prototype.Pc=function(t){var e,n,r,i={};i.database=tm(this.serializer),i.addTarget=(e=this.serializer,(r=Oy(r=(n=t).target)?{documents:om(e,r)}:{query:sm(e,r)}).targetId=n.targetId,0<n.resumeToken.X()?r.resumeToken=Gg(e,n.resumeToken):0<n.et.A(hy.min())&&(r.readTime=Hg(e,n.et.P())),r);var o,t=(this.serializer,o=t,null==(t=function(){switch(o.tt){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zv()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.lc(i)},CI.prototype.gc=function(t){var e={};e.database=tm(this.serializer),e.removeTarget=t,this.lc(e)},CI),bI=(go(SI,gI=G),Object.defineProperty(SI.prototype,"yc",{get:function(){return this.Vc},enumerable:!1,configurable:!0}),SI.prototype.start=function(){this.Vc=!1,this.lastStreamToken=void 0,gI.prototype.start.call(this)},SI.prototype.fc=function(){this.Vc&&this.vc([])},SI.prototype.Ic=function(t){return this.ec.Ac("Write",t)},SI.prototype.onMessage=function(t){if(Qv(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vc){this.Ps.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Qv(void 0!==r),n.map(function(t){return function(t,e){var n=t.updateTime?zg(t.updateTime):zg(e);n.isEqual(hy.min())&&(n=zg(e));e=null;return t.transformResults&&0<t.transformResults.length&&(e=t.transformResults),new xm(n,e)}(t,r)})):[]),n=zg(t.commitTime);return this.listener.bc(n,e)}var n,r;return Qv(!t.writeResults||0===t.writeResults.length),this.Vc=!0,this.listener.Sc()},SI.prototype.Dc=function(){var t={};t.database=tm(this.serializer),this.lc(t)},SI.prototype.vc=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return rm(e.serializer,t)})};this.lc(t)},SI),wI=(go(TI,yI=function(){}),TI.prototype.Nc=function(){if(this.Cc)throw new uy(ay.FAILED_PRECONDITION,"The client has already been terminated.")},TI.prototype.xc=function(e,n,r){var i=this;return this.Nc(),this.credentials.getToken().then(function(t){return i.ec.xc(e,n,r,t)}).catch(function(t){throw t.code===ay.UNAUTHENTICATED&&i.credentials.ni(),t})},TI.prototype.Fc=function(e,n,r){var i=this;return this.Nc(),this.credentials.getToken().then(function(t){return i.ec.Fc(e,n,r,t)}).catch(function(t){throw t.code===ay.UNAUTHENTICATED&&i.credentials.ni(),t})},TI.prototype.terminate=function(){this.Cc=!1},TI),EI=(II.prototype.Lc=function(){var t=this;0===this.Mc&&(this.Bc("Unknown"),this.kc=this.rs.Pn("online_state_timeout",1e4,function(){return t.kc=null,t.qc("Backend didn't respond within 10 seconds."),t.Bc("Offline"),Promise.resolve()}))},II.prototype.Uc=function(t){"Online"===this.state?this.Bc("Unknown"):(this.Mc++,1<=this.Mc&&(this.Qc(),this.qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Bc("Offline")))},II.prototype.set=function(t){this.Qc(),this.Mc=0,"Online"===t&&(this.$c=!1),this.Bc(t)},II.prototype.Bc=function(t){t!==this.state&&(this.state=t,this.Oc(t))},II.prototype.qc=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.$c?(Kv(t),this.$c=!1):Wv("OnlineStateTracker",t)},II.prototype.Qc=function(){null!==this.kc&&(this.kc.cancel(),this.kc=null)},II);function II(t,e){this.rs=t,this.Oc=e,this.state="Unknown",this.Mc=0,this.kc=null,this.$c=!0}function TI(t,e,n){var r=this;return(r=yI.call(this)||this).credentials=t,r.ec=e,r.serializer=n,r.Cc=!1,r}function SI(t,e,n,r,i){var o=this;return(o=gI.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Vc=!1,o}function CI(t,e,n,r,i){var o=this;return(o=mI.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function NI(t,e,n,r,i,o){this.ln=t,this.tc=n,this.ec=r,this.nc=i,this.listener=o,this.state=0,this.sc=0,this.ic=null,this.stream=null,this.Ps=new db(t,e)}function AI(r){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:if(!MI(r))return[3,4];e=0,n=r.Jc,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function kI(r){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:e=0,n=r.Jc,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function OI(t,e){t.zc.has(e.targetId)||(t.zc.set(e.targetId,e),LI(t)?xI(t):HI(t).oc()&&RI(t,e))}function PI(t,e){var n=t,t=HI(n);n.zc.delete(e),t.oc()&&DI(n,e),0===n.zc.size&&(t.oc()?t.uc():MI(n)&&n.Zc.set("Unknown"))}function RI(t,e){t.tu.Ie(e.targetId),HI(t).Pc(e)}function DI(t,e){t.tu.Ie(e),HI(t).gc(e)}function xI(e){e.tu=new lg({Be:function(t){return e.jc.Be(t)},qe:function(t){return e.zc.get(t)||null}}),HI(e).start(),e.Zc.Lc()}function LI(t){return MI(t)&&!HI(t).rc()&&0<t.zc.size}function MI(t){return 0===t.Hc.size}function FI(t){t.tu=void 0}function UI(s,a,u){return _o(this,void 0,void 0,function(){var n,o;return bo(this,function(t){switch(t.label){case 0:if(s.Zc.set("Online"),!(a instanceof cg&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return _o(this,void 0,void 0,function(){var e,n,r,i;return bo(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.zc.has(i)?[4,o.jc.eu(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.zc.delete(i),o.tu.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Wv("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,jI(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof ag?s.tu.pe(a):a instanceof ug?s.tu.Fe(a):s.tu.Se(a),u.isEqual(hy.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,sI(s.Kc)];case 8:return o=t.sent(),0<=u.A(o)?[4,(i=u,(e=(r=s).tu.ke(i)).Gt.forEach(function(t,e){var n;0<t.resumeToken.X()&&((n=r.zc.get(e))&&r.zc.set(e,n.st(t.resumeToken,i)))}),e.zt.forEach(function(t){var e=r.zc.get(t);e&&(r.zc.set(t,e.st(Py.Z,e.et)),DI(r,t),e=new Ly(e.target,t,1,e.sequenceNumber),RI(r,e))}),r.jc.nu(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Wv("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,jI(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function jI(n,r,i){return _o(this,void 0,void 0,function(){var e=this;return bo(this,function(t){switch(t.label){case 0:if(!Tb(r))throw r;return n.Hc.add(1),[4,kI(n)];case 1:return t.sent(),n.Zc.set("Offline"),i=i||function(){return sI(n.Kc)},n.rs.Ss(function(){return _o(e,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return Wv("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Hc.delete(1),[4,AI(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function VI(e,n){return n().catch(function(t){return jI(e,t,n)})}function qI(u){return _o(this,void 0,void 0,function(){var i,o,s,a;return bo(this,function(t){switch(t.label){case 0:o=GI(i=u),s=0<i.Gc.length?i.Gc[i.Gc.length-1].batchId:-1,t.label=1;case 1:if(!(MI(i)&&i.Gc.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.Kc,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.xi.Gr(t,n)}))];case 3:return null===(a=t.sent())?(0===i.Gc.length&&o.uc(),[3,7]):(s=a.batchId,function(t,e){t.Gc.push(e);t=GI(t);t.oc()&&t.yc&&t.vc(e.mutations)}(i,a),[3,6]);case 4:return a=t.sent(),[4,jI(i,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return BI(i)&&WI(i),[2]}var e,n,r})})}function BI(t){return MI(t)&&!GI(t).rc()&&0<t.Gc.length}function WI(t){GI(t).start()}function KI(n,r){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=n,r?(e.Hc.delete(2),[4,AI(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Hc.add(2),[4,kI(e)]);case 3:t.sent(),e.Zc.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function HI(n){var t,e,r,i=this;return n.ru||(n.ru=(t=n.Wc,e=n.rs,r={mc:function(n){return _o(this,void 0,void 0,function(){return bo(this,function(t){return n.zc.forEach(function(t,e){RI(n,t)}),[2]})})}.bind(null,n),dc:function(e,n){return _o(this,void 0,void 0,function(){return bo(this,function(t){return FI(e),LI(e)?(e.Zc.Uc(n),xI(e)):e.Zc.set("Unknown"),[2]})})}.bind(null,n),Rc:UI.bind(null,n)},t.Nc(),new _I(e,t.ec,t.credentials,t.serializer,r)),n.Jc.push(function(e){return _o(i,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return e?(n.ru.cc(),LI(n)?xI(n):n.Zc.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.ru.stop()];case 2:t.sent(),FI(n),t.label=3;case 3:return[2]}})})})),n.ru}function GI(n){var t,e,r,i=this;return n.ou||(n.ou=(t=n.Wc,e=n.rs,r={mc:function(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){return GI(e).Dc(),[2]})})}.bind(null,n),dc:function(e,n){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return n&&GI(e).yc?[4,function(r,i){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return Fy(n=i.code)&&n!==ay.ABORTED?(e=r.Gc.shift(),GI(r).cc(),[4,VI(r,function(){return r.jc.iu(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,qI(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return BI(e)&&WI(e),[2]}})})}.bind(null,n),Sc:function(o){return _o(this,void 0,void 0,function(){var e,n,r,i;return bo(this,function(t){for(e=GI(o),n=0,r=o.Gc;n<r.length;n++)i=r[n],e.vc(i.mutations);return[2]})})}.bind(null,n),bc:function(r,i,o){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return e=r.Gc.shift(),n=tw.from(e,i,o),[4,VI(r,function(){return r.jc.su(n)})];case 1:return t.sent(),[4,qI(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Nc(),new bI(e,t.ec,t.credentials,t.serializer,r)),n.Jc.push(function(e){return _o(i,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return e?(n.ou.cc(),[4,qI(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.ou.stop()];case 3:t.sent(),0<n.Gc.length&&(Wv("RemoteStore","Stopping write stream with "+n.Gc.length+" pending writes"),n.Gc=[]),t.label=4;case 4:return[2]}})})})),n.ou}var zI=(XI.prototype.T=function(){return this.au.T()},XI.prototype.Qo=function(t,e){e=new QI(t,e);this.au=this.au.add(e),this.uu=this.uu.add(e)},XI.prototype.lu=function(t,e){var n=this;t.forEach(function(t){return n.Qo(t,e)})},XI.prototype.Wo=function(t,e){this._u(new QI(t,e))},XI.prototype.fu=function(t,e){var n=this;t.forEach(function(t){return n.Wo(t,e)})},XI.prototype.du=function(t){var e=this,n=new dy(new ly([])),r=new QI(n,t),t=new QI(n,t+1),i=[];return this.uu.Nt([r,t],function(t){e._u(t),i.push(t.key)}),i},XI.prototype.wu=function(){var e=this;this.au.forEach(function(t){return e._u(t)})},XI.prototype._u=function(t){this.au=this.au.delete(t),this.uu=this.uu.delete(t)},XI.prototype.Tu=function(t){var e=new dy(new ly([])),n=new QI(e,t),t=new QI(e,t+1),r=tg();return this.uu.Nt([n,t],function(t){r=r.add(t.key)}),r},XI.prototype.so=function(t){var e=new QI(t,0),e=this.au.Ft(e);return null!==e&&t.isEqual(e.key)},XI),QI=(YI.cu=function(t,e){return dy.V(t.key,e.key)||Jv(t.Eu,e.Eu)},YI.hu=function(t,e){return Jv(t.Eu,e.Eu)||dy.V(t.key,e.key)},YI);function YI(t,e){this.key=t,this.Eu=e}function XI(){this.au=new Gy(QI.cu),this.uu=new Gy(QI.hu)}function JI(t,e){return"firestore_clients_"+t+"_"+e}function $I(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.Js()&&(n+="_"+e.uid),n}function ZI(t,e){return"firestore_targets_"+t+"_"+e}var tT=(wT.Iu=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new uy(r.error.code,r.error.message)),i?new wT(t,e,r.state,o):(Kv("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},wT.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},wT),eT=(bT.Iu=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new uy(n.error.code,n.error.message)),r?new bT(t,n.state,i):(Kv("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},bT.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},bT),nT=(_T.Iu=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=eg,o=0;r&&o<n.activeTargetIds.length;++o)r=Sy(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new _T(t,i):(Kv("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},_T),rT=(mT.Iu=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new mT(e.clientId,e.onlineState):(Kv("SharedClientState","Failed to parse online state: "+t),null)},mT),iT=(gT.prototype.Au=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},gT.prototype.Ru=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},gT.prototype.mu=function(){var t={activeTargetIds:this.activeTargetIds.O(),updateTimeMs:Date.now()};return JSON.stringify(t)},gT),oT=(yT.kn=function(t){return!(!t||!t.localStorage)},yT.prototype.start=function(){return _o(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return bo(this,function(t){switch(t.label){case 0:return[4,this.gu.Ca()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this.Pu&&(i=this.getItem(JI(this.persistenceKey,r)))&&(o=nT.Iu(r,i))&&(this.pu=this.pu.rt(o.clientId,o));for(this.Ou(),(s=this.storage.getItem(this.xu))&&(a=this.Mu(s))&&this.ku(a),u=0,c=this.vu;u<c.length;u++)h=c[u],this.yu(h);return this.vu=[],this.window.addEventListener("unload",function(){return l.pa()}),this.yr=!0,[2]}})})},yT.prototype.er=function(t){this.setItem(this.Su,JSON.stringify(t))},yT.prototype.$u=function(){return this.Lu(this.pu)},yT.prototype.Bu=function(n){var r=!1;return this.pu.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},yT.prototype.qu=function(t){this.Uu(t,"pending")},yT.prototype.Qu=function(t,e,n){this.Uu(t,e,n),this.Ku(t)},yT.prototype.Wu=function(t){var e,n="not-current";return this.Bu(t)&&(!(e=this.storage.getItem(ZI(this.persistenceKey,t)))||(e=eT.Iu(t,e))&&(n=e.state)),this.ju.Au(t),this.Ou(),n},yT.prototype.Gu=function(t){this.ju.Ru(t),this.Ou()},yT.prototype.zu=function(t){return this.ju.activeTargetIds.has(t)},yT.prototype.Hu=function(t){this.removeItem(ZI(this.persistenceKey,t))},yT.prototype.Ju=function(t,e,n){this.Yu(t,e,n)},yT.prototype.Xu=function(t,e,n){var r=this;e.forEach(function(t){r.Ku(t)}),this.currentUser=t,n.forEach(function(t){r.qu(t)})},yT.prototype.Zu=function(t){this.th(t)},yT.prototype.eh=function(){this.nh()},yT.prototype.pa=function(){this.yr&&(this.window.removeEventListener("storage",this.Vu),this.removeItem(this.bu),this.yr=!1)},yT.prototype.getItem=function(t){var e=this.storage.getItem(t);return Wv("SharedClientState","READ",t,e),e},yT.prototype.setItem=function(t,e){Wv("SharedClientState","SET",t,e),this.storage.setItem(t,e)},yT.prototype.removeItem=function(t){Wv("SharedClientState","REMOVE",t),this.storage.removeItem(t)},yT.prototype.yu=function(t){var e=this,o=t;if(o.storageArea===this.storage){if(Wv("SharedClientState","EVENT",o.key,o.newValue),o.key===this.bu)return void Kv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ln.Ss(function(){return _o(e,void 0,void 0,function(){var e,n,r,i;return bo(this,function(t){if(this.yr){if(null!==o.key)if(this.Du.test(o.key)){if(null==o.newValue)return e=this.sh(o.key),[2,this.ih(e,null)];if(e=this.rh(o.key,o.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Cu.test(o.key)){if(null!==o.newValue&&(n=this.oh(o.key,o.newValue)))return[2,this.ah(n)]}else if(this.Nu.test(o.key)){if(null!==o.newValue&&(r=this.uh(o.key,o.newValue)))return[2,this.hh(r)]}else if(o.key===this.xu){if(null!==o.newValue&&(i=this.Mu(o.newValue)))return[2,this.ku(i)]}else if(o.key===this.Su)(i=function(t){var e=pw.nr;if(null!=t)try{var n=JSON.parse(t);Qv("number"==typeof n),e=n}catch(t){Kv("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==pw.nr&&this.Xi(i);else if(o.key===this.Fu)return[2,this.gu.lh()]}else this.vu.push(o);return[2]})})})}},Object.defineProperty(yT.prototype,"ju",{get:function(){return this.pu.get(this.Pu)},enumerable:!1,configurable:!0}),yT.prototype.Ou=function(){this.setItem(this.bu,this.ju.mu())},yT.prototype.Uu=function(t,e,n){n=new tT(this.currentUser,t,e,n),t=$I(this.persistenceKey,this.currentUser,t);this.setItem(t,n.mu())},yT.prototype.Ku=function(t){t=$I(this.persistenceKey,this.currentUser,t);this.removeItem(t)},yT.prototype.th=function(t){t={clientId:this.Pu,onlineState:t};this.storage.setItem(this.xu,JSON.stringify(t))},yT.prototype.Yu=function(t,e,n){var r=ZI(this.persistenceKey,t),n=new eT(t,e,n);this.setItem(r,n.mu())},yT.prototype.nh=function(){this.setItem(this.Fu,"value-not-used")},yT.prototype.sh=function(t){t=this.Du.exec(t);return t?t[1]:null},yT.prototype.rh=function(t,e){t=this.sh(t);return nT.Iu(t,e)},yT.prototype.oh=function(t,e){var n=this.Cu.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return tT.Iu(new Hb(n),t,e)},yT.prototype.uh=function(t,e){t=this.Nu.exec(t),t=Number(t[1]);return eT.Iu(t,e)},yT.prototype.Mu=function(t){return rT.Iu(t)},yT.prototype.ah=function(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.gu._h(e.batchId,e.state,e.error)]:(Wv("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},yT.prototype.hh=function(t){return this.gu.fh(t.targetId,t.state,t.error)},yT.prototype.ih=function(t,e){var n=this,r=e?this.pu.rt(t,e):this.pu.remove(t),i=this.Lu(this.pu),o=this.Lu(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.gu.dh(s,a).then(function(){n.pu=r})},yT.prototype.ku=function(t){this.pu.get(t.clientId)&&this.Oc(t.onlineState)},yT.prototype.Lu=function(t){var n=eg;return t.forEach(function(t,e){n=n.Ot(e.activeTargetIds)}),n},yT),sT=(vT.prototype.qu=function(t){},vT.prototype.Qu=function(t,e,n){},vT.prototype.Wu=function(t){return this.wh.Au(t),this.Th[t]||"not-current"},vT.prototype.Ju=function(t,e,n){this.Th[t]=e},vT.prototype.Gu=function(t){this.wh.Ru(t)},vT.prototype.zu=function(t){return this.wh.activeTargetIds.has(t)},vT.prototype.Hu=function(t){delete this.Th[t]},vT.prototype.$u=function(){return this.wh.activeTargetIds},vT.prototype.Bu=function(t){return this.wh.activeTargetIds.has(t)},vT.prototype.start=function(){return this.wh=new iT,Promise.resolve()},vT.prototype.Xu=function(t,e,n){},vT.prototype.Zu=function(t){},vT.prototype.pa=function(){},vT.prototype.er=function(t){},vT.prototype.eh=function(){},vT),aT=function(t){this.key=t},uT=function(t){this.key=t},cT=(Object.defineProperty(dT.prototype,"Ph",{get:function(){return this.Eh},enumerable:!1,configurable:!0}),dT.prototype.gh=function(t,e){var s=this,a=e?e.Vh:new rg,u=(e||this).Rh,c=(e||this).Qt,h=u,l=!1,f=w_(this.query)&&u.size===this.query.limit?u.last():null,p=E_(this.query)&&u.size===this.query.limit?u.first():null;if(t.ut(function(t,e){var n=u.get(t),r=(r=e instanceof f_?e:null)&&(x_(s.query,r)?r:null),i=!!n&&s.Qt.has(n.key),o=!!r&&(r.Je||s.Qt.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.yh(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.Ah(r,f)||p&&s.Ah(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),w_(this.query)||E_(this.query))for(;h.size>this.query.limit;){var n=w_(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{Rh:h,Vh:a,ph:l,Qt:c}},dT.prototype.yh=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},dT.prototype.bi=function(t,e,n){var o=this,r=this.Rh;this.Rh=t.Rh,this.Qt=t.Qt;var i=t.Vh.qt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.Ah(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zv()}}var r,i}),this.bh(n);var s=e?this.Sh():[],n=0===this.mh.size&&this.Zt?1:0,e=n!==this.Ih;return this.Ih=n,0!==i.length||e?{snapshot:new ig(this.query,t.Rh,r,i,t.Qt,0==n,e,!1),Dh:s}:{Dh:s}},dT.prototype.Bs=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.bi({Rh:this.Rh,Vh:new rg,Qt:this.Qt,ph:!1},!1)):{Dh:[]}},dT.prototype.Ch=function(t){return!this.Eh.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).Je},dT.prototype.bh=function(t){var e=this;t&&(t.te.forEach(function(t){return e.Eh=e.Eh.add(t)}),t.ee.forEach(function(t){}),t.ne.forEach(function(t){return e.Eh=e.Eh.delete(t)}),this.Zt=t.Zt)},dT.prototype.Sh=function(){var e=this;if(!this.Zt)return[];var n=this.mh;this.mh=tg(),this.Rh.forEach(function(t){e.Ch(t.key)&&(e.mh=e.mh.add(t.key))});var r=[];return n.forEach(function(t){e.mh.has(t)||r.push(new uT(t))}),this.mh.forEach(function(t){n.has(t)||r.push(new aT(t))}),r},dT.prototype.Nh=function(t){this.Eh=t.Xa,this.mh=tg();t=this.gh(t.documents);return this.bi(t,!0)},dT.prototype.xh=function(){return ig.jt(this.query,this.Rh,this.Qt,0===this.Ih)},dT),hT=function(t,e,n){this.query=t,this.targetId=e,this.view=n},lT=function(t){this.key=t,this.Fh=!1},fT=(Object.defineProperty(pT.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),pT);function pT(t,e,n,r,i,o){this.Kc=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new sy(R_,P_),this.qh=new Map,this.Uh=[],this.Qh=new jy(dy.V),this.Kh=new Map,this.Wh=new zI,this.jh={},this.Gh=new Map,this.zh=ME.vo(),this.onlineState="Unknown",this.Hh=void 0}function dT(t,e){this.query=t,this.Eh=e,this.Ih=null,this.Zt=!1,this.mh=tg(),this.Qt=tg(),this.Ah=L_(t),this.Rh=new ng(this.Ah)}function vT(){this.wh=new iT,this.Th={},this.Oc=null,this.Xi=null}function yT(t,e,n,r,i){this.window=t,this.ln=e,this.persistenceKey=n,this.Pu=r,this.gu=null,this.Oc=null,this.Xi=null,this.Vu=this.yu.bind(this),this.pu=new jy(Jv),this.yr=!1,this.vu=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.bu=JI(this.persistenceKey,this.Pu),this.Su="firestore_sequence_number_"+this.persistenceKey,this.pu=this.pu.rt(this.Pu,new iT),this.Du=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Cu=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.Nu=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.xu="firestore_online_state_"+this.persistenceKey,this.Fu="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.Vu)}function gT(){this.activeTargetIds=eg}function mT(t,e){this.clientId=t,this.onlineState=e}function _T(t,e){this.clientId=t,this.activeTargetIds=e}function bT(t,e,n){this.targetId=t,this.state=e,this.error=n}function wT(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function ET(i,o,s,a){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return i.Yh=function(t,e,n){return function(r,i,o,s){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return(e=i.view.gh(o)).ph?[4,hI(r.Kc,i.query,!1).then(function(t){t=t.documents;return i.view.gh(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.Gt.get(i.targetId),n=i.view.bi(e,r.Jh,n),[2,(RT(r,i.targetId,n.Dh),n.snapshot)]}})})}(i,t,e,n)},[4,hI(i.Kc,o,!0)];case 1:return n=t.sent(),r=new cT(o,n.Xa),e=r.gh(n.documents),n=sg.Xt(s,a&&"Offline"!==i.onlineState),n=r.bi(e,i.Jh,n),RT(i,s,n.Dh),r=new hT(o,s,r),[2,(i.Bh.set(o,r),i.qh.has(s)?i.qh.get(s).push(o):i.qh.set(s,[o]),n.snapshot)]}})})}function IT(f,p,d){return _o(this,void 0,void 0,function(){var s,a;return bo(this,function(t){switch(t.label){case 0:a=qT(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.Kc,u=p,h=i,l=cy.now(),o=u.reduce(function(t,e){return t.add(e.key)},tg()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Ga.Li(a,o).next(function(t){c=t;for(var s,e=[],n=0,r=u;n<r.length;n++){var i=r[n],o=(s=i,o=c.get(i.key),s instanceof Xm?function(t){for(var e=null,n=0,r=s.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof f_?t.field(i.field):void 0,o=dm(i.transform,o||null);null!=o&&(e=(null==e?new i_:e).set(i.field,o))}return e?e.Ye():null}(o):null);null!=o&&e.push(new Hm(i.key,o,function s(t){var a=[];return ey(t.fields||{},function(t,e){var n=new py([t]);if(Ug(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new Pm(a)}(o.proto.mapValue),Lm.exists(!0)))}return h.xi.Qr(a,l,e,u)})}).then(function(t){var e=t.wi(c);return{batchId:t.batchId,Ii:e}}))];case 2:return s=t.sent(),a.kh.qu(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.jh[e.currentUser.Ys()])||new jy(Jv)).rt(n,r),e.jh[e.currentUser.Ys()]=i,[4,xT(a,s.Ii)];case 3:return t.sent(),[4,qI(a.Oh)];case 4:return t.sent(),[3,6];case 5:return a=t.sent(),a=Ub(a,"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}function TT(r,i){return _o(this,void 0,void 0,function(){var n,e;return bo(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,aI(n.Kc,i)];case 2:return e=t.sent(),i.Gt.forEach(function(t,e){e=n.Kh.get(e);e&&(Qv(t.te.size+t.ee.size+t.ne.size<=1),0<t.te.size?e.Fh=!0:0<t.ee.size?Qv(e.Fh):0<t.ne.size&&(Qv(e.Fh),e.Fh=!1))}),[4,xT(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,dI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function ST(t,n,e){var r,t=t;(t.Jh&&0===e||!t.Jh&&1===e)&&(r=[],t.Bh.forEach(function(t,e){e=e.view.Bs(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Bs(i)&&(o=!0)}),o&&Wb(t)}(t.Mh,n),r.length&&t.Lh.Rc(r),t.onlineState=n,t.Jh&&t.kh.Zu(n))}function CT(s,a,u){return _o(this,void 0,void 0,function(){var n,o;return bo(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Kc,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.xi.Wr(e,r).next(function(t){return Qv(null!==t),n=t.keys(),i.xi.Yr(e,t)}).next(function(){return i.xi.no(e)}).next(function(){return i.Ga.Li(e,n)})}))];case 2:return o=t.sent(),kT(n,a,u),AT(n,a),n.kh.Qu(a,"rejected",u),[4,xT(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,dI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function NT(o,s){return _o(this,void 0,void 0,function(){var n,r,i;return bo(this,function(t){switch(t.label){case 0:MI((n=o).Oh)||Wv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.Kc).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.xi.zr(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Gh.get(r)||[]).push(s),n.Gh.set(r,i),[3,4]);case 3:return i=t.sent(),i=Ub(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function AT(t,e){(t.Gh.get(e)||[]).forEach(function(t){t.resolve()}),t.Gh.delete(e)}function kT(t,e,n){var r=t,i=r.jh[r.currentUser.Ys()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.jh[r.currentUser.Ys()]=i)}function OT(e,t,n){void 0===n&&(n=null),e.kh.Gu(t);for(var r=0,i=e.qh.get(t);r<i.length;r++){var o=i[r];e.Bh.delete(o),n&&e.Lh.Xh(o,n)}e.qh.delete(t),e.Jh&&e.Wh.du(t).forEach(function(t){e.Wh.so(t)||PT(e,t)})}function PT(t,e){var n=t.Qh.get(e);null!==n&&(PI(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),DT(t))}function RT(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof aT?(t.Wh.Qo(o.key,e),function(t,e){e=e.key;t.Qh.get(e)||(Wv("SyncEngine","New document in limbo: "+e),t.Uh.push(e),DT(t))}(t,o)):o instanceof uT?(Wv("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.Wo(o.key,e),t.Wh.so(o.key)||PT(t,o.key)):zv()}}function DT(t){for(;0<t.Uh.length&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new lT(e)),t.Qh=t.Qh.rt(e,n),OI(t.Oh,new Ly(N_(b_(e.path)),n,2,pw.nr))}}function xT(e,s,a){return _o(this,void 0,void 0,function(){var n,r,i,o;return bo(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Bh.T()?[3,3]:(n.Bh.forEach(function(t,e){o.push(n.Yh(e,s,a).then(function(t){t&&(n.Jh&&n.kh.Ju(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=fw.Yi(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.Lh.Rc(r),[4,function(u,c){return _o(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return bo(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return vb.forEach(c,function(e){return vb.forEach(e.Hi,function(t){return r.persistence.Lr.Qo(n,e.targetId,t)}).next(function(){return vb.forEach(e.Ji,function(t){return r.persistence.Lr.Wo(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!Tb(e=t.sent()))throw e;return Wv("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.Qa.get(o),a=s.et,a=s.it(a),r.Qa=r.Qa.rt(o,a));return[2]}})})}(n.Kc,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function LT(i,o){return _o(this,void 0,void 0,function(){var n,r;return bo(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Wv("SyncEngine","User change. New user:",o.Ys()),[4,iI(n.Kc,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Gh.forEach(function(t){t.forEach(function(t){t.reject(new uy(ay.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Gh.clear(),n.kh.Xu(o,r.Ja,r.Ya),[4,xT(n,r.Ha)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function MT(a,u,c,h){return _o(this,void 0,void 0,function(){var o,s;return bo(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).Kc,n=u,i=(r=e).xi,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.jr(e,n).next(function(t){return t?r.Ga.Li(e,t):vb.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,qI(o.Oh)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(kT(o,u,h||null),AT(o,u),o.Kc.xi.Zr(u)):zv(),t.label=4;case 4:return[4,xT(o,s)];case 5:return t.sent(),[3,7];case 6:Wv("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function FT(h,l){return _o(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return bo(this,function(t){switch(t.label){case 0:return VT(r=h),qT(r),!0!==l||!0===r.Hh?[3,3]:(e=r.kh.$u(),[4,UT(r,e.O())]);case 1:return i=t.sent(),r.Hh=!0,[4,KI(r.Oh,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],OI(r.Oh,a);return[3,7];case 3:return!1!==l||!1===r.Hh?[3,7]:(u=[],c=Promise.resolve(),r.qh.forEach(function(t,e){r.kh.zu(e)?u.push(e):c=c.then(function(){return OT(r,e),cI(r.Kc,e,!0)}),PI(r.Oh,e)}),[4,c]);case 4:return t.sent(),[4,UT(r,u)];case 5:return t.sent(),(n=r).Kh.forEach(function(t,e){PI(n.Oh,e)}),n.Wh.wu(),n.Kh=new Map,n.Qh=new jy(dy.V),r.Hh=!1,[4,KI(r.Oh,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function UT(p,d){return _o(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return bo(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.qh.get(s))&&0!==u.length?[4,uI(e.Kc,N_(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.Bh.get(l),[4,function(r,i){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,hI((e=r).Kc,i.query,!0)];case 1:return n=t.sent(),n=i.view.Nh(n),[2,(e.Jh&&RT(e,i.targetId,n.Dh),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,lI(e.Kc,s)];case 8:return f=t.sent(),[4,uI(e.Kc,f)];case 9:return a=t.sent(),[4,ET(e,jT(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.Lh.Rc(r),n)]}})})}function jT(t){return __(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function VT(t){return t.Oh.jc.nu=TT.bind(null,t),t.Oh.jc.Be=function(t,e){var n=t;if((t=n.Kh.get(e))&&t.Fh)return tg().add(t.key);var r=tg();if(!(e=n.qh.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Bh.get(s),r=r.Ot(s.view.Ph);return r}.bind(null,t),t.Oh.jc.eu=function(o,s,a){return _o(this,void 0,void 0,function(){var e,n,r,i;return bo(this,function(t){switch(t.label){case 0:return(e=o).kh.Ju(s,"rejected",a),i=e.Kh.get(s),(n=i&&i.key)?(r=(r=new jy(dy.V)).rt(n,new p_(n,hy.min())),i=tg().add(n),i=new og(hy.min(),new Map,new Gy(Jv),r,i),[4,TT(e,i)]):[3,2];case 1:return t.sent(),e.Qh=e.Qh.remove(n),e.Kh.delete(s),DT(e),[3,4];case 2:return[4,cI(e.Kc,s,!1).then(function(){return OT(e,s,a)}).catch(dI)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.Lh.Rc=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,a=n.queries.get(a);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].qs(s)&&(r=!0);a.ks=s}}r&&Wb(n)}.bind(null,t.Mh),t.Lh.Xh=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.Mh),t}function qT(t){return t.Oh.jc.su=function(i,o){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,oI(e.Kc,o)];case 2:return r=t.sent(),kT(e,n,null),AT(e,n),e.kh.Qu(n,"acknowledged"),[4,xT(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,dI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.Oh.jc.iu=CT.bind(null,t),t}var BT,WT,KT,HT,GT,zT=(PS.prototype.za=function(t){this.Zh=t},PS.prototype.Ui=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.rn.length||1===r.rn.length&&r.rn[0].field.B())||i.isEqual(hy.min())?this.tl(e,r):this.Zh.Li(e,o).next(function(t){var n=s.el(r,t);return(w_(r)||E_(r))&&s.ph(r.limitType,n,o,i)?s.tl(e,r):(Bv()<=Ns.DEBUG&&Wv("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),D_(r)),s.Zh.Ui(e,r,i).next(function(e){return n.forEach(function(t){e=e.rt(t.key,t)}),e}))})},PS.prototype.el=function(n,t){var r=new Gy(L_(n));return t.forEach(function(t,e){e instanceof f_&&x_(n,e)&&(r=r.add(e))}),r},PS.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.A(r))},PS.prototype.tl=function(t,e){return Bv()<=Ns.DEBUG&&Wv("IndexFreeQueryEngine","Using full collection scan to execute query:",D_(e)),this.Zh.Ui(t,e,hy.min())},PS),QT=(OS.prototype.Ur=function(t){return vb.resolve(0===this.xi.length)},OS.prototype.Qr=function(t,e,n,r){var i=this.nl;this.nl++,0<this.xi.length&&this.xi[this.xi.length-1];n=new Zb(i,e,n,r);this.xi.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.sl=this.sl.add(new QI(a.key,i)),this.Fi.Kr(t,a.key.path.S())}return vb.resolve(n)},OS.prototype.Wr=function(t,e){return vb.resolve(this.il(e))},OS.prototype.Gr=function(t,e){e+=1,e=this.rl(e),e=e<0?0:e;return vb.resolve(this.xi.length>e?this.xi[e]:null)},OS.prototype.zr=function(){return vb.resolve(0===this.xi.length?-1:this.nl-1)},OS.prototype.Hr=function(t){return vb.resolve(this.xi.slice())},OS.prototype.Mi=function(t,e){var n=this,r=new QI(e,0),e=new QI(e,Number.POSITIVE_INFINITY),i=[];return this.sl.Nt([r,e],function(t){t=n.il(t.Eu);i.push(t)}),vb.resolve(i)},OS.prototype.qi=function(t,e){var n=this,r=new Gy(Jv);return e.forEach(function(t){var e=new QI(t,0),t=new QI(t,Number.POSITIVE_INFINITY);n.sl.Nt([e,t],function(t){r=r.add(t.Eu)})}),vb.resolve(this.ol(r))},OS.prototype.Gi=function(t,e){var n=e.path,r=n.length+1,e=n;dy.G(e)||(e=e.child(""));var e=new QI(new dy(e),0),i=new Gy(Jv);return this.sl.xt(function(t){var e=t.key.path;return!!n.N(e)&&(e.length===r&&(i=i.add(t.Eu)),!0)},e),vb.resolve(this.ol(i))},OS.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){t=e.il(t);null!==t&&n.push(t)}),n},OS.prototype.Yr=function(n,r){var i=this;Qv(0===this.al(r.batchId,"removed")),this.xi.shift();var o=this.sl;return vb.forEach(r.mutations,function(t){var e=new QI(t.key,r.batchId);return o=o.delete(e),i.Lr.eo(n,t.key)}).next(function(){i.sl=o})},OS.prototype.Zr=function(t){},OS.prototype.so=function(t,e){var n=new QI(e,0),n=this.sl.Ft(n);return vb.resolve(e.isEqual(n&&n.key))},OS.prototype.no=function(t){return this.xi.length,vb.resolve()},OS.prototype.al=function(t,e){return this.rl(t)},OS.prototype.rl=function(t){return 0===this.xi.length?0:t-this.xi[0].batchId},OS.prototype.il=function(t){t=this.rl(t);return t<0||t>=this.xi.length?null:this.xi[t]},OS),YT=(kS.prototype.Ri=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.cl(e);return this.docs=this.docs.rt(r,{gi:e,size:i,readTime:n}),this.size+=i-o,this.Fi.Kr(t,r.path.S())},kS.prototype.Vi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},kS.prototype.yi=function(t,e){e=this.docs.get(e);return vb.resolve(e?e.gi:null)},kS.prototype.getEntries=function(t,e){var n=this,r=Qy;return e.forEach(function(t){var e=n.docs.get(t);r=r.rt(t,e?e.gi:null)}),vb.resolve(r)},kS.prototype.Ui=function(t,e,n){for(var r=Jy,i=new dy(e.path.child("")),o=this.docs._t(i);o.It();){var s=o.Et(),a=s.key,u=s.value,s=u.gi,u=u.readTime;if(!e.path.N(a.path))break;u.A(n)<=0||s instanceof f_&&x_(e,s)&&(r=r.rt(s.key,s))}return vb.resolve(r)},kS.prototype.ul=function(t,e){return vb.forEach(this.docs,function(t){return e(t)})},kS.prototype._o=function(t){return new XT(this)},kS.prototype.wo=function(t){return vb.resolve(this.size)},kS),XT=(go(AS,GT=Dr),AS.prototype.bi=function(n){var r=this,i=[];return this.Ii.forEach(function(t,e){e&&e.gi?i.push(r.To.Ri(n,e.gi,r.Ai(t))):r.To.Vi(t)}),vb.xn(i)},AS.prototype.pi=function(t,e){return this.To.yi(t,e)},AS.prototype.vi=function(t,e){return this.To.getEntries(t,e)},AS),JT=(NS.prototype.De=function(t,n){return this.hl.forEach(function(t,e){return n(e)}),vb.resolve()},NS.prototype.Co=function(t){return vb.resolve(this.lastRemoteSnapshotVersion)},NS.prototype.No=function(t){return vb.resolve(this.ll)},NS.prototype.bo=function(t){return this.highestTargetId=this.fl.next(),vb.resolve(this.highestTargetId)},NS.prototype.xo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),vb.resolve()},NS.prototype.Oo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new ME(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},NS.prototype.Fo=function(t,e){return this.Oo(e),this.targetCount+=1,vb.resolve()},NS.prototype.ko=function(t,e){return this.Oo(e),vb.resolve()},NS.prototype.$o=function(t,e){return this.hl.delete(e.target),this._l.du(e.targetId),--this.targetCount,vb.resolve()},NS.prototype.Nr=function(n,r,i){var o=this,s=0,a=[];return this.hl.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.hl.delete(t),a.push(o.Lo(n,e.targetId)),s++)}),vb.xn(a).next(function(){return s})},NS.prototype.Bo=function(t){return vb.resolve(this.targetCount)},NS.prototype.qo=function(t,e){e=this.hl.get(e)||null;return vb.resolve(e)},NS.prototype.Uo=function(t,e,n){return this._l.lu(e,n),vb.resolve()},NS.prototype.Ko=function(e,t,n){this._l.fu(t,n);var r=this.persistence.Lr,i=[];return r&&t.forEach(function(t){i.push(r.eo(e,t))}),vb.xn(i)},NS.prototype.Lo=function(t,e){return this._l.du(e),vb.resolve()},NS.prototype.jo=function(t,e){e=this._l.Tu(e);return vb.resolve(e)},NS.prototype.so=function(t,e){return vb.resolve(this._l.so(e))},NS),$T=(CS.prototype.mo=function(t,e){return vb.resolve(this.dl.get(e))},CS.prototype.Ao=function(t,e){return this.dl.set(e.id,{id:e.id,version:e.version,createTime:zg(e.createTime)}),vb.resolve()},CS.prototype.Ro=function(t,e){return vb.resolve(this.wl.get(e))},CS.prototype.Po=function(t,e){return this.wl.set(e.name,{name:(e=e).name,query:qw(e.bundledQuery),readTime:zg(e.readTime)}),vb.resolve()},CS),ZT=(SS.prototype.start=function(){return Promise.resolve()},SS.prototype.pa=function(){return this.Yo=!1,Promise.resolve()},Object.defineProperty(SS.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),SS.prototype.fa=function(){},SS.prototype.da=function(){},SS.prototype.Oa=function(){return this.Fi},SS.prototype.Na=function(t){var e=this.Tl[t.Ys()];return e||(e=new QT(this.Fi,this.Lr),this.Tl[t.Ys()]=e),e},SS.prototype.xa=function(){return this.ra},SS.prototype.Fa=function(){return this.Ni},SS.prototype.Ma=function(){return this.oa},SS.prototype.runTransaction=function(t,e,n){var r=this;Wv("MemoryPersistence","Starting transaction:",t);var i=new tS(this.Jo.next());return this.Lr.Il(),n(i).next(function(t){return r.Lr.ml(i).next(function(){return t})}).Cn().then(function(t){return i.Ci(),t})},SS.prototype.Al=function(e,n){return vb.Fn(Object.values(this.Tl).map(function(t){return function(){return t.so(e,n)}}))},SS),tS=(go(TS,HT=M),TS),eS=(IS.gl=function(t){return new IS(t)},Object.defineProperty(IS.prototype,"Vl",{get:function(){if(this.Pl)return this.Pl;throw zv()},enumerable:!1,configurable:!0}),IS.prototype.Qo=function(t,e,n){return this.Rl.Qo(n,e),this.Vl.delete(n.toString()),vb.resolve()},IS.prototype.Wo=function(t,e,n){return this.Rl.Wo(n,e),this.Vl.add(n.toString()),vb.resolve()},IS.prototype.eo=function(t,e){return this.Vl.add(e.toString()),vb.resolve()},IS.prototype.removeTarget=function(t,e){var n=this;this.Rl.du(e.targetId).forEach(function(t){return n.Vl.add(t.toString())});var r=this.persistence.xa();return r.jo(t,e.targetId).next(function(t){t.forEach(function(t){return n.Vl.add(t.toString())})}).next(function(){return r.$o(t,e)})},IS.prototype.Il=function(){this.Pl=new Set},IS.prototype.ml=function(n){var r=this,i=this.persistence.Fa()._o();return vb.forEach(this.Vl,function(t){var e=dy.K(t);return r.yl(n,e).next(function(t){t||i.Vi(e)})}).next(function(){return r.Pl=null,i.apply(n)})},IS.prototype.qa=function(t,e){var n=this;return this.yl(t,e).next(function(t){t?n.Vl.delete(e.toString()):n.Vl.add(e.toString())})},IS.prototype.El=function(t){return 0},IS.prototype.yl=function(t,e){var n=this;return vb.Fn([function(){return vb.resolve(n.Rl.so(e))},function(){return n.persistence.xa().so(t,e)},function(){return n.persistence.Al(t,e)}])},IS),nS=(ES.prototype.mc=function(t){this.bl=t},ES.prototype.dc=function(t){this.Sl=t},ES.prototype.onMessage=function(t){this.Dl=t},ES.prototype.close=function(){this.vl()},ES.prototype.send=function(t){this.pl(t)},ES.prototype.Cl=function(){this.bl()},ES.prototype.Nl=function(t){this.Sl(t)},ES.prototype.xl=function(t){this.Dl(t)},ES),rS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},iS=(wS.prototype.xc=function(e,t,n,r){var i=this.kl(e,t);Wv("RestConnection","Sending: ",i,n);t={};return this.$l(t,r),this.Ll(e,i,t,n).then(function(t){return Wv("RestConnection","Received: ",t),t},function(t){throw Hv("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},wS.prototype.Fc=function(t,e,n,r){return this.xc(t,e,n,r)},wS.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.2",t["Content-Type"]="text/plain",e)for(var n in e.ti)e.ti.hasOwnProperty(n)&&(t[n]=e.ti[n])},wS.prototype.kl=function(t,e){t=rS[t];return this.Ol+"/v1/"+e+":"+t},go(bS,KT=wS),bS.prototype.Ll=function(o,e,s,a){return new Promise(function(n,r){var i=new Fv;i.listenOnce(Lv.COMPLETE,function(){try{switch(i.getLastErrorCode()){case xv.NO_ERROR:var t=i.getResponseJson();Wv("Connection","XHR received:",JSON.stringify(t)),n(t);break;case xv.TIMEOUT:Wv("Connection",'RPC "'+o+'" timed out'),r(new uy(ay.DEADLINE_EXCEEDED,"Request time out"));break;case xv.HTTP_ERROR:var e=i.getStatus();Wv("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace("_","-"),e=0<=Object.values(ay).indexOf(e)?e:ay.UNKNOWN,r(new uy(e,t.message))):r(new uy(ay.UNKNOWN,"Server responded with status "+i.getStatus())):r(new uy(ay.UNAVAILABLE,"Connection failed."));break;default:zv()}}finally{Wv("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},bS.prototype.Ac=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new kv,t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(t.initMessageHeaders,e),Mo()||Uo()||0<=Lo().indexOf("Electron/")||(0<=(e=Lo()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=Lo().indexOf("MSAppHost/")||Fo()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");Wv("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),i=!1,s=!1,a=new nS({pl:function(t){s?Wv("Connection","Not sending because WebChannel is closed:",t):(i||(Wv("Connection","Opening WebChannel transport."),o.open(),i=!0),Wv("Connection","WebChannel sending:",t),o.send(t))},vl:function(){return o.close()}}),t=function(t,e){o.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(Mv.EventType.OPEN,function(){s||Wv("Connection","WebChannel transport opened.")}),t(Mv.EventType.CLOSE,function(){s||(s=!0,Wv("Connection","WebChannel transport closed"),a.Nl())}),t(Mv.EventType.ERROR,function(t){s||(s=!0,Hv("Connection","WebChannel transport errored:",t),a.Nl(new uy(ay.UNAVAILABLE,"The operation could not be completed")))}),t(Mv.EventType.MESSAGE,function(t){var e,n,r,i;s||(Qv(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Wv("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=xy[r];if(void 0!==t)return Uy(t)}(),i=n.message,void 0===t&&(t=ay.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,a.Nl(new uy(t,i)),o.close()):(Wv("Connection","WebChannel received:",e),a.xl(e)))}),setTimeout(function(){a.Cl()},0),a},bS),oS=(_S.prototype.Xc=function(t){this.Kl.push(t)},_S.prototype.pa=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},_S.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},_S.prototype.ql=function(){Wv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},_S.prototype.Ql=function(){Wv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},_S.kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},_S),sS=(mS.prototype.Xc=function(t){},mS.prototype.pa=function(){},mS),aS=(gS.prototype.initialize=function(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return this.serializer=uw(e.Fl.t),this.kh=this.jl(e),this.persistence=this.Gl(e),[4,this.persistence.start()];case 1:return t.sent(),this.zl=this.Hl(e),this.Kc=this.Jl(e),[2]}})})},gS.prototype.Hl=function(t){return null},gS.prototype.Jl=function(t){return rI(this.persistence,new zT,t.Yl,this.serializer)},gS.prototype.Gl=function(t){return new ZT(eS.gl,this.serializer)},gS.prototype.jl=function(t){return new sT},gS.prototype.terminate=function(){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.pa()];case 1:return t.sent(),[4,this.persistence.pa()];case 2:return t.sent(),[2]}})})},gS),uS=(go(yS,WT=aS),yS.prototype.initialize=function(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return[4,WT.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,pI(this.Kc)];case 2:return t.sent(),[4,this.Xl.initialize(this,e)];case 3:return t.sent(),[4,qT(this.Xl.gu)];case 4:return t.sent(),[4,qI(this.Xl.Oh)];case 5:return t.sent(),[2]}})})},yS.prototype.Jl=function(t){return rI(this.persistence,new zT,t.Yl,this.serializer)},yS.prototype.Hl=function(t){var e=this.persistence.Lr.Rr;return new Tw(e,t.rs)},yS.prototype.Gl=function(t){var e=tI(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?ww.Tr(this.cacheSizeBytes):ww.mr;return new GE(this.synchronizeTabs,e,t.clientId,n,t.rs,Rb(),Db(),this.serializer,this.kh,!!this.forceOwnership)},yS.prototype.jl=function(t){return new sT},yS),cS=(go(vS,BT=uS),vS.prototype.initialize=function(r){return _o(this,void 0,void 0,function(){var e,n=this;return bo(this,function(t){switch(t.label){case 0:return[4,BT.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Xl.gu,this.kh instanceof oT?(this.kh.gu={_h:MT.bind(null,e),fh:function(i,o,s,a){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return(e=i).Hh?(Wv("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.qh.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,fI(e.Kc)];case 3:return n=t.sent(),r=og.Yt(o,"current"===s),[4,xT(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,cI(e.Kc,o,!0)];case 6:return t.sent(),OT(e,o,a),[3,8];case 7:zv(),t.label=8;case 8:return[2]}})})}.bind(null,e),dh:function(c,h,l){return _o(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return bo(this,function(t){switch(t.label){case 0:if(!(n=VT(c)).Hh)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.qh.has(r)?(Wv("SyncEngine","Adding an already active target "+r),[3,5]):[4,lI(n.Kc,r)]):[3,6];case 2:return i=t.sent(),[4,uI(n.Kc,i)];case 3:return o=t.sent(),[4,ET(n,jT(i),o.targetId,!1)];case 4:t.sent(),OI(n.Oh,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return bo(this,function(t){switch(t.label){case 0:return n.qh.has(e)?[4,cI(n.Kc,e,!1).then(function(){PI(n.Oh,e),OT(n,e)}).catch(dI)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),Ca:function(t){return t.Kc.persistence.Ca()}.bind(null,e),lh:function(n){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){return[2,fI((e=n).Kc).then(function(t){return xT(e,t)})]})})}.bind(null,e)},[4,this.kh.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence._a(function(e){return _o(n,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return[4,FT(this.Xl.gu,e)];case 1:return t.sent(),this.zl&&(e&&!this.zl.yr?this.zl.start(this.Kc):e||this.zl.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},vS.prototype.jl=function(t){var e=Rb();if(!oT.kn(e))throw new uy(ay.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=tI(t.Fl.t,t.Fl.persistenceKey);return new oT(e,t.rs,n,t.clientId,t.Yl)},vS),hS=(dS.prototype.initialize=function(n,r){return _o(this,void 0,void 0,function(){var e=this;return bo(this,function(t){switch(t.label){case 0:return this.Kc?[3,2]:(this.Kc=n.Kc,this.kh=n.kh,this.Wc=this.Zl(r),this.Oh=this.t_(r),this.Mh=this.e_(r),this.gu=this.n_(r,!n.synchronizeTabs),this.kh.Oc=function(t){return ST(e.gu,t,1)},this.Oh.jc.s_=LT.bind(null,this.gu),[4,KI(this.Oh,this.gu.Jh)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},dS.prototype.e_=function(t){return new jb},dS.prototype.Zl=function(t){var e=uw(t.Fl.t),n=(n=t.Fl,new iS(n));return t=t.credentials,new wI(t,n,e)},dS.prototype.t_=function(t){var e=this,n=this.Kc,r=this.Wc,i=t.rs,o=function(t){return ST(e.gu,t,0)},t=new(oS.kn()?oS:sS);return new vI(n,r,i,o,t)},dS.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){o=new fT(t,e,n,r,i,o);return s&&(o.Hh=!0),o}(this.Kc,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},dS.prototype.terminate=function(){return function(n){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=n,Wv("RemoteStore","RemoteStore shutting down."),e.Hc.add(5),[4,kI(e)];case 1:return t.sent(),e.Yc.pa(),e.Zc.set("Unknown"),[2]}})})}(this.Oh)},dS),lS=(pS.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},pS.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},pS.prototype.r_=function(){this.muted=!0},pS.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},pS),fS=function(t){this.o_=t};function pS(t){this.observer=t,this.muted=!1}function dS(){}function vS(t,e){var n=this;return(n=BT.call(this,t,e,!1)||this).Xl=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function yS(t,e,n){var r=this;return(r=WT.call(this)||this).Xl=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function gS(){this.synchronizeTabs=!1}function mS(){}function _S(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}function bS(t){var e=this;return(e=KT.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.i=t.i,e}function wS(t){this.Fl=t,this.t=t.t;var e=t.ssl?"https":"http";this.Ol=e+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}function ES(t){this.pl=t.pl,this.vl=t.vl}function IS(t){this.persistence=t,this.Rl=new zI,this.Pl=null}function TS(t){var e=this;return(e=HT.call(this)||this).Go=t,e}function SS(t,e){var n=this;this.Tl={},this.Jo=new pw(0),this.Yo=!1,this.Yo=!0,this.Lr=t(this),this.ra=new JT(this),this.Fi=new iE,this.Ni=(t=this.Fi,new YT(t,function(t){return n.Lr.El(t)})),this.serializer=new Pw(e),this.oa=new $T(this.serializer)}function CS(t){this.serializer=t,this.dl=new Map,this.wl=new Map}function NS(t){this.persistence=t,this.hl=new sy(Ay,ky),this.lastRemoteSnapshotVersion=hy.min(),this.highestTargetId=0,this.ll=0,this._l=new zI,this.targetCount=0,this.fl=ME.po()}function AS(t){var e=this;return(e=GT.call(this)||this).To=t,e}function kS(t,e){this.Fi=t,this.cl=e,this.docs=new jy(dy.V),this.size=0}function OS(t,e){this.Fi=t,this.Lr=e,this.xi=[],this.nl=1,this.sl=new Gy(QI.cu)}function PS(){}function RS(t,e,n){if(!n)throw new uy(ay.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function DS(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new uy(ay.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function xS(t,e,n,r){if(!0===e&&!0===r)throw new uy(ay.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function LS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":zv();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function MS(t,e){if(t instanceof fS&&(t=t.o_),t instanceof e)return t;if(e.name===t.constructor.name)throw new uy(ay.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=LS(t);throw new uy(ay.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function FS(t,e){if(e<=0)throw new uy(ay.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var US,jS=function(t){this.a_=t},VS=(go(qS,US=jS),qS.prototype.c_=function(t){if(2!==t.u_)throw 1===t.u_?t.h_(this.a_+"() can only appear at the top level of your update data"):t.h_(this.a_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},qS.prototype.isEqual=function(t){return t instanceof qS},qS);function qS(){return null!==US&&US.apply(this,arguments)||this}function BS(t,e,n){return new UC({u_:3,l_:e.settings.l_,methodName:t.a_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var WS,KS,HS,GS,zS=(go(aC,GS=jS),aC.prototype.c_=function(t){return new Rm(t.path,new gm)},aC.prototype.isEqual=function(t){return t instanceof aC},aC),QS=(go(sC,HS=jS),sC.prototype.c_=function(t){var e=BS(this,t,!0),n=this.f_.map(function(t){return GC(t,e)}),n=new mm(n);return new Rm(t.path,n)},sC.prototype.isEqual=function(t){return this===t},sC),YS=(go(oC,KS=jS),oC.prototype.c_=function(t){var e=BS(this,t,!0),n=this.f_.map(function(t){return GC(t,e)}),n=new Im(n);return new Rm(t.path,n)},oC.prototype.isEqual=function(t){return this===t},oC),XS=(go(iC,WS=jS),iC.prototype.c_=function(t){var e=new Nm(t.serializer,Kg(t.serializer,this.d_));return new Rm(t.path,e)},iC.prototype.isEqual=function(t){return this===t},iC),JS=(Object.defineProperty(rC.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(rC.prototype,"longitude",{get:function(){return this.T_},enumerable:!1,configurable:!0}),rC.prototype.isEqual=function(t){return this.w_===t.w_&&this.T_===t.T_},rC.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.T_}},rC.prototype.I=function(t){return Jv(this.w_,t.w_)||Jv(this.T_,t.T_)},rC),$S=(nC.fromBase64String=function(t){try{return new nC(Py.fromBase64String(t))}catch(t){throw new uy(ay.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+t)}},nC.fromUint8Array=function(t){return new nC(Py.fromUint8Array(t))},nC.prototype.toBase64=function(){return this.E_.toBase64()},nC.prototype.toUint8Array=function(){return this.E_.toUint8Array()},nC.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},nC.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},nC),ZS=new Map,tC=(eC.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},eC);function eC(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new uy(ay.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new uy(ay.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,xS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function nC(t){this.E_=t}function rC(t,e){if(!isFinite(t)||t<-90||90<t)throw new uy(ay.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new uy(ay.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.T_=e}function iC(t,e){var n=this;return(n=WS.call(this,t)||this).d_=e,n}function oC(t,e){var n=this;return(n=KS.call(this,t)||this).f_=e,n}function sC(t,e){var n=this;return(n=HS.call(this,t)||this).f_=e,n}function aC(){return null!==GS&&GS.apply(this,arguments)||this}function uC(){if("undefined"==typeof Uint8Array)throw new uy(ay.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function cC(){if("undefined"==typeof atob)throw new uy(ay.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var hC,lC,fC,pC=(go(bC,fC=$S),bC.fromBase64String=function(t){cC();try{return new bC(Py.fromBase64String(t))}catch(t){throw new uy(ay.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},bC.fromUint8Array=function(t){return uC(),new bC(Py.fromUint8Array(t))},bC.prototype.toBase64=function(){return cC(),fC.prototype.toBase64.call(this)},bC.prototype.toUint8Array=function(){return uC(),fC.prototype.toUint8Array.call(this)},bC.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},bC),Dr=(_C.prototype.I_=function(t,e){switch(void 0===e&&(e="none"),Tg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pg(t.integerValue||t.doubleValue);case 3:return this.m_(t.timestampValue);case 4:return this.A_(t,e);case 5:return t.stringValue;case 6:return this.R_(Rg(t.bytesValue));case 7:return this.P_(t.referenceValue);case 8:return this.g_(t.geoPointValue);case 9:return this.V_(t.arrayValue,e);case 10:return this.y_(t.mapValue,e);default:throw zv()}},_C.prototype.y_=function(t,n){var r=this,i={};return ey(t.fields||{},function(t,e){i[t]=r.I_(e,n)}),i},_C.prototype.g_=function(t){return new JS(Pg(t.latitude),Pg(t.longitude))},_C.prototype.V_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.I_(t,e)})},_C.prototype.A_=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return wg(e)?t(e):e}(t);return null==n?null:this.I_(n,e);case"estimate":return this.m_(Eg(t));default:return null}},_C.prototype.m_=function(t){t=Og(t);return new cy(t.seconds,t.nanos)},_C.prototype.p_=function(t,e){var n=ly.k(t);Qv(pm(n));t=new jv(n.get(1),n.get(3)),n=new dy(n.v(5));return t.isEqual(e)||Kv("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},_C),dC=(go(mC,lC=Dr),mC.prototype.R_=function(t){return new pC(t)},mC.prototype.P_=function(t){t=this.p_(t,this.firestore.v_);return XN.b_(t,this.firestore,null)},mC),M=(Object.defineProperty(gC.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(gC.prototype,"ref",{get:function(){return new TC(this.S_,this.x_,this.C_)},enumerable:!1,configurable:!0}),gC.prototype.exists=function(){return null!==this.N_},gC.prototype.data=function(){if(this.N_){if(this.x_){var t=new vC(this.S_,this.D_,this.C_,this.N_,null);return this.x_.fromFirestore(t)}return this.D_.I_(this.N_.sn())}},gC.prototype.get=function(t){if(this.N_){t=this.N_.data().field(wC("DocumentSnapshot.get",t));if(null!==t)return this.D_.I_(t)}},gC),vC=(go(yC,hC=M),yC.prototype.data=function(){return hC.prototype.data.call(this)},yC);function yC(){return null!==hC&&hC.apply(this,arguments)||this}function gC(t,e,n,r,i){this.S_=t,this.D_=e,this.C_=n,this.N_=r,this.x_=i}function mC(t){var e=this;return(e=lC.call(this)||this).firestore=t,e}function _C(){}function bC(){return null!==fC&&fC.apply(this,arguments)||this}function wC(t,e){return"string"==typeof e?$C(t,e):(e instanceof fS?e.o_:e).F_}var EC,IC=(OC.prototype.isEqual=function(t){return this.F_.isEqual(t.F_)},OC),TC=(Object.defineProperty(kC.prototype,"O_",{get:function(){return this.C_.path},enumerable:!1,configurable:!0}),Object.defineProperty(kC.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(kC.prototype,"path",{get:function(){return this.C_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(kC.prototype,"parent",{get:function(){return new CC(this.firestore,this.x_,this.C_.path.S())},enumerable:!1,configurable:!0}),kC.prototype.withConverter=function(t){return new kC(this.firestore,t,this.C_)},kC),SC=(AC.prototype.withConverter=function(t){return new AC(this.firestore,t,this.M_)},AC),CC=(go(NC,EC=SC),Object.defineProperty(NC.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(NC.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(NC.prototype,"parent",{get:function(){var t=this.O_.S();return t.T()?null:new TC(this.firestore,null,new dy(t))},enumerable:!1,configurable:!0}),NC.prototype.withConverter=function(t){return new NC(this.firestore,t,this.O_)},NC);function NC(t,e,n){var r=this;return(r=EC.call(this,t,e,b_(n))||this).firestore=t,r.O_=n,r.type="collection",r}function AC(t,e,n){this.x_=e,this.M_=n,this.type="query",this.firestore=t}function kC(t,e,n){this.x_=e,this.C_=n,this.type="document",this.firestore=t}function OC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new uy(ay.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.F_=new py(t)}function PC(t){var e=t.k_(),n=uw(t.v_);return new jC(t.v_,!!e.ignoreUndefinedProperties,n)}var RC=/^__.*__$/,DC=(MC.prototype.L_=function(t,e){var n=[];return null!==this.Qe?n.push(new Hm(t,this.data,this.Qe,e)):n.push(new Km(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Xm(t,this.fieldTransforms)),n},MC),xC=(LC.prototype.L_=function(t,e){e=[new Hm(t,this.data,this.Qe,e)];return 0<this.fieldTransforms.length&&e.push(new Xm(t,this.fieldTransforms)),e},LC);function LC(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}function MC(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}function FC(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw zv()}}var UC=(Object.defineProperty(qC.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(qC.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),qC.prototype.q_=function(t){return new qC(Object.assign(Object.assign({},this.settings),t),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},qC.prototype.U_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.q_({path:e,__:!1});return e.Q_(t),e},qC.prototype.K_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.q_({path:t,__:!1});return t.B_(),t},qC.prototype.W_=function(t){return this.q_({path:void 0,__:!0})},qC.prototype.h_=function(t){return ZC(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.l_)},qC.prototype.contains=function(e){return void 0!==this.Qe.find(function(t){return e.N(t)})||void 0!==this.fieldTransforms.find(function(t){return e.N(t.field)})},qC.prototype.B_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Q_(this.path.get(t))},qC.prototype.Q_=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(FC(this.u_)&&RC.test(t))throw this.h_('Document fields cannot begin and end with "__"')},qC),jC=(VC.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new UC({u_:t,methodName:e,l_:n,path:py.$(),__:!1,j_:r},this.t,this.serializer,this.ignoreUndefinedProperties)},VC);function VC(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||uw(t)}function qC(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.B_(),this.fieldTransforms=i||[],this.Qe=o||[]}function BC(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);YC("Data must be an object, but it was:",s,r);var a,u,r=zC(r,s);if(o.merge)a=new Pm(s.Qe),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=XC(e,l[h],n);if(!s.contains(f))throw new uy(ay.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");tN(c,f)||c.push(f)}a=new Pm(c),u=s.fieldTransforms.filter(function(t){return a.He(t.field)})}else a=null,u=s.fieldTransforms;return new DC(new r_(r),a,u)}function WC(t,r,i,e){var o=t.G_(1,r,i);YC("Data must be an object, but it was:",o,e);var s=[],a=new i_;ey(e,function(t,e){var n=$C(r,t,i);e instanceof fS&&(e=e.o_);t=o.K_(n);e instanceof VS?s.push(n):null!=(t=GC(e,t))&&(s.push(n),a.set(n,t))});e=new Pm(s);return new xC(a.Ye(),e,o.fieldTransforms)}function KC(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[XC(e,r,n)],u=[i];if(o.length%2!=0)throw new uy(ay.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(XC(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new i_,v=a.length-1;0<=v;--v){tN(p,a[v])||(h=a[v],(l=u[v])instanceof fS&&(l=l.o_),f=s.K_(h),l instanceof VS?p.push(h):null!=(f=GC(l,f))&&(p.push(h),d.set(h,f)))}i=new Pm(p);return new xC(d.Ye(),i,s.fieldTransforms)}function HC(t,e,n,r){return void 0===r&&(r=!1),GC(n,t.G_(r?4:3,e))}function GC(s,t){if(s instanceof fS&&(s=s.o_),QC(s))return YC("Unsupported field value:",t,s),zC(s,t);if(s instanceof jS)return function(t,e){if(!FC(e.u_))throw e.h_(t.a_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.a_+"() is not currently supported inside arrays");t=t.c_(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.Qe.push(t.path),s instanceof Array){if(t.settings.__&&4!==t.u_)throw t.h_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=GC(i[r],t.W_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof fS&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Kg(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=cy.fromDate(t);return{timestampValue:Hg(e.serializer,n)}}if(t instanceof cy){var r=new cy(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Hg(e.serializer,r)}}if(t instanceof JS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof $S)return{bytesValue:Gg(e.serializer,t.E_)};if(t instanceof TC){n=e.t,r=t.firestore.v_;if(!r.isEqual(n))throw e.h_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Qg(t.firestore.v_||e.t,t.C_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+LS(t))}(s,t)}function zC(t,n){var r={};return ny(t)?n.path&&0<n.path.length&&n.Qe.push(n.path):ey(t,function(t,e){e=GC(e,n.U_(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function QC(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof cy||t instanceof JS||t instanceof $S||t instanceof TC||t instanceof jS)}function YC(t,e,n){if(!QC(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=LS(n);throw"an object"===n?e.h_(t+" a custom object"):e.h_(t+" "+n)}var r}function XC(t,e,n){if(e instanceof fS&&(e=e.o_),e instanceof IC)return e.F_;if("string"==typeof e)return $C(t,e);throw ZC("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var JC=new RegExp("[~\\*/\\[\\]]");function $C(e,n,r){if(0<=n.search(JC))throw ZC("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(IC.bind.apply(IC,To([void 0],n.split("."))))).F_}catch(t){throw ZC("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function ZC(t,e,n,r,i){var o=r&&!r.T(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new uy(ay.INVALID_ARGUMENT,(e+=". ")+t+n)}function tN(t,e){return t.some(function(t){return t.isEqual(e)})}var eN=(sN.prototype.X_=function(r){return _o(this,void 0,void 0,function(){var e,n=this;return bo(this,function(t){switch(t.label){case 0:if(this.Z_(),0<this.mutations.length)throw new uy(ay.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return _o(this,void 0,void 0,function(){var n,e,r,i,o;return bo(this,function(t){switch(t.label){case 0:return e=tm((n=s).serializer)+"/documents",r={documents:a.map(function(t){return Xg(n.serializer,t)})},[4,n.Fc("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.serializer,"found"in(t=t)?function(t,e){Qv(!!e.found),e.found.name,e.found.updateTime;var n=Jg(t,e.found.name),t=zg(e.found.updateTime),e=new r_({mapValue:{fields:e.found.fields}});return new f_(n,t,e,{})}(e,t):"missing"in t?function(t,e){Qv(!!e.missing),Qv(!!e.readTime);t=Jg(t,e.missing),e=zg(e.readTime);return new p_(t,e)}(e,t):zv());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){t=i.get(t.toString());Qv(!!t),o.push(t)}),o)]}})})}(this.Wc,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof p_||t instanceof f_?n.tf(t):zv()}),e)]}})})},sN.prototype.set=function(t,e){this.write(e.L_(t,this.je(t))),this.Y_.add(t.toString())},sN.prototype.update=function(t,e){try{this.write(e.L_(t,this.ef(t)))}catch(t){this.J_=t}this.Y_.add(t.toString())},sN.prototype.delete=function(t){this.write([new e_(t,this.je(t))]),this.Y_.add(t.toString())},sN.prototype.commit=function(){return _o(this,void 0,void 0,function(){var e,n=this;return bo(this,function(t){switch(t.label){case 0:if(this.Z_(),this.J_)throw this.J_;return e=this.z_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=dy.K(e);n.mutations.push(new n_(e,n.je(e)))}),[4,function(i,o){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return n=tm((e=i).serializer)+"/documents",r={writes:o.map(function(t){return rm(e.serializer,t)})},[4,e.xc("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Wc,this.mutations)];case 1:return t.sent(),this.H_=!0,[2]}})})},sN.prototype.tf=function(t){var e;if(t instanceof f_)e=t.version;else{if(!(t instanceof p_))throw zv();e=hy.min()}var n=this.z_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new uy(ay.ABORTED,"Document version changed between two reads.")}else this.z_.set(t.key.toString(),e)},sN.prototype.je=function(t){var e=this.z_.get(t.toString());return!this.Y_.has(t.toString())&&e?Lm.updateTime(e):Lm.Ge()},sN.prototype.ef=function(t){var e=this.z_.get(t.toString());if(this.Y_.has(t.toString())||!e)return Lm.exists(!0);if(e.isEqual(hy.min()))throw new uy(ay.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lm.updateTime(e)},sN.prototype.write=function(t){this.Z_(),this.mutations=this.mutations.concat(t)},sN.prototype.Z_=function(){},sN),nN=(oN.prototype.run=function(){this.sf()},oN.prototype.sf=function(){var t=this;this.Ps.An(function(){return _o(t,void 0,void 0,function(){var e,n,r=this;return bo(this,function(t){return e=new eN(this.Wc),(n=this.rf(e))&&n.then(function(t){r.rs.fs(function(){return e.commit().then(function(){r.us.resolve(t)}).catch(function(t){r.af(t)})})}).catch(function(t){r.af(t)}),[2]})})})},oN.prototype.rf=function(t){try{var e=this.updateFunction(t);return!Iy(e)&&e.catch&&e.then?e:(this.us.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.us.reject(t),null}},oN.prototype.af=function(t){var e=this;0<this.nf&&this.cf(t)?(--this.nf,this.rs.fs(function(){return e.sf(),Promise.resolve()})):this.us.reject(t)},oN.prototype.cf=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!Fy(t)},oN),rN=(iN.prototype.getConfiguration=function(){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return[4,this.oi.promise];case 1:return[2,(t.sent(),{rs:this.rs,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}})})},iN.prototype.hf=function(t){var e=this;this.uf=t,this.oi.promise.then(function(){return e.uf(e.user)})},iN.prototype.lf=function(){if(this.rs.Vs)throw new uy(ay.FAILED_PRECONDITION,"The client has already been terminated.")},iN.prototype.terminate=function(){var t=this;this.rs.bs();var n=new pb;return this.rs.ys(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this._f?[4,this._f.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.ff?[4,this.ff.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.ii(),n.resolve(),[3,6];case 5:return e=t.sent(),e=Ub(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},iN);function iN(t,e,n){var r=this;this.credentials=t,this.rs=e,this.Fl=n,this.user=Hb.UNAUTHENTICATED,this.clientId=Yv.u(),this.uf=function(){},this.oi=new pb,this.credentials.si(function(t){Wv("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.uf(t)),r.oi.resolve()})}function oN(t,e,n,r){this.rs=t,this.Wc=e,this.updateFunction=n,this.us=r,this.nf=5,this.Ps=new db(this.rs,"transaction_retry")}function sN(t){this.Wc=t,this.z_=new Map,this.mutations=[],this.H_=!1,this.J_=null,this.Y_=new Set}function aN(r,i){return _o(this,void 0,void 0,function(){var e,n=this;return bo(this,function(t){switch(t.label){case 0:return r.rs.Ns(),Wv("FirestoreClient","Initializing OfflineComponentProvider"),[4,r.getConfiguration()];case 1:return e=t.sent(),[4,i.initialize(e)];case 2:return t.sent(),r.hf(function(e){return r.rs.Ss(function(){return _o(n,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return[4,iI(i.Kc,e)];case 1:return t.sent(),[2]}})})})}),i.persistence.fa(function(){return r.terminate()}),r.ff=i,[2]}})})}function uN(r,i){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return r.rs.Ns(),[4,cN(r)];case 1:return e=t.sent(),Wv("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.hf(function(t){return r.rs.Ss(function(){return function(r,i){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return(e=r).rs.Ns(),Wv("RemoteStore","RemoteStore received new credentials"),n=MI(e),e.Hc.add(3),[4,kI(e)];case 1:return t.sent(),n&&e.Zc.set("Unknown"),[4,e.jc.s_(i)];case 2:return t.sent(),e.Hc.delete(3),[4,AI(e)];case 3:return t.sent(),[2]}})})}(i.Oh,t)})}),r._f=i,[2]}})})}function cN(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return e.ff?[3,2]:(Wv("FirestoreClient","Using default OfflineComponentProvider"),[4,aN(e,new aS)]);case 1:t.sent(),t.label=2;case 2:return[2,e.ff]}})})}function hN(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return e._f?[3,2]:(Wv("FirestoreClient","Using default OnlineComponentProvider"),[4,uN(e,new hS)]);case 1:t.sent(),t.label=2;case 2:return[2,e._f]}})})}function lN(t){return cN(t).then(function(t){return t.persistence})}function fN(t){return cN(t).then(function(t){return t.Kc})}function pN(t){return hN(t).then(function(t){return t.Oh})}function dN(t){return hN(t).then(function(t){return t.gu})}function vN(r){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,hN(r)];case 1:return e=t.sent(),[2,((n=e.Mh).Ls=function(s,a){return _o(this,void 0,void 0,function(){var e,n,r,i,o;return bo(this,function(t){switch(t.label){case 0:return e=VT(s),(o=e.Bh.get(a))?(n=o.targetId,e.kh.Wu(n),r=o.view.xh(),[3,4]):[3,1];case 1:return[4,uI(e.Kc,N_(a))];case 2:return i=t.sent(),o=e.kh.Wu(i.targetId),n=i.targetId,[4,ET(e,a,n,"current"===o)];case 3:r=t.sent(),e.Jh&&OI(e.Oh,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e.gu),n.Us=function(i,o){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return n=(e=i).Bh.get(o),1<(r=e.qh.get(n.targetId)).length?[2,(e.qh.set(n.targetId,r.filter(function(t){return!P_(t,o)})),void e.Bh.delete(o))]:e.Jh?(e.kh.Gu(n.targetId),e.kh.Bu(n.targetId)?[3,2]:[4,cI(e.Kc,n.targetId,!1).then(function(){e.kh.Hu(n.targetId),PI(e.Oh,n.targetId),OT(e,n.targetId)}).catch(dI)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return OT(e,n.targetId),[4,cI(e.Kc,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.gu),n)]}})})}function yN(n,r){var t=this,i=new pb;return n.rs.fs(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=IT,[4,dN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}function gN(i,o,s){return _o(this,void 0,void 0,function(){var r;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=o,(n=i).persistence.runTransaction("read document","readonly",function(t){return n.Ga.Oi(t,e)}))];case 1:return(r=t.sent())instanceof f_?s.resolve(r):r instanceof p_?s.resolve(null):s.reject(new uy(ay.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),r=Ub(r,"Failed to get document '"+o+" from cache"),s.reject(r),[3,3];case 3:return[2]}var e,n})})}function mN(n,r,i,o,s){var t=new lS({next:function(t){r.fs(function(){return Bb(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new uy(ay.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new uy(ay.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new Kb(b_(i.path),t,{includeMetadataChanges:!0,Hs:!0});return qb(n,a)}var _N,bN=(Object.defineProperty(EN.prototype,"app",{get:function(){if(!this.If)throw new uy(ay.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.If},enumerable:!1,configurable:!0}),Object.defineProperty(EN.prototype,"mf",{get:function(){return this.Tf},enumerable:!1,configurable:!0}),Object.defineProperty(EN.prototype,"Af",{get:function(){return void 0!==this.Rf},enumerable:!1,configurable:!0}),EN.prototype.Pf=function(t){if(this.Tf)throw new uy(ay.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.wf=new tC(t),void 0!==t.credentials&&(this.Ef=function(t){if(!t)return new Yb;switch(t.type){case"gapi":var e=t.client;return Qv(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new $b(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new uy(ay.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},EN.prototype.gf=function(){return this.wf},EN.prototype.k_=function(){return this.Tf=!0,this.wf},EN.prototype._delete=function(){return this.Rf||(this.Rf=this.Vf()),this.Rf},EN.prototype.Vf=function(){return t=this,(e=ZS.get(t))&&(Wv("ComponentProvider","Removing Datastore"),ZS.delete(t),e.terminate()),Promise.resolve();var t,e},go(wN,_N=EN),wN.prototype.Vf=function(){return this.pf||GN(this),this.pf.terminate()},wN);function wN(t,e){var n=this;return(n=_N.call(this,t,e)||this).yf=new Lb,n.df="name"in t?t.name:"[DEFAULT]",n}function EN(t,e){this.df="(lite)",this.wf=new tC({}),this.Tf=!1,t instanceof jv?(this.v_=t,this.Ef=new Yb):(this.If=t,this.v_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new uy(ay.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jv(t.options.projectId)}(t),this.Ef=new Xb(e))}function IN(n,r,i){var t=this,o=new pb;return n.rs.enqueue(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,aN(n,i)];case 1:return t.sent(),[4,uN(n,r)];case 2:return t.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(t=e=t.sent()).name?t.code===ay.FAILED_PRECONDITION||t.code===ay.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),o.reject(e),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function TN(t){if(t.mf||t.Af)throw new uy(ay.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var SN,CN,NN=(go(RN,CN=M),RN.prototype.exists=function(){return CN.prototype.exists.call(this)},RN.prototype.data=function(t){if(void 0===t&&(t={}),this.N_){if(this.x_){var e=new AN(this.S_,this.D_,this.C_,this.N_,this.metadata,null);return this.x_.fromFirestore(e,t)}return this.D_.I_(this.N_.sn(),t.serverTimestamps)}},RN.prototype.get=function(t,e){if(void 0===e&&(e={}),this.N_){t=this.N_.data().field(wC("DocumentSnapshot.get",t));if(null!==t)return this.D_.I_(t,e.serverTimestamps)}},RN),AN=(go(PN,SN=NN),PN.prototype.data=function(t){return void 0===t&&(t={}),SN.prototype.data.call(this,t)},PN),kN=(Object.defineProperty(ON.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(ON.prototype,"size",{get:function(){return this.bf.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(ON.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),ON.prototype.forEach=function(e,n){var r=this;this.bf.docs.forEach(function(t){e.call(n,new AN(r.S_,r.D_,t.key,t,new rA(r.bf.Qt.has(t.key),r.bf.fromCache),r.query.x_))})},ON.prototype.docChanges=function(t){void 0===t&&(t={});t=!!t.includeMetadataChanges;if(t&&this.bf.Wt)throw new uy(ay.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Sf&&this.Df===t||(this.Sf=function(i,e){if(i.bf.Ut.T()){var n=0;return i.bf.docChanges.map(function(t){var e=new AN(i.S_,i.D_,t.doc.key,t.doc,new rA(i.bf.Qt.has(t.doc.key),i.bf.fromCache),i.query.x_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i.bf.Ut;return i.bf.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new AN(i.S_,i.D_,t.doc.key,t.doc,new rA(i.bf.Qt.has(t.doc.key),i.bf.fromCache),i.query.x_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zv()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.Df=t),this.Sf},ON);function ON(t,e,n,r){this.S_=t,this.D_=e,this.bf=r,this.metadata=new rA(r.hasPendingWrites,r.fromCache),this.query=n}function PN(){return null!==SN&&SN.apply(this,arguments)||this}function RN(t,e,n,r,i,o){var s=this;return(s=CN.call(this,t,e,n,r,o)||this).S_=t,s.vf=t,s.metadata=i,s}function DN(t,e){return t instanceof NN&&e instanceof NN?t.S_===e.S_&&t.C_.isEqual(e.C_)&&(null===t.N_?null===e.N_:t.N_.isEqual(e.N_))&&t.x_===e.x_:t instanceof kN&&e instanceof kN&&t.S_===e.S_&&(n=t.query,r=e.query,n instanceof SC&&r instanceof SC&&n.firestore===r.firestore&&P_(n.M_,r.M_)&&n.x_===r.x_)&&t.metadata.isEqual(e.metadata)&&t.bf.isEqual(e.bf);var n,r}var xN,LN=(go(MN,xN=Dr),MN.prototype.R_=function(t){return new $S(t)},MN.prototype.P_=function(t){t=this.p_(t,this.firestore.v_);return new TC(this.firestore,null,t)},MN);function MN(t){var e=this;return(e=xN.call(this)||this).firestore=t,e}function FN(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=MS(t.firestore,bN),s=PC(o);return e instanceof fS&&(e=e.o_),UN(o,("string"==typeof e||e instanceof IC?KC(s,"updateDoc",t.C_,e,n,r):WC(s,"updateDoc",t.C_,e)).L_(t.C_,Lm.exists(!0)))}function UN(t,e){return yN(HN(t),e)}function jN(t,e,n){var r=n.docs.get(e.C_),i=new LN(t);return new NN(t,i,e.C_,r,new rA(n.hasPendingWrites,n.fromCache),e.x_)}var VN,qN=(KN.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){TN(t);var n=HN(t),r=t.k_(),t=new hS;return IN(n,t,new uS(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},KN.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){TN(t);var e=HN(t),n=t.k_(),t=new hS;return IN(e,t,new cS(t,n.cacheSizeBytes))}(t.o_)},KN.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n.mf&&!n.Af)throw new uy(ay.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new pb;return n.yf.ys(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return yb.kn()?(e=n+"main",[4,yb.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(tI(n.v_,n.df))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t.o_)},KN),BN=(go(WN,VN=fS),Object.defineProperty(WN.prototype,"v_",{get:function(){return this.o_.v_},enumerable:!1,configurable:!0}),WN.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.gf()),t)).merge,this.o_.Pf(t)},WN.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.gf().host&&Hv("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},WN.prototype.enableNetwork=function(){return function(r){var t=this;return r.rs.enqueue(function(){return _o(t,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,lN(r)];case 1:return e=t.sent(),[4,pN(r)];case 2:return n=t.sent(),[2,(e.da(!0),(t=n).Hc.delete(0),AI(t))]}})})})}(HN(this.o_))},WN.prototype.disableNetwork=function(){return function(r){var t=this;return r.rs.enqueue(function(){return _o(t,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,lN(r)];case 1:return e=t.sent(),[4,pN(r)];case 2:return n=t.sent(),[2,(e.da(!1),function(n){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return(e=n).Hc.add(0),[4,kI(e)];case 1:return t.sent(),e.Zc.set("Offline"),[2]}})})}(n))]}})})})}(HN(this.o_))},WN.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&xS("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Cf.enableMultiTabIndexedDbPersistence(this):this.Cf.enableIndexedDbPersistence(this,n)},WN.prototype.clearPersistence=function(){return this.Cf.clearIndexedDbPersistence(this)},WN.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},WN.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new pb;return n.rs.fs(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=NT,[4,dN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(HN(this.o_))},WN.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=HN(t),e=cw(e)?e:{next:e},i=new lS(e);return t.yf.fs(function(){return _o(n,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.$s.add(e),e.next()},[4,vN(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})}),function(){i.r_(),t.yf.fs(function(){return _o(n,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.$s.delete(e)},[4,vN(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})})}}(this.o_,t)},Object.defineProperty(WN.prototype,"app",{get:function(){if(!this.Nf)throw new uy(ay.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Nf},enumerable:!1,configurable:!0}),WN.prototype.collection=function(t){return RS("Firestore.collection","path",t),HN(this.o_),new _A(ly.k(t),this,null)},WN.prototype.doc=function(t){return RS("Firestore.doc","path",t),HN(this.o_),XN.xf(ly.k(t),this,null)},WN.prototype.collectionGroup=function(t){if(RS("Firestore.collectionGroup","collectionId",t),0<=t.indexOf("/"))throw new uy(ay.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return HN(this.o_),new yA((t=t,new v_(ly.$(),t)),this,null)},WN.prototype.runTransaction=function(e){var n=this;return function(n,r){var t=this,i=new pb;return n.rs.fs(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,hN(n).then(function(t){return t.Wc})];case 1:return e=t.sent(),new nN(n.rs,e,r,i).run(),[2]}})})}),i.promise}(HN(this.o_),function(t){return e(new QN(n,t))})},WN.prototype.batch=function(){return HN(this.o_),new YN(this)},WN);function WN(t,e,n){var r=this;return(r=VN.call(this,e)||this).Cf=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof jv||(r.Nf=t),r}function KN(){}function HN(t){return t.pf||GN(t),t.pf.lf(),t.pf}function GN(t){var e,n,r=t.k_(),r=(e=t.v_,n=t.df,new Uv(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.pf=new rN(t.Ef,t.yf,r)}var zN,QN=(ZN.prototype.get=function(t){var e=this,n=TA(0,t,this.S_),r=new dC(this.S_);return this.Ff.X_([n.C_]).then(function(t){if(!t||1!==t.length)return zv();t=t[0];if(t instanceof p_)return new iA(e.S_,new NN(e.S_.o_,r,n.C_,null,new rA(!1,!1),n.x_));if(t instanceof f_)return new iA(e.S_,new NN(e.S_.o_,r,n.C_,t,new rA(!1,!1),n.x_));throw zv()})},ZN.prototype.set=function(t,e,n){t=TA(0,t,this.S_);n=DS("Transaction.set",n);e=SA(t.x_,e,n),n=BC(this.Of,"Transaction.set",t.C_,e,null!==t.x_,n);return this.Ff.set(t.C_,n),this},ZN.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=TA(0,t,this.S_);return e instanceof fS&&(e=e.o_),e="string"==typeof e||e instanceof IC?KC(this.Of,"Transaction.update",t.C_,e,n,r):WC(this.Of,"Transaction.update",t.C_,e),this.Ff.update(t.C_,e),this},ZN.prototype.delete=function(t){t=TA(0,t,this.S_);return this.Ff.delete(t.C_),this},ZN),YN=($N.prototype.set=function(t,e,n){this.$f();t=TA(0,t,this.S_);n=DS("WriteBatch.set",n);e=SA(t.x_,e,n),n=BC(this.Of,"WriteBatch.set",t.C_,e,null!==t.x_,n);return this.Mf=this.Mf.concat(n.L_(t.C_,Lm.Ge())),this},$N.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.$f();t=TA(0,t,this.S_);return e instanceof fS&&(e=e.o_),e="string"==typeof e||e instanceof IC?KC(this.Of,"WriteBatch.update",t.C_,e,n,r):WC(this.Of,"WriteBatch.update",t.C_,e),this.Mf=this.Mf.concat(e.L_(t.C_,Lm.exists(!0))),this},$N.prototype.delete=function(t){this.$f();t=TA(0,t,this.S_);return this.Mf=this.Mf.concat(new e_(t.C_,Lm.Ge())),this},$N.prototype.commit=function(){return this.$f(),this.kf=!0,0<this.Mf.length?yN(HN(this.S_.o_),this.Mf):Promise.resolve()},$N.prototype.$f=function(){if(this.kf)throw new uy(ay.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},$N),XN=(go(JN,zN=fS),JN.xf=function(t,e,n){if(t.length%2!=0)throw new uy(ay.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.M()+" has "+t.length);return new JN(e,new TC(e.o_,n,new dy(t)))},JN.b_=function(t,e,n){return new JN(e,new TC(e.o_,n,t))},Object.defineProperty(JN.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(JN.prototype,"parent",{get:function(){return new _A(this.o_.O_.S(),this.firestore,this.o_.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(JN.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),JN.prototype.collection=function(t){if(RS("DocumentReference.collection","path",t),!t)throw new uy(ay.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");t=ly.k(t);return new _A(this.o_.O_.child(t),this.firestore,null)},JN.prototype.isEqual=function(t){return t instanceof fS&&(t=t.o_),t instanceof TC&&(((e=this.o_)instanceof TC||e instanceof CC)&&(t instanceof TC||t instanceof CC)&&e.firestore===t.firestore&&e.path===t.path&&e.x_===t.x_);var e},JN.prototype.set=function(t,e){e=DS("DocumentReference.set",e);try{return n=this.o_,r=t,i=e,o=MS(n.firestore,bN),r=SA(n.x_,r,i),UN(o,BC(PC(o),"setDoc",n.C_,r,null!==n.x_,i).L_(n.C_,Lm.Ge()))}catch(t){throw tA(t,"setDoc","DocumentReference.set")}var n,r,i,o},JN.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?FN(this.o_,t):FN.apply(void 0,To([this.o_,t,e],n))}catch(t){throw tA(t,"updateDoc","DocumentReference.update")}},JN.prototype.delete=function(){return UN(MS((t=this.o_).firestore,bN),[new e_(t.C_,Lm.Ge())]);var t},JN.prototype.onSnapshot=function(){for(var e=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var n,i,o=function(){for(var t=0,e=r;t<e.length;t++){var n=e[t];if("object"==typeof n&&!cw(n))return n}return{}}(),n={next:function(t){i.next&&i.next(new iA(e.firestore,new NN(e.firestore.o_,e.D_,t.C_,t.N_,t.metadata,e.o_.x_)))},error:null===(n=(i=cw((n=r)[0])?n[0]:cw(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(n=i.complete)||void 0===n?void 0:n.bind(i)};return function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i={includeMetadataChanges:!1},o=0;"object"!=typeof n[o]||cw(n[o])||(i=n[o],o++);var s,a,u,c,h,l={includeMetadataChanges:i.includeMetadataChanges};cw(n[o])&&(u=n[o],n[o]=null===(i=u.next)||void 0===i?void 0:i.bind(u),n[o+1]=null===(i=u.error)||void 0===i?void 0:i.bind(u),n[o+2]=null===(i=u.complete)||void 0===i?void 0:i.bind(u)),e instanceof TC?(s=MS(e.firestore,bN),a=b_(e.C_.path),h={next:function(t){n[o]&&n[o](jN(s,e,t))},error:n[o+1],complete:n[o+2]}):(s=MS(e.firestore,bN),a=e.M_,c=new LN(s),h={next:function(t){n[o]&&n[o](new kN(s,c,e,t))},error:n[o+1],complete:n[o+2]},fA(e.M_));var f=HN(s),p=new lS(h),d=new Kb(a,p,l);return s.yf.fs(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=qb,[4,vN(f)];case 1:return[2,e.apply(void 0,[t.sent(),d])]}})})}),function(){p.r_(),s.yf.fs(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=Bb,[4,vN(f)];case 1:return[2,e.apply(void 0,[t.sent(),d])]}})})})}}(this.o_,o,n)},JN.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){var t=this,n=MS(e.firestore,bN),r=HN(n),i=new LN(n),o=new pb;return n.yf.fs(function(){return _o(t,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return[4,fN(r)];case 1:return[4,gN(t.sent(),e.C_,o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new NN(n,i,e.C_,t,new rA(t instanceof f_&&t.Je,!0),e.x_)})}:"server"===(null==t?void 0:t.source)?function(e){var t=this,n=MS(e.firestore,bN),r=HN(n),i=new pb;return n.yf.fs(function(){return _o(t,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return[4,vN(r)];case 1:return[4,mN(t.sent(),n.yf,e.C_,{source:"server"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return jN(n,e,t)})}:function(e){var t=this,n=MS(e.firestore,bN),r=HN(n),i=new pb;return n.yf.fs(function(){return _o(t,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return[4,vN(r)];case 1:return[4,mN(t.sent(),n.yf,e.C_,{source:"default"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return jN(n,e,t)})})(this.o_).then(function(t){return new iA(e.firestore,new NN(e.firestore.o_,e.D_,t.C_,t.N_,t.metadata,e.o_.x_))})},JN.prototype.withConverter=function(t){return new JN(this.firestore,this.o_.withConverter(t))},JN);function JN(t,e){var n=this;return(n=zN.call(this,e)||this).firestore=t,n.D_=new dC(t),n}function $N(t){this.S_=t,this.Mf=[],this.kf=!1,this.Of=PC(this.S_.o_)}function ZN(t,e){this.S_=t,this.Ff=e,this.Of=PC(this.S_.o_)}function tA(t,e,n){return t.message=t.message.replace(e+"()",n+"()"),t}var eA,nA,rA=(uA.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},uA),iA=(go(aA,nA=fS),Object.defineProperty(aA.prototype,"ref",{get:function(){return new XN(this.S_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(aA.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(aA.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(aA.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),aA.prototype.data=function(t){return this.o_.data(t)},aA.prototype.get=function(t,e){return this.o_.get(t,e)},aA.prototype.isEqual=function(t){return DN(this.o_,t.o_)},aA),oA=(go(sA,eA=iA),sA.prototype.data=function(t){return this.o_.data(t)},sA);function sA(){return null!==eA&&eA.apply(this,arguments)||this}function aA(t,e){var n=this;return(n=nA.call(this,e)||this).S_=t,n}function uA(t,e){this.hasPendingWrites=t,this.fromCache=e}function cA(t,e,n){if(n instanceof fS&&(n=n.o_),"string"==typeof n){if(""===n)throw new uy(ay.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!S_(e)&&-1!==n.indexOf("/"))throw new uy(ay.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(ly.k(n));if(!dy.G(e))throw new uy(ay.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Dg(t,new dy(e))}if(n instanceof TC)return Dg(t,n.C_);throw new uy(ay.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+LS(n)+".")}function hA(t,e){if(!Array.isArray(t)||0===t.length)throw new uy(ay.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new uy(ay.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function lA(t,e,n){if(!n.isEqual(e))throw new uy(ay.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function fA(t){if(E_(t)&&0===t.rn.length)throw new uy(ay.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pA,dA,vA,yA=(IA.prototype.where=function(t,e,n){t=XC("Query.where",t),e=function(t,e,n,r,i,o){if(r.B()){if("array-contains"===i||"array-contains-any"===i)throw new uy(ay.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){hA(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(cA(n,t,c))}h={arrayValue:{values:s}}}else h=cA(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||hA(o,i),h=HC(e,"Query.where",o,"in"===i||"not-in"===i);var h=F_.create(r,i,h);return function(t,e){if(e.cn()){var n=T_(t);if(null!==n&&!n.isEqual(e.field))throw new uy(ay.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=I_(t);null!==n&&lA(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new uy(ay.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new uy(ay.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(this.M_,this.Lf,this.firestore.v_,t,e,n);return new IA((n=this.M_,e=n.filters.concat([e]),new v_(n.path,n.collectionGroup,n.rn.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)),this.firestore,this.x_)},IA.prototype.orderBy=function(t,e){if(void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new uy(ay.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var n,t=XC("Query.orderBy",t),t=function(t,e,n){if(null!==t.startAt)throw new uy(ay.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new uy(ay.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");e=new lb(e,n);return n=e,null!==I_(t)||null!==(t=T_(t))&&lA(0,t,n.field),e}(this.M_,t,n);return new IA((n=this.M_,t=n.rn.concat([t]),new v_(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)),this.firestore,this.x_)},IA.prototype.limit=function(t){return FS("Query.limit",t),new IA(A_(this.M_,t,"F"),this.firestore,this.x_)},IA.prototype.limitToLast=function(t){return FS("Query.limitToLast",t),new IA(A_(this.M_,t,"L"),this.firestore,this.x_)},IA.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.Bf("Query.startAt",t,e,!0);return new IA(k_(this.M_,t),this.firestore,this.x_)},IA.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.Bf("Query.startAfter",t,e,!1);return new IA(k_(this.M_,t),this.firestore,this.x_)},IA.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.Bf("Query.endBefore",t,e,!0);return new IA(O_(this.M_,t),this.firestore,this.x_)},IA.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.Bf("Query.endAt",t,e,!1);return new IA(O_(this.M_,t),this.firestore,this.x_)},IA.prototype.isEqual=function(t){return t instanceof IA&&this.firestore===t.firestore&&P_(this.M_,t.M_)&&this.x_===t.x_},IA.prototype.withConverter=function(t){return new IA(this.M_,this.firestore,t)},IA.prototype.Bf=function(c,t,e,n){if(t instanceof iA)return function(t,e,n,r){if(!n)throw new uy(ay.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=C_(t);o<s.length;o++){var a=s[o];if(a.field.B())i.push(Dg(e,n.key));else{var u=n.field(a.field);if(wg(u))throw new uy(ay.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){a=a.field.M();throw new uy(ay.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new rb(i,r)}(this.M_,this.firestore.v_,t.o_.N_,n);e=[t].concat(e);return function(t,e,n,r,i,o){var s=t.rn;if(i.length>s.length)throw new uy(ay.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.B()){if("string"!=typeof c)throw new uy(ay.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!S_(t)&&-1!==c.indexOf("/"))throw new uy(ay.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ly.k(c));if(!dy.G(h))throw new uy(ay.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new dy(h);a.push(Dg(e,h))}else{c=HC(n,r,c);a.push(c)}}return new rb(a,o)}(this.M_,this.firestore.v_,this.Lf,c,e,n)},IA.prototype.onSnapshot=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i,o={},s=0;"object"!=typeof n[s]||cw(n[s])||(o=n[s],s++),cw(n[s])&&(i=n[s],n[s]=null===(t=i.next)||void 0===t?void 0:t.bind(i),n[s+1]=null===(t=i.error)||void 0===t?void 0:t.bind(i),n[s+2]=null===(t=i.complete)||void 0===t?void 0:t.bind(i));var a={next:function(t){n[s]&&n[s](new mA(e.firestore,new kN(e.firestore.o_,e.D_,new SC(e.firestore.o_,e.x_,e.M_),t)))},error:n[s+1],complete:n[s+2]};return fA(this.M_),function(n,t,e){var r=this,i=new lS(a),o=new Kb(t,i,e);return n.rs.fs(function(){return _o(r,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=qb,[4,vN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.r_(),n.rs.fs(function(){return _o(r,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=Bb,[4,vN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(HN(this.firestore.o_),this.M_,o)},IA.prototype.get=function(t){var e=this;fA(this.M_);var n=HN(this.firestore.o_);return(t&&"cache"===t.source?function(n,r){var t=this,i=new pb;return n.rs.fs(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=function(r,i,o){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,hI(r,i,!0)];case 1:return n=t.sent(),e=new cT(i,n.Xa),n=e.gh(n.documents),n=e.bi(n,!1),o.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),n=Ub(n,"Failed to execute query '"+i+" against cache"),o.reject(n),[3,3];case 3:return[2]}})})},[4,fN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(n,this.M_):function(n,r,i){var t=this;void 0===i&&(i={});var o=new pb;return n.rs.fs(function(){return _o(t,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new lS({next:function(t){n.fs(function(){return Bb(e,s)}),t.fromCache&&"server"===r.source?i.reject(new uy(ay.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new Kb(t,o,{includeMetadataChanges:!0,Hs:!0});return qb(e,s)},[4,vN(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.rs,r,i,o])]}})})}),o.promise}(n,this.M_,t)).then(function(t){return new mA(e.firestore,new kN(e.firestore.o_,e.D_,new SC(e.firestore.o_,e.x_,e.M_),t))})},IA),gA=(go(EA,vA=fS),Object.defineProperty(EA.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(EA.prototype,"doc",{get:function(){return new oA(this.S_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(EA.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(EA.prototype,"newIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),EA),mA=(go(wA,dA=fS),Object.defineProperty(wA.prototype,"query",{get:function(){return new yA(this.o_.query.M_,this.S_,this.o_.query.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(wA.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(wA.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(wA.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(wA.prototype,"docs",{get:function(){var e=this;return this.o_.docs.map(function(t){return new oA(e.S_,t)})},enumerable:!1,configurable:!0}),wA.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new gA(e.S_,t)})},wA.prototype.forEach=function(e,n){var r=this;this.o_.forEach(function(t){e.call(n,new oA(r.S_,t))})},wA.prototype.isEqual=function(t){return DN(this.o_,t.o_)},wA),_A=(go(bA,pA=yA),Object.defineProperty(bA.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(bA.prototype,"parent",{get:function(){var t=this.M_.path.S();return t.T()?null:XN.xf(t,this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(bA.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),bA.prototype.doc=function(t){0===arguments.length&&(t=Yv.u()),RS("CollectionReference.doc","path",t);t=ly.k(t);return XN.xf(this.M_.path.child(t),this.firestore,this.x_)},bA.prototype.add=function(t){var t=this.x_?this.x_.toFirestore(t):t,e=this.doc();return XN.b_(e.o_.C_,this.firestore,null).set(t).then(function(){return e})},bA.prototype.withConverter=function(t){return new bA(this.O_,this.firestore,t)},bA);function bA(t,e,n){var r=this;if(((r=pA.call(this,b_(t),e,n)||this).O_=t).length%2!=1)throw new uy(ay.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.M()+" has "+t.length);return r}function wA(t,e){var n=this;return(n=dA.call(this,e)||this).S_=t,n}function EA(t,e){var n=this;return(n=vA.call(this,e)||this).S_=t,n}function IA(t,e,n){this.M_=t,this.firestore=e,this.x_=n,this.Lf=PC(e.o_),this.D_=new dC(e)}function TA(t,e,n){e=MS(e,TC);if(e.firestore!==n.o_)throw new uy(ay.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function SA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var CA,NA,AA,M=(go(PA,NA=fS),PA.documentId=function(){return new PA(py.q().M())},PA.prototype.isEqual=function(t){return t instanceof fS&&(t=t.o_),t instanceof IC&&this.o_.F_.isEqual(t.F_)},PA),Dr=(go(OA,CA=fS),OA.serverTimestamp=function(){var t=new zS("serverTimestamp");return t.a_="FieldValue.serverTimestamp",new OA(t)},OA.delete=function(){var t=new VS("deleteField");return t.a_="FieldValue.delete",new OA(t)},OA.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new QS("arrayUnion",t)}.apply(void 0,t);return n.a_="FieldValue.arrayUnion",new OA(n)},OA.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new YS("arrayRemove",t)}.apply(void 0,t);return n.a_="FieldValue.arrayRemove",new OA(n)},OA.increment=function(t){t=new XS("increment",t);return t.a_="FieldValue.increment",new OA(t)},OA.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},OA),kA={Firestore:BN,GeoPoint:JS,Timestamp:cy,Blob:pC,Transaction:QN,WriteBatch:YN,DocumentReference:XN,DocumentSnapshot:iA,Query:yA,QueryDocumentSnapshot:oA,QuerySnapshot:mA,CollectionReference:_A,FieldPath:M,FieldValue:Dr,setLogLevel:function(t){Vv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function OA(){return null!==CA&&CA.apply(this,arguments)||this}function PA(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return NA.call(this,new(IC.bind.apply(IC,To([void 0],t))))||this}(AA=Jl).INTERNAL.registerComponent(new _s("firestore",function(t){return e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal"),new BN(e,new bN(e,t),new qN);var e},"PUBLIC").setServiceProps(Object.assign({},kA))),AA.registerVersion("@firebase/firestore","2.0.2");var RA,DA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xA=(go(LA,RA=Error),LA);function LA(t,e,n){e=RA.call(this,e)||this;return Object.setPrototypeOf(e,LA.prototype),e.code=t,e.details=n,e}function MA(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!DA[a])return new xA("internal","internal");r=DA[a],i=a}a=s.message;"string"==typeof a&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new xA(r,i,o)}var FA=(UA.prototype.getAuthToken=function(){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},UA.prototype.getInstanceIdToken=function(){return _o(this,void 0,void 0,function(){return bo(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},UA.prototype.getContext=function(){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},UA);function UA(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function jA(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var VA=(qA.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return jA(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},qA.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?jA(t,function(t){return e.decode(t)}):t},qA);function qA(){}var BA=(Object.defineProperty(WA.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),WA.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},WA.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},WA.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},WA.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},WA.prototype.postJSON=function(r,i,o){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},WA.prototype.call=function(c,h,l){return _o(this,void 0,void 0,function(){var i,o,s,a,u;return bo(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new xA("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([KA(u,this.postJSON(i,o,s)),a,KA(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new xA("cancelled","Firebase Functions instance was deleted.");if(u=MA(a.status,a.json,this.serializer))throw u;if(!a.json)throw new xA("internal","Response is not valid JSON object.");if(void 0===(u=a.json.data)&&(u=a.json.result),void 0===u)throw new xA("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},WA);function WA(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new VA,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new FA(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function KA(n,r){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var HA,GA,zA;function QA(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function YA(n,r,i){var o,t=new Promise(function(t,e){QA(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function XA(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function JA(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return YA(this[n],t,arguments)})})}function $A(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function ZA(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=YA(t,n,arguments)).then(function(t){if(t)return new ek(t,e.request)});var t,e})})}function tk(t){this._index=t}function ek(t,e){this._cursor=t,this._request=e}function nk(t){this._store=t}function rk(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function ik(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new rk(n)}function ok(t){this._db=t}function sk(t,e,n){var e=YA(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new ik(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new ok(t)})}function ak(t){return YA(indexedDB,"deleteDatabase",[t])}HA=Jl,GA=fetch.bind(self),zA={Functions:BA},HA.INTERNAL.registerComponent(new _s("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new BA(n,r,t,e,GA)},"PUBLIC").setServiceProps(zA).setMultipleInstances(!0)),Jl.registerVersion("@firebase/functions","0.6.1"),XA(tk,"_index",["name","keyPath","multiEntry","unique"]),JA(tk,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ZA(tk,"_index",IDBIndex,["openCursor","openKeyCursor"]),XA(ek,"_cursor",["direction","key","primaryKey","value"]),JA(ek,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(ek.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),QA(e._request).then(function(t){if(t)return new ek(t,e._request)})})})}),nk.prototype.createIndex=function(){return new tk(this._store.createIndex.apply(this._store,arguments))},nk.prototype.index=function(){return new tk(this._store.index.apply(this._store,arguments))},XA(nk,"_store",["name","keyPath","indexNames","autoIncrement"]),JA(nk,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ZA(nk,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),$A(nk,"_store",IDBObjectStore,["deleteIndex"]),rk.prototype.objectStore=function(){return new nk(this._tx.objectStore.apply(this._tx,arguments))},XA(rk,"_tx",["objectStoreNames","mode"]),$A(rk,"_tx",IDBTransaction,["abort"]),ik.prototype.createObjectStore=function(){return new nk(this._db.createObjectStore.apply(this._db,arguments))},XA(ik,"_db",["name","version","objectStoreNames"]),$A(ik,"_db",IDBDatabase,["deleteObjectStore","close"]),ok.prototype.transaction=function(){return new rk(this._db.transaction.apply(this._db,arguments))},XA(ok,"_db",["name","version","objectStoreNames"]),$A(ok,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[nk,tk].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[tk,nk].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var uk=1e4,ck="w:0.4.19",hk="FIS_v2",lk="https://firebaseinstallations.googleapis.com/v1",fk=36e5,Dr=((M={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',M["not-registered"]="Firebase Installation is not registered.",M["installation-not-found"]="Firebase Installation not found.",M["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',M["app-offline"]="Could not process request. Application offline.",M["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",M),pk=new zo("installations","Installations",Dr);function dk(t){return t instanceof Ho&&t.code.includes("request-failed")}function vk(t){t=t.projectId;return lk+"/projects/"+t+"/installations"}function yk(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function gk(n,r){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,pk.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function mk(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _k(t,e){e=e.refreshToken,t=mk(t);return t.append("Authorization",hk+" "+e),t}function bk(n){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function wk(e){return new Promise(function(t){setTimeout(t,e)})}var Ek=/^[cdef][\w-]{21}$/,Ik="";function Tk(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;t=function(t){return btoa(String.fromCharCode.apply(String,Io(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return Ek.test(t)?t:Ik}catch(t){return Ik}}function Sk(t){return t.appName+"!"+t.appId}var Ck=new Map;function Nk(t,e){t=Sk(t);Ak(t,e),function(t,e){var n=Ok();n&&n.postMessage({key:t,fid:e});Pk()}(t,e)}function Ak(t,e){var n,r,i=Ck.get(t);if(i)try{for(var o=wo(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var kk=null;function Ok(){return!kk&&"BroadcastChannel"in self&&((kk=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Ak(t.data.key,t.data.fid)}),kk}function Pk(){0===Ck.size&&kk&&(kk.close(),kk=null)}var Rk,Dk="firebase-installations-database",xk=1,Lk="firebase-installations-store",Mk=null;function Fk(){return Mk=Mk||sk(Dk,xk,function(t){0===t.oldVersion&&t.createObjectStore(Lk)})}function Uk(o,s){return _o(this,void 0,void 0,function(){var e,n,r,i;return bo(this,function(t){switch(t.label){case 0:return e=Sk(o),[4,Fk()];case 1:return r=t.sent(),n=r.transaction(Lk,"readwrite"),[4,(r=n.objectStore(Lk)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||Nk(o,s.fid),[2,s]}})})}function jk(r){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return e=Sk(r),[4,Fk()];case 1:return n=t.sent(),[4,(n=n.transaction(Lk,"readwrite")).objectStore(Lk).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function Vk(s,a){return _o(this,void 0,void 0,function(){var e,n,r,i,o;return bo(this,function(t){switch(t.label){case 0:return e=Sk(s),[4,Fk()];case 1:return r=t.sent(),n=r.transaction(Lk,"readwrite"),[4,(r=n.objectStore(Lk)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||Nk(s,o.fid),[2,o]}})})}function qk(i){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return[4,Vk(i,function(t){t=Wk(t||{fid:Tk(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return[4,Bk(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,wk(100)];case 3:return t.sent(),[4,Bk(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,qk(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(pk.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s,t){var a=t.fid;return _o(this,void 0,void 0,function(){var e,n,r,i,o;return bo(this,function(t){switch(t.label){case 0:return e=vk(s),n=mk(s),o={fid:a,authVersion:hk,appId:s.appId,sdkVersion:ck},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,bk(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:yk(o.authToken)}];case 3:return[4,gk("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,Uk(r,e)];case 2:return dk(n=t.sent())&&409===n.customData.serverCode?[4,jk(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,Uk(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==Ik?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function Bk(t){return Vk(t,function(t){if(!t)throw pk.create("installation-not-found");return Wk(t)})}function Wk(t){return 1===(e=t).registrationStatus&&e.registrationTime+uk<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Kk(t,s){var a=t.appConfig,u=t.platformLoggerProvider;return _o(this,void 0,void 0,function(){var e,n,r,i,o;return bo(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return vk(t)+"/"+e+"/authTokens:generate"}(a,s),n=_k(a,s),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:ck}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,bk(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,yk(o)];case 3:return[4,gk("Generate Auth Token",i)];case 4:throw t.sent()}})})}function Hk(i,o){return void 0===o&&(o=!1),_o(this,void 0,void 0,function(){var r,e,n;return bo(this,function(t){switch(t.label){case 0:return[4,Vk(i.appConfig,function(t){if(!zk(t))throw pk.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fk}(e)){if(1===n.requestStatus)return r=function(n,r){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,Gk(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,wk(100)];case 3:return t.sent(),[4,Gk(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,Hk(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw pk.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},mo(mo({},e),{authToken:n}));return r=function(i,o){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,Kk(i,o)];case 1:return e=t.sent(),r=mo(mo({},o),{authToken:e}),[4,Uk(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!dk(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,jk(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=mo(mo({},o),{authToken:{requestStatus:0}}),[4,Uk(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function Gk(t){return Vk(t,function(t){if(!zk(t))throw pk.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+uk<Date.now()?mo(mo({},t),{authToken:{requestStatus:0}}):t})}function zk(t){return void 0!==t&&2===t.registrationStatus}function Qk(e,n){return void 0===n&&(n=!1),_o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return[4,function(n){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,qk(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,Hk(e,n)];case 2:return[2,t.sent().token]}})})}function Yk(i,o){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return vk(t)+"/"+e}(i,o),r=_k(i,o),n={method:"DELETE",headers:r},[4,bk(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,gk("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function Xk(t,r){var i=t.appConfig;return function(t,e){Ok();var n=Sk(t);(t=Ck.get(n))||(t=new Set,Ck.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=Sk(t=i),(t=Ck.get(n))&&(t.delete(e),0===t.size&&Ck.delete(n),Pk())}}function Jk(t){return pk.create("missing-app-config-values",{valueName:t})}(Rk=Jl).INTERNAL.registerComponent(new _s("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Jk("App Configuration");if(!t.name)throw Jk("App Name");try{for(var r=wo(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Jk(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,qk(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||Hk(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return Qk(n,t)},delete:function(){return function(r){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,Vk(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw pk.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw pk.create("app-offline");case 3:return[4,Yk(e,n)];case 4:return t.sent(),[4,jk(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return Xk(n,t)}}},"PUBLIC")),Rk.registerVersion("@firebase/installations","0.4.19");var $k,Dr=((M={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',M["only-available-in-window"]="This method is available in a Window context.",M["only-available-in-sw"]="This method is available in a service worker context.",M["permission-default"]="The notification permission was not granted and dismissed instead.",M["permission-blocked"]="The notification permission was not granted and blocked instead.",M["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",M["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",M["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",M["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",M["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",M["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",M["token-update-no-token"]="FCM returned no token when updating the user to push.",M["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",M["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",M["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",M["invalid-vapid-key"]="The public VAPID key must be a string.",M["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",M),Zk=new zo("messaging","Messaging",Dr),tO="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",eO="https://fcmregistrations.googleapis.com/v1",nO="FCM_MSG",rO="google.c.a.c_id";function iO(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Io(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(M=$k=$k||{}).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked";var oO="fcm_token_details_db",sO=5,aO="fcm_token_object_Store";function uO(s){return _o(this,void 0,void 0,function(){var e,o,n=this;return bo(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(oO))return[2,null];t.label=2;case 2:return o=null,[4,sk(oO,sO,function(i){return _o(n,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(aO)?[4,(r=i.transaction.objectStore(aO)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:iO(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:iO(n.auth),p256dh:iO(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:iO(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,ak(oO)];case 4:return t.sent(),[4,ak("fcm_vapid_details_db")];case 5:return t.sent(),[4,ak("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var cO="firebase-messaging-database",hO=1,lO="firebase-messaging-store",fO=null;function pO(){return fO=fO||sk(cO,hO,function(t){0===t.oldVersion&&t.createObjectStore(lO)})}function dO(r){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return e=yO(r),[4,pO()];case 1:return[4,t.sent().transaction(lO).objectStore(lO).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,uO(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,vO(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function vO(r,i){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return e=yO(r),[4,pO()];case 1:return n=t.sent(),[4,(n=n.transaction(lO,"readwrite")).objectStore(lO).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function yO(t){return t.appConfig.appId}function gO(r,i){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,_O(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(mO(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,Zk.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),Zk.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function mO(t){t=t.projectId;return eO+"/projects/"+t+"/registrations"}function _O(t){var n=t.appConfig,r=t.installations;return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function bO(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==tO&&(e.web.applicationPubKey=t),e}function wO(c,h,l){return _o(this,void 0,void 0,function(){var s,a,u;return bo(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw Zk.create("permission-blocked");return[4,function(n,r){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(h,l)];case 1:return u=t.sent(),[4,dO(c)];case 2:return s=t.sent(),a={vapidKey:l,swScope:h.scope,endpoint:u.endpoint,auth:iO(u.getKey("auth")),p256dh:iO(u.getKey("p256dh"))},s?[3,3]:[2,IO(c,a)];case 3:if(e=s.subscriptionOptions,r=(n=a).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,e=n.p256dh===e.p256dh,r&&i&&o&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,gO(c,s.token)];case 5:return t.sent(),[3,7];case 6:return u=t.sent(),console.warn(u),[3,7];case 7:return[2,IO(c,a)];case 8:return Date.now()>=s.createTime+6048e5?[2,function(i,o,s){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return _o(this,void 0,void 0,function(){var e,n,r,i;return bo(this,function(t){switch(t.label){case 0:return[4,_O(o)];case 1:e=t.sent(),n=bO(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(mO(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),Zk.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,Zk.create("token-update-failed",{errorInfo:i});if(!r.token)throw Zk.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=mo(mo({},i),{token:e,createTime:Date.now()}),[4,vO(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,EO(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:s.token,createTime:Date.now(),subscriptionOptions:a},c,h)]:[2,s.token];case 9:return[2]}var e,n,r,i,o})})}function EO(n,r){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,dO(n)];case 1:return(e=t.sent())?[4,gO(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return e=yO(r),[4,pO()];case 1:return n=t.sent(),[4,(n=n.transaction(lO,"readwrite")).objectStore(lO).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function IO(n,r){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,function(o,s){return _o(this,void 0,void 0,function(){var e,n,r,i;return bo(this,function(t){switch(t.label){case 0:return[4,_O(o)];case 1:e=t.sent(),n=bO(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(mO(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),Zk.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,Zk.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw Zk.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,vO(n,e)];case 2:return t.sent(),[2,e.token]}})})}function TO(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);n=e.notification.body;n&&(t.notification.body=n);e=e.notification.image;e&&(t.notification.image=e)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);e=e.fcmOptions.analytics_label;e&&(t.fcmOptions.analyticsLabel=e)}(e,t),e}function SO(t){return"object"==typeof t&&t&&rO in t}function CO(e){return new Promise(function(t){setTimeout(t,e)})}var NO=(Object.defineProperty(AO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),AO.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Zk.create("invalid-bg-handler");this.bgMessageHandler=t},AO.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},AO.prototype.getToken=function(){var n;return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,dO(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:tO,t.label=2;case 2:return[2,wO(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},AO.prototype.deleteToken=function(){return EO(this.firebaseDependencies,self.registration)},AO.prototype.requestPermission=function(){throw Zk.create("only-available-in-window")},AO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Zk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Zk.create("invalid-vapid-key");this.vapidKey=t},AO.prototype.useServiceWorker=function(){throw Zk.create("only-available-in-window")},AO.prototype.onMessage=function(){throw Zk.create("only-available-in-window")},AO.prototype.onTokenRefresh=function(){throw Zk.create("only-available-in-window")},AO.prototype.onPush=function(a){return _o(this,void 0,void 0,function(){var i,o,s;return bo(this,function(t){switch(t.label){case 0:return(s=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(a))?[4,kO()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(i=t.sent(),i.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=$k.PUSH_RECEIVED;try{for(var i=wo(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(i,s)]:(o=!1,s.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((r=mo({},(e=s).notification)).data=((n={})[nO]=e,n),r))]:[3,3]);case 2:t.sent(),o=!0,t.label=3;case 3:return!0===o&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(s=TO(s),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,CO(1e3)]);case 4:return t.sent(),[2]}var e,n,r})})},AO.prototype.onSubChange=function(n){var r;return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,EO(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,dO(this.firebaseDependencies)];case 3:return e=t.sent(),[4,EO(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,wO(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:tO)];case 5:return t.sent(),[2]}})})},AO.prototype.onNotificationClick=function(s){var a;return _o(this,void 0,void 0,function(){var e,n,r,i,o;return bo(this,function(t){switch(t.label){case 0:return(e=null===(a=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===a?void 0:a[nO])?s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(n=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return SO(t.data)?self.location.origin:null}(e))?(r=new URL(n,self.location.href),i=new URL(self.location.origin),r.host!==i.host?[2]:[4,function(u){return _o(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return bo(this,function(t){switch(t.label){case 0:return[4,kO()];case 1:e=t.sent();try{for(n=wo(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]):[2]):[2];case 1:return(o=t.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return o=t.sent(),[4,CO(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=t.sent(),t.label=6;case 6:return o?(e.messageType=$k.NOTIFICATION_CLICKED,e.isFirebaseMessaging=!0,[2,o.postMessage(e)]):[2]}})})},AO);function AO(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function kO(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var OO=(Object.defineProperty(PO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),PO.prototype.messageEventListener=function(i){return _o(this,void 0,void 0,function(){var n,r;return bo(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===$k.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),SO(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},PO.prototype.getVapidKey=function(){return this.vapidKey},PO.prototype.getSwReg=function(){return this.swRegistration},PO.prototype.getToken=function(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw Zk.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,wO(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},PO.prototype.updateVapidKey=function(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=tO),[2]})})},PO.prototype.updateSwReg=function(e){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw Zk.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},PO.prototype.registerDefaultSw=function(){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),Zk.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},PO.prototype.deleteToken=function(){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,EO(this.firebaseDependencies,this.swRegistration)]}})})},PO.prototype.requestPermission=function(){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?Zk.create("permission-blocked"):Zk.create("permission-default")}})})},PO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Zk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Zk.create("invalid-vapid-key");this.vapidKey=t},PO.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Zk.create("invalid-sw-registration");if(this.swRegistration)throw Zk.create("use-sw-after-get-token");this.swRegistration=t},PO.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},PO.prototype.setBackgroundMessageHandler=function(){throw Zk.create("only-available-in-sw")},PO.prototype.onBackgroundMessage=function(){throw Zk.create("only-available-in-sw")},PO.prototype.onTokenRefresh=function(){return function(){}},PO.prototype.logEvent=function(n,r){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case $k.NOTIFICATION_CLICKED:return"notification_open";case $k.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[rO],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},PO);function PO(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function RO(t){return Zk.create("missing-app-config-values",{valueName:t})}Dr={isSupported:DO};function DO(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Jl.INTERNAL.registerComponent(new _s("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw RO("App Configuration Object");if(!t.name)throw RO("App Name");var r=t.options;try{for(var i=wo(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw RO(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!DO())throw Zk.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?NO:OO)(t)},"PUBLIC").setServiceProps(Dr));var xO,LO="firebasestorage.googleapis.com",MO="storageBucket",FO=(go(UO,xO=Ho),UO.prototype.codeEquals=function(t){return VO(t)===this.code},Object.defineProperty(UO.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(UO.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),UO);function UO(t,e){t=xO.call(this,VO(t),"Firebase Storage: "+e+" ("+VO(t)+")")||this;return t.customData={serverResponse:null},Object.setPrototypeOf(t,UO.prototype),t}var jO={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error",UNSUPPORTED_ENVIRONMENT:"unsupported-environment"};function VO(t){return"storage/"+t}function qO(){return new FO(jO.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function BO(){return new FO(jO.CANCELED,"User canceled the upload/download.")}function WO(){return new FO(jO.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KO(t){return new FO(jO.INVALID_ARGUMENT,t)}function HO(){return new FO(jO.APP_DELETED,"The Firebase app was deleted.")}function GO(t){return new FO(jO.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zO(t,e){return new FO(jO.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function QO(t){throw new FO(jO.INTERNAL_ERROR,"Internal error: "+t)}var YO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},XO=function(t,e){this.data=t,this.contentType=e||null};function JO(t,e){switch(t){case YO.RAW:return new XO($O(e));case YO.BASE64:case YO.BASE64URL:return new XO(ZO(t,e));case YO.DATA_URL:return new XO(function(t){t=new tP(t);return t.base64?ZO(YO.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw zO(YO.DATA_URL,"Malformed data URL.")}return $O(e)}(t.rest)}(e),new tP(e).contentType)}throw qO()}function $O(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ZO(e,t){switch(e){case YO.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw zO(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case YO.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw zO(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw zO(e,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}var tP=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw zO(YO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var eP,nP={STATE_CHANGED:"state_changed"},rP="running",iP="pausing",oP="paused",sP="success",aP="canceling",uP="canceled",cP="error",hP={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lP(t){switch(t){case rP:case iP:case aP:return hP.RUNNING;case oP:return hP.PAUSED;case sP:return hP.SUCCESS;case uP:return hP.CANCELED;case cP:default:return hP.ERROR}}(M=eP=eP||{})[M.NO_ERROR=0]="NO_ERROR",M[M.NETWORK_ERROR=1]="NETWORK_ERROR",M[M.ABORT=2]="ABORT";var fP=(pP.prototype.send=function(t,e,n,r){if(this.sent_)throw QO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},pP.prototype.getErrorCode=function(){if(!this.sent_)throw QO("cannot .getErrorCode() before sending");return this.errorCode_},pP.prototype.getStatus=function(){if(!this.sent_)throw QO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},pP.prototype.getResponseText=function(){if(!this.sent_)throw QO("cannot .getResponseText() before sending");return this.xhr_.responseText},pP.prototype.abort=function(){this.xhr_.abort()},pP.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},pP.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},pP.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},pP);function pP(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=eP.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=eP.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=eP.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var dP=(vP.prototype.createXhrIo=function(){return new fP},vP);function vP(){}function yP(t){return"string"==typeof t||t instanceof String}function gP(t){return mP()&&t instanceof Blob}function mP(){return"undefined"!=typeof Blob}function _P(t,e,n,r){if(r<e)throw new FO(jO.INVALID_ARGUMENT,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw new FO(jO.INVALID_ARGUMENT,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function bP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(mP())return new Blob(t);throw new FO(jO.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}var wP=(EP.prototype.size=function(){return this.size_},EP.prototype.type=function(){return this.type_},EP.prototype.slice=function(t,e){if(gP(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new EP(r)}var i,r;return new EP(new Uint8Array(this.data_.buffer,t,e-t),!0)},EP.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(mP()){var n=t.map(function(t){return t instanceof EP?t.data_:t});return new EP(bP.apply(null,n))}var n=t.map(function(t){return yP(t)?JO(YO.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new EP(i,!0)},EP.prototype.uploadData=function(){return this.data_},EP);function EP(t,e){var n=0,r="";gP(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var IP=(Object.defineProperty(TP.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(TP.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),TP.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},TP.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},TP.makeFromBucketSpec=function(e){var t,n;try{t=TP.makeFromUrl(e)}catch(t){return new TP(e,"")}if(""===t.path)return t;throw n=e,new FO(jO.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},TP.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";var r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=LO.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new TP(c[u.indices.bucket],c[u.indices.path]||"");u.postModify(e);break}}if(null==e)throw n=t,new FO(jO.INVALID_URL,"Invalid URL '"+n+"'.");return e},TP);function TP(t,e){this.bucket=t,this.path_=e}function SP(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function CP(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function NP(t){return"https://"+LO+"/v0"+t}function AP(t){var e,n=encodeURIComponent,r="?";for(e in t){t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&")}return r=r.slice(0,-1)}function kP(t,e){return e}var OP=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||kP},PP=null;function RP(){if(PP)return PP;var t=[];t.push(new OP("bucket")),t.push(new OP("generation")),t.push(new OP("metageneration")),t.push(new OP("name","fullPath",!0));var e=new OP("name");e.xform=function(t,e){return!yP(e=e)||e.length<2?e:CP(e)},t.push(e);e=new OP("size");return e.xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new OP("timeCreated")),t.push(new OP("updated")),t.push(new OP("md5Hash",null,!0)),t.push(new OP("cacheControl",null,!0)),t.push(new OP("contentDisposition",null,!0)),t.push(new OP("contentEncoding",null,!0)),t.push(new OP("contentLanguage",null,!0)),t.push(new OP("contentType",null,!0)),t.push(new OP("metadata","customMetadata",!0)),PP=t}function DP(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new IP(t,e);return r.makeStorageReference(e)}})}function xP(t,e,n){e=SP(e);if(null===e)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return DP(r,t),r}(t,e,n)}function LP(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var MP="prefixes",FP="items";function UP(t,e,n){n=SP(n);if(null===n)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[MP])for(var i=0,o=n[MP];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new IP(e,s));r.prefixes.push(a)}if(n[FP])for(var u=0,c=n[FP];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new IP(e,h.name));r.items.push(a)}return r}(t,e,n)}var jP=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function VP(t){if(!t)throw qO()}function qP(n,r){return function(t,e){return VP(null!==(e=xP(n,e,r))),e}}function BP(n,r){return function(t,e){return VP(null!==(e=UP(n,r,e))),e}}function WP(r,i){return function(t,e){var n=xP(r,e,i);return VP(null!==n),function(r,t){if(null===(t=SP(t)))return null;if(!yP(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return NP("/b/"+i(e)+"/o/"+i(n))+AP({alt:"media",token:t})})[0]}(n,e)}}function KP(i){return function(t,e){var n,r=401===t.getStatus()?new FO(jO.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new FO(jO.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new FO(jO.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function HP(r){var i=KP(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new FO(jO.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function GP(t,e,n){var r=NP(e.fullServerUrl()),i=t.maxOperationRetryTime,i=new jP(r,"GET",qP(t,n),i);return i.errorHandler=HP(e),i}function zP(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function QP(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=zP(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+LP(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--",r=wP.getBlob(i,r,a);if(null===r)throw WO();a={name:u.fullPath},u=NP(o),o=t.maxUploadRetryTime,o=new jP(u,"POST",qP(t,n),o);return o.urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=KP(e),o}var YP=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function XP(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){VP(!1)}return VP(!!n&&-1!==(e||["active"]).indexOf(n)),n}function JP(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=zP(e,r,i),i={name:s.fullPath},o=NP(o),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},n=LP(s,n),t=t.maxUploadRetryTime;t=new jP(o,"POST",function(t){var e;XP(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){VP(!1)}return VP(yP(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=KP(e),t}function $P(t,e,n,i){t=t.maxUploadRetryTime,t=new jP(n,"POST",function(t){var e=XP(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){VP(!1)}n||VP(!1);var r=Number(n);return VP(!isNaN(r)),new YP(r,i.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=KP(e),t}function ZP(t,o,e,s,n,a,r,i){var u=new YP(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new FO(jO.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n=r+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},r=s.slice(r,n);if(null===r)throw WO();n=o.maxUploadRetryTime,n=new jP(e,"POST",function(t,e){var n=XP(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?qP(o,a)(t,e):null;return new YP(r,i,"final"===n,e)},n);return n.headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=KP(t),n}var tR=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(t=t,this.next=t.next,this.error=t.error,this.complete=t.complete)},eR=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function nR(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var rR=(iR.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},iR.prototype._shouldDoResumable=function(t){return 262144<t.size()},iR.prototype._start=function(){this._state===rP&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},iR.prototype._resolveToken=function(e){var n=this;this._ref.storage.getAuthToken().then(function(t){switch(n._state){case rP:e(t);break;case aP:n._transition(uP);break;case iP:n._transition(oP)}})},iR.prototype._createResumable=function(){var n=this;this._resolveToken(function(t){var e=JP(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage.makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._uploadUrl=t,n._needToFetchStatus=!1,n.completeTransitions_()},n._errorHandler)})},iR.prototype._fetchStatus=function(){var n=this,r=this._uploadUrl;this._resolveToken(function(t){var e=$P(n._ref.storage,n._ref._location,r,n._blob),t=n._ref.storage.makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._updateProgress(t.current),n._needToFetchStatus=!1,t.finalized&&(n._needToFetchMetadata=!0),n.completeTransitions_()},n._errorHandler)})},iR.prototype._continueUpload=function(){var n=this,r=262144*this._chunkMultiplier,i=new YP(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken(function(t){var e;try{e=ZP(n._ref._location,n._ref.storage,o,n._blob,r,n._mappings,i,n._makeProgressCallback())}catch(t){return n._error=t,void n._transition(cP)}t=n._ref.storage.makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._increaseMultiplier(),n._request=void 0,n._updateProgress(t.current),t.finalized?(n._metadata=t.metadata,n._transition(sP)):n.completeTransitions_()},n._errorHandler)})},iR.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},iR.prototype._fetchMetadata=function(){var n=this;this._resolveToken(function(t){var e=GP(n._ref.storage,n._ref._location,n._mappings),t=n._ref.storage.makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._transition(sP)},n._metadataErrorHandler)})},iR.prototype._oneShotUpload=function(){var n=this;this._resolveToken(function(t){var e=QP(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage.makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._updateProgress(n._blob.size()),n._transition(sP)},n._errorHandler)})},iR.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},iR.prototype._transition=function(t){if(this._state!==t)switch(t){case aP:case iP:this._state=t,void 0!==this._request&&this._request.cancel();break;case rP:var e=this._state===oP;this._state=t,e&&(this._notifyObservers(),this._start());break;case oP:this._state=t,this._notifyObservers();break;case uP:this._error=BO(),this._state=t,this._notifyObservers();break;case cP:case sP:this._state=t,this._notifyObservers()}},iR.prototype.completeTransitions_=function(){switch(this._state){case iP:this._transition(oP);break;case aP:this._transition(uP);break;case rP:this._start()}},Object.defineProperty(iR.prototype,"snapshot",{get:function(){var t=lP(this._state);return new eR(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),iR.prototype.on=function(t,e,n,r){var i=this,o=new tR(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},iR.prototype.then=function(t,e){return this._promise.then(t,e)},iR.prototype.catch=function(t){return this.then(null,t)},iR.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},iR.prototype._removeObserver=function(t){t=this._observers.indexOf(t);-1!==t&&this._observers.splice(t,1)},iR.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},iR.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(lP(this._state)){case hP.SUCCESS:nR(this._resolve.bind(null,this.snapshot))();break;case hP.CANCELED:case hP.ERROR:nR(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},iR.prototype._notifyObserver=function(t){switch(lP(this._state)){case hP.RUNNING:case hP.PAUSED:t.next&&nR(t.next.bind(t,this.snapshot))();break;case hP.SUCCESS:t.complete&&nR(t.complete.bind(t))();break;case hP.CANCELED:case hP.ERROR:t.error&&nR(t.error.bind(t,this._error))();break;default:t.error&&nR(t.error.bind(t,this._error))()}},iR.prototype.resume=function(){var t=this._state===oP||this._state===iP;return t&&this._transition(rP),t},iR.prototype.pause=function(){var t=this._state===rP;return t&&this._transition(iP),t},iR.prototype.cancel=function(){var t=this._state===rP||this._state===iP;return t&&this._transition(aP),t},iR);function iR(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=RP(),this._resumable=this._shouldDoResumable(this._blob),this._state=rP,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(jO.CANCELED)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(cP))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(jO.CANCELED)?r.completeTransitions_():(r._error=t,r._transition(cP))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var oR=(sR.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},sR.prototype.newRef=function(t,e){return new sR(t,e)},Object.defineProperty(sR.prototype,"root",{get:function(){var t=new IP(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(sR.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(sR.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(sR.prototype,"name",{get:function(){return CP(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(sR.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(sR.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;t=new IP(this._location.bucket,t);return new sR(this._service,t)},enumerable:!1,configurable:!0}),sR.prototype._throwIfRoot=function(t){if(""===this._location.path)throw GO(t)},sR);function sR(t,e){this._service=t,this._location=e instanceof IP?e:IP.makeFromUrl(e)}function aR(t){var e={prefixes:[],items:[]};return function r(i,o,s){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,uR(i,{pageToken:s})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(t,e).then(function(){return e})}function uR(u,c){return _o(this,void 0,void 0,function(){var s,a;return bo(this,function(t){switch(t.label){case 0:return null!=c&&"number"==typeof c.maxResults&&_P("options.maxResults",1,1e3,c.maxResults),[4,u.storage.getAuthToken()];case 1:return s=t.sent(),a=c||{},e=u.storage,n=u._location,r="/",i=a.pageToken,o=a.maxResults,t={},n.isRoot?t.prefix="":t.prefix=n.path+"/",r&&0<r.length&&(t.delimiter=r),i&&(t.pageToken=i),o&&(t.maxResults=o),i=NP(n.bucketOnlyServerUrl()),o=e.maxOperationRetryTime,(o=new jP(i,"GET",BP(e,n.bucket),o)).urlParams=t,o.errorHandler=KP(n),[2,u.storage.makeRequest(o,s).getPromise()]}var e,n,r,i,o})})}function cR(a,u){return _o(this,void 0,void 0,function(){var s;return bo(this,function(t){switch(t.label){case 0:return a._throwIfRoot("updateMetadata"),[4,a.storage.getAuthToken()];case 1:return s=t.sent(),e=a.storage,n=a._location,r=u,i=RP(),o=NP(n.fullServerUrl()),t=LP(r,i),r=e.maxOperationRetryTime,(r=new jP(o,"PATCH",qP(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=t,r.errorHandler=HP(n),[2,a.storage.makeRequest(r,s).getPromise()]}var e,n,r,i,o})})}function hR(s){return _o(this,void 0,void 0,function(){var o;return bo(this,function(t){switch(t.label){case 0:return s._throwIfRoot("getDownloadURL"),[4,s.storage.getAuthToken()];case 1:return o=t.sent(),e=s.storage,n=s._location,r=RP(),i=NP(n.fullServerUrl()),t=e.maxOperationRetryTime,(t=new jP(i,"GET",WP(e,r),t)).errorHandler=HP(n),[2,s.storage.makeRequest(t,o).getPromise().then(function(t){if(null===t)throw new FO(jO.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})]}var e,n,r,i})})}function lR(i){return _o(this,void 0,void 0,function(){var r;return bo(this,function(t){switch(t.label){case 0:return i._throwIfRoot("deleteObject"),[4,i.storage.getAuthToken()];case 1:return r=t.sent(),e=i.storage,n=i._location,t=NP(n.fullServerUrl()),e=e.maxOperationRetryTime,(e=new jP(t,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=HP(n),[2,i.storage.makeRequest(e,r).getPromise()]}var e,n})})}function fR(t,e){var n,e=(n=t._location.path,e=(e=e).split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new IP(t._location.bucket,e);return new oR(t.storage,e)}var pR=(Object.defineProperty(dR.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(dR.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(dR.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(dR.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),dR);function dR(t,e,n){this._delegate=t,this.task=e,this.ref=n}var vR=(Object.defineProperty(yR.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),yR.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new pR(t,n,n._ref))},t)},yR.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new pR(t,i,i._ref))}:{next:e.next?function(t){return e.next(new pR(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},yR);function yR(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new pR(this._delegate.snapshot,this,this._ref)}var gR=(Object.defineProperty(mR.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new _R(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(mR.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new _R(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(mR.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),mR);function mR(t,e){this._delegate=t,this._service=e}var _R=(Object.defineProperty(bR.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(bR.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(bR.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),bR.prototype.toString=function(){return this._delegate.toString()},bR.prototype.child=function(t){return new bR(fR(this._delegate,t),this.storage)},Object.defineProperty(bR.prototype,"root",{get:function(){return new bR(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(bR.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new bR(t,this.storage)},enumerable:!1,configurable:!0}),bR.prototype.put=function(t,e){return this._throwIfRoot("put"),new vR((n=this._delegate,t=t,void 0===(e=e)&&(e=null),n._throwIfRoot("uploadBytesResumable"),new rR(n,new wP(t),e)),this);var n},bR.prototype.putString=function(t,e,n){return void 0===e&&(e=YO.RAW),this._throwIfRoot("putString"),new vR((r=this._delegate,t=t,n=n,void 0===(e=e)&&(e=YO.RAW),r._throwIfRoot("putString"),t=JO(e,t),null==(n=mo({},n)).contentType&&null!=t.contentType&&(n.contentType=t.contentType),new rR(r,new wP(t.data,!0),n)),this);var r},bR.prototype.listAll=function(){var e=this;return aR(this._delegate).then(function(t){return new gR(t,e.storage)})},bR.prototype.list=function(t){var e=this;return uR(this._delegate,t).then(function(t){return new gR(t,e.storage)})},bR.prototype.getMetadata=function(){return function(r){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return r._throwIfRoot("getMetadata"),[4,r.storage.getAuthToken()];case 1:return e=t.sent(),n=GP(r.storage,r._location,RP()),[2,r.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},bR.prototype.updateMetadata=function(t){return cR(this._delegate,t)},bR.prototype.getDownloadURL=function(){return hR(this._delegate)},bR.prototype.delete=function(){return this._throwIfRoot("delete"),lR(this._delegate)},bR.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw GO(t)},bR);function bR(t,e){this._delegate=t,this.storage=e}var wR=(ER.prototype.getPromise=function(){return this.promise_},ER.prototype.cancel=function(t){},ER);function ER(t){this.promise_=Promise.reject(t)}var IR=(TR.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=qO()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?HO:BO)()):i(n=new FO(jO.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,To([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new SR(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new SR(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===eP.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new SR(n,t))):(t=t.getErrorCode()===eP.ABORT,r(!1,new SR(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},TR.prototype.getPromise=function(){return this.promise_},TR.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},TR.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},TR);function TR(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var SR=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function CR(t,e,n,r){var i=AP(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return i=s,(e=e)&&(i["X-Firebase-GMPID"]=e),e=s,null!==(n=n)&&0<n.length&&(e.Authorization="Firebase "+n),e=s,n=void 0!==Jl?Jl.SDK_VERSION:"AppManager",e["X-Firebase-Storage-Version"]="webjs/"+n,new IR(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}function NR(t){return/^[A-Za-z]+:\/\//.test(t)}function AR(t,e){if(t instanceof OR){var n=t;if(null==n._bucket)throw new FO(jO.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MO+"' property when initializing the app?");n=new oR(n,n._bucket);return null!=e?AR(n,e):n}if(void 0===e)return t;if(e.includes(".."))throw KO('`path` param cannot contain ".."');return fR(t,e)}function kR(t,e){if(e&&NR(e)){if(t instanceof OR)return new oR(t,e);throw KO("To use ref(service, url), the first argument must be a Storage instance.")}return AR(t,e)}var OR=(Object.defineProperty(PR.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){_P("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(PR.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){_P("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),PR.prototype.getAuthToken=function(){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},PR.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},PR.prototype.makeStorageReference=function(t){return new oR(this,t)},PR.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new wR(HO());var r=CR(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},PR);function PR(t,e,n,r){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?IP.makeFromBucketSpec(r):null==(r=null==(r=this.app.options)?void 0:r[MO])?null:IP.makeFromBucketSpec(r)}var RR=(Object.defineProperty(DR.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(DR.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),DR.prototype.ref=function(t){if(NR(t))throw KO("ref() expected a child path but got a URL, use refFromURL instead.");return new _R(kR(this._delegate,t),this)},DR.prototype.refFromURL=function(t){if(!NR(t))throw KO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{IP.makeFromUrl(t)}catch(t){throw KO("refFromUrl() expected a valid full URL but got an invalid one.")}return new _R(kR(this._delegate,t),this)},DR.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},DR.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},DR);function DR(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var xR,LR;function MR(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new RR(n,new OR(n,t,new dP,e))}LR={TaskState:hP,TaskEvent:nP,StringFormat:YO,Storage:OR,Reference:_R},(xR=Jl).INTERNAL.registerComponent(new _s("storage",MR,"PUBLIC").setServiceProps(LR).setMultipleInstances(!0)),xR.registerVersion("@firebase/storage","0.4.2");var FR,UR,jR="0.4.4",VR="FB-PERF-TRACE-MEASURE",qR="@firebase/performance/config",BR="@firebase/performance/configexpire",Dr="Performance",M=((M={})["trace started"]="Trace {$traceName} was started before.",M["trace stopped"]="Trace {$traceName} is not running.",M["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",M["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",M["no window"]="Window is not available.",M["no app id"]="App id is not available.",M["no project id"]="Project id is not available.",M["no api key"]="Api key is not available.",M["invalid cc log"]="Attempted to queue invalid cc event",M["FB not default"]="Performance can only start when Firebase app instance is the default one.",M["RC response not ok"]="RC response is not ok",M["invalid attribute name"]="Attribute name {$attributeName} is invalid.",M["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",M["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",M["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",M),WR=new zo("performance",Dr,M),KR=new Ds(Dr);KR.logLevel=Ns.INFO;var HR,GR=(zR.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},zR.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},zR.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},zR.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},zR.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},zR.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},zR.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Vo()||(KR.info("IndexedDB is not supported by current browswer"),!1):(KR.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},zR.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},zR.getInstance=function(){return void 0===FR&&(FR=new zR(UR)),FR},zR);function zR(t){if(!(this.window=t))throw WR.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function QR(t,e){var n=t.length-e.length;if(n<0||1<n)throw WR.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var YR,XR,JR=($R.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw WR.create("no app id");return t},$R.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw WR.create("no project id");return t},$R.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw WR.create("no api key");return t},$R.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},$R.getInstance=function(){return void 0===HR&&(HR=new $R),HR},$R);function $R(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=QR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=QR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(Dr=XR=XR||{})[Dr.UNKNOWN=0]="UNKNOWN",Dr[Dr.VISIBLE=1]="VISIBLE",Dr[Dr.HIDDEN=2]="HIDDEN";var ZR=["firebase_","google_","ga_"],tD=new RegExp("^[a-zA-Z]\\w*$");function eD(){switch(GR.getInstance().document.visibilityState){case"visible":return XR.VISIBLE;case"hidden":return XR.HIDDEN;default:return XR.UNKNOWN}}var nD="0.0.1",rD={loggingEnabled:!0},iD="FIREBASE_INSTALLATIONS_AUTH";function oD(t){var n,e=function(){var t=GR.getInstance().localStorage;if(!t)return;var e=t.getItem(BR);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(qR);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(aD(e),Promise.resolve()):(n=t,function(){var t=JR.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+JR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+JR.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:iD+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:JR.getInstance().getAppId(),app_version:jR,sdk_version:nD})});return fetch(t).then(function(t){if(t.ok)return t.json();throw WR.create("RC response not ok")})}).catch(function(){KR.info(sD)}).then(aD).then(function(t){var e=GR.getInstance().localStorage;if(!t||!e)return;e.setItem(qR,JSON.stringify(t)),e.setItem(BR,String(Date.now()+60*JR.getInstance().configTimeToLive*60*1e3))},function(){}))}var sD="Could not fetch config, will use default configs";function aD(t){if(!t)return t;var e=JR.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):rD.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=uD(e.tracesSamplingRate),e.logNetworkAfterSampling=uD(e.networkRequestsSamplingRate),t}function uD(t){return Math.random()<=t}var cD,hD=1;function lD(){return hD=2,cD=cD||function(){var n=GR.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=JR.getInstance().installationsService.getId()).then(function(t){YR=t}),t;var t}).then(oD).then(fD,fD)}function fD(){hD=3}var pD,dD=1e4,vD=5500,yD=3,gD=yD,mD=[],_D=!1;function bD(t){setTimeout(function(){if(0!==gD)return mD.length?void function(){var t=To(mD);mD=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});(function(t,r){return function(t){var e=JR.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||KR.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=dD;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(mD=To(r,mD),KR.info("Retry transport request later.")),gD=yD,bD(n)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:JR.getInstance().logSource,log_event:e},t).catch(function(){mD=To(t,mD),gD--,KR.info("Tries left: "+gD+"."),bD(dD)})}():bD(dD)},t)}function wD(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw WR.create("invalid cc log");mD=To(mD,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function ED(t,e){(pD=pD||wD(SD))(t,e)}function ID(t){var e=JR.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&GR.getInstance().requiredApisAvailable()&&(t.isAuto&&eD()!==XR.VISIBLE||(3===hD?TD(t):lD().then(function(){return TD(t)},function(){return TD(t)})))}function TD(t){var e;!YR||(e=JR.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return ED(t,1)},0)}function SD(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:CD(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:CD(),trace_metric:e};return JSON.stringify(e)})(t)}function CD(){return{google_app_id:JR.getInstance().getAppId(),app_instance_id:YR,web_app_info:{sdk_version:jR,page_url:GR.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=GR.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:eD(),effective_connection_type:function(){var t=GR.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var ND=["_fp","_fcp","_fid"];var AD=(kD.prototype.start=function(){if(1!==this.state)throw WR.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},kD.prototype.stop=function(){if(2!==this.state)throw WR.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ID(this)},kD.prototype.record=function(t,e,n){if(t<=0)throw WR.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw WR.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=mo({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}ID(this)},kD.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},kD.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<ND.indexOf(n))&&n.startsWith("_"))throw WR.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&KR.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},kD.prototype.getMetric=function(t){return this.counters[t]||0},kD.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!ZR.some(function(t){return n.startsWith(t)})&&!!n.match(tD)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw WR.create("invalid attribute name",{attributeName:t});if(!r)throw WR.create("invalid attribute value",{attributeValue:e})}},kD.prototype.getAttribute=function(t){return this.customAttributes[t]},kD.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},kD.prototype.getAttributes=function(){return mo({},this.customAttributes)},kD.prototype.setStartTime=function(t){this.startTimeUs=t},kD.prototype.setDuration=function(t){this.durationUs=t},kD.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},kD.createOobTrace=function(t,e,n){var r,i=GR.getInstance().getUrl();i&&(r=new kD("_wt_"+i,!0),i=Math.floor(1e3*GR.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),ID(r))},kD.createUserTimingTrace=function(t){ID(new kD(t,!1,t))},kD);function kD(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=GR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||VR+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function OD(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=GR.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=JR.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return ED(e,0)},0)))}var PD=5e3;function RD(){YR&&(setTimeout(function(){var t=GR.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){AD.createOobTrace(e,n),r=void 0},PD),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),AD.createOobTrace(e,n,t))})):AD.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=GR.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){OD(r[n])}t.setupObserver("resource",OD)},0),setTimeout(function(){for(var t=GR.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){DD(r[n])}t.setupObserver("measure",DD)},0))}function DD(t){t=t.name;t.substring(0,VR.length)!==VR&&AD.createUserTimingTrace(t)}var xD=(LD.prototype.trace=function(t){return new AD(t)},Object.defineProperty(LD.prototype,"instrumentationEnabled",{get:function(){return JR.getInstance().instrumentationEnabled},set:function(t){JR.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(LD.prototype,"dataCollectionEnabled",{get:function(){return JR.getInstance().dataCollectionEnabled},set:function(t){JR.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),LD);function LD(t){this.app=t,GR.getInstance().requiredApisAvailable()&&qo().then(function(t){t&&(_D||(bD(vD),_D=!0),lD().then(RD,RD))}).catch(function(t){KR.info("Environment doesn't support IndexedDB: "+t)})}var MD;function FD(t,e){if("[DEFAULT]"!==t.name)throw WR.create("FB not default");if("undefined"==typeof window)throw WR.create("no window");return UR=window,JR.getInstance().firebaseAppInstance=t,JR.getInstance().installationsService=e,new xD(t)}(MD=Jl).INTERNAL.registerComponent(new _s("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return FD(e,t)},"PUBLIC")),MD.registerVersion("@firebase/performance","0.4.4");var UD,jD,VD="firebase_id",qD="origin",BD=6e4,WD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",KD="https://www.googletagmanager.com/gtag/js";(Dr=UD=UD||{}).EVENT="event",Dr.SET="set",Dr.CONFIG="config",(Dr=jD=jD||{}).ADD_SHIPPING_INFO="add_shipping_info",Dr.ADD_PAYMENT_INFO="add_payment_info",Dr.ADD_TO_CART="add_to_cart",Dr.ADD_TO_WISHLIST="add_to_wishlist",Dr.BEGIN_CHECKOUT="begin_checkout",Dr.CHECKOUT_PROGRESS="checkout_progress",Dr.EXCEPTION="exception",Dr.GENERATE_LEAD="generate_lead",Dr.LOGIN="login",Dr.PAGE_VIEW="page_view",Dr.PURCHASE="purchase",Dr.REFUND="refund",Dr.REMOVE_FROM_CART="remove_from_cart",Dr.SCREEN_VIEW="screen_view",Dr.SEARCH="search",Dr.SELECT_CONTENT="select_content",Dr.SELECT_ITEM="select_item",Dr.SELECT_PROMOTION="select_promotion",Dr.SET_CHECKOUT_OPTION="set_checkout_option",Dr.SHARE="share",Dr.SIGN_UP="sign_up",Dr.TIMING_COMPLETE="timing_complete",Dr.VIEW_CART="view_cart",Dr.VIEW_ITEM="view_item",Dr.VIEW_ITEM_LIST="view_item_list",Dr.VIEW_PROMOTION="view_promotion",Dr.VIEW_SEARCH_RESULTS="view_search_results";var HD=new Ds("@firebase/analytics");function GD(o,s,a,u){return function(n,r,i){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==UD.EVENT?[3,2]:[4,function(u,c,h,l,f){return _o(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return bo(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(UD.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),HD.error(a),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==UD.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),HD.error(n),[3,8];case 8:return r(UD.CONFIG,a,u),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(UD.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),HD.error(e),[3,7];case 7:return[2]}})})}}var Dr=((Dr={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Dr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Dr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Dr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Dr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Dr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Dr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Dr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Dr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Dr),zD=new zo("analytics","Analytics",Dr),QD=30;function YD(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var XD=new(YD.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},YD.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},YD.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},YD);function JD(o){var s;return _o(this,void 0,void 0,function(){var e,n,r,i;return bo(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=WD.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw zD.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function $D(a,u,c){return void 0===u&&(u=XD),_o(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return bo(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw zD.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new tx,setTimeout(function(){return _o(s,void 0,void 0,function(){return bo(this,function(t){return o.abort(),[2]})})},void 0!==c?c:BD),[2,function u(c,t,h,l){var f=t.throttleEndTimeMillis,p=t.backoffCount;void 0===l&&(l=XD);return _o(this,void 0,void 0,function(){var e,n,r,s,a;return bo(this,function(t){switch(t.label){case 0:e=c.appId,n=c.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(i=h,o=f,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(zD.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 2:return t.sent(),[3,4];case 3:if(s=t.sent(),n)return HD.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:n}];throw s;case 4:return t.trys.push([4,6,,7]),[4,JD(c)];case 5:return a=t.sent(),l.deleteThrottleMetadata(e),[2,a];case 6:if(ZD(r=t.sent()))return s=503===Number(r.customData.httpStatus)?ms(p,l.intervalMillis,QD):ms(p,l.intervalMillis),a={throttleEndTimeMillis:Date.now()+s,backoffCount:p+1},l.setThrottleMetadata(e,a),HD.debug("Calling attemptFetch again in "+s+" millis"),[2,u(c,a,h,l)];if(l.deleteThrottleMetadata(e),n)return HD.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}var i,o})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw zD.create("no-api-key")})})}function ZD(t){if(t instanceof Ho&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}var tx=(ex.prototype.addEventListener=function(t){this.listeners.push(t)},ex.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},ex);function ex(){this.listeners=[]}function nx(i,o,s,a,u){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return(e=$D(i)).then(function(t){s[t.measurementId]=t.appId,i.options.measurementId&&t.measurementId!==i.options.measurementId&&HD.warn("The measurement ID in the local Firebase config ("+i.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return HD.error(t)}),o.push(e),n=function(){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return Vo()?[3,1]:(HD.warn(zD.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,qo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),HD.warn(zD.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?a.getId():void 0}),[4,Promise.all([e,n])];case 1:return r=t.sent(),e=r[0],n=r[1],u("js",new Date),(r={})[qD]="firebase",r.update=!0,r=r,null!=n&&(r[VD]=n),u(UD.CONFIG,e.measurementId,r),[2,e.measurementId]}})})}var rx,ix,ox={},sx=[],ax={},ux="dataLayer",cx="gtag",hx=!1;function lx(t){if(hx)throw zD.create("already-initialized");t.dataLayerName&&(ux=t.dataLayerName),t.gtagName&&(cx=t.gtagName)}function fx(t,e){n=[],Fo()&&n.push("This is a browser extension environment."),Bo()||n.push("Cookies are not available."),0<n.length&&(n=n.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=zD.create("invalid-analytics-context",{errorInfo:n}),HD.warn(n.message));var n,r,i,o,s,a,u=t.options.appId;if(!u)throw zD.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw zD.create("no-api-key");HD.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ox[u])throw zD.create("already-exists",{id:u});return hx||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(KD))return r}}()||(s=ux,(a=document.createElement("script")).src=KD+"?l="+s,a.async=!0,document.head.appendChild(a)),i=ux,o=[],Array.isArray(window[i])?o=window[i]:window[i]=o,n=ox,s=sx,a=ax,r=ux,i=cx,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)},window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=GD(o,n,s,a),i={gtagCore:o,wrappedGtag:window[i]},ix=i.wrappedGtag,rx=i.gtagCore,hx=!0),ox[u]=nx(t,sx,ax,e,rx),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,s){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return s&&s.global?(n(UD.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=mo(mo({},o),{send_to:e}),n(UD.EVENT,i,e),t.label=3;case 3:return[2]}})})})(ix,ox[u],t,e,n).catch(function(t){return HD.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(UD.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(UD.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(ix,ox[u],t,e).catch(function(t){return HD.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(UD.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(UD.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(ix,ox[u],t,e).catch(function(t){return HD.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return _o(this,void 0,void 0,function(){var e,n,r,i,o;return bo(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(UD.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(UD.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(ix,ox[u],t,e).catch(function(t){return HD.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(ox[u],t).catch(function(t){return HD.error(t)})},INTERNAL:{delete:function(){return delete ox[u],Promise.resolve()}}}}var px,dx="analytics";function vx(){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:if(Fo())return[2,!1];if(!Bo())return[2,!1];if(!Vo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,qo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(px=Jl).INTERNAL.registerComponent(new _s(dx,function(t){return fx(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:lx,EventName:jD,isSupported:vx})),px.INTERNAL.registerComponent(new _s("analytics-internal",function(t){try{return{logEvent:t.getProvider(dx).getImmediate().logEvent}}catch(t){throw zD.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),px.registerVersion("@firebase/analytics","0.6.2");var yx=(gx.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},gx.prototype.fetch=function(i){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},gx);function gx(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Dr=((Dr={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Dr["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Dr["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Dr["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Dr["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Dr["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Dr["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Dr["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Dr["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Dr["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Dr["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Dr["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Dr["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Dr),mx=new zo("remoteconfig","Remote Config",Dr);var _x=(bx.prototype.fetch=function(f){return _o(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return bo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),mx.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),mx.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw mx.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},bx);function bx(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var wx=(Ex.prototype.addEventListener=function(t){this.listeners.push(t)},Ex.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},Ex);function Ex(){this.listeners=[]}var Ix=["1","true","t","yes","y","on"],Tx=(Sx.prototype.asString=function(){return this._value},Sx.prototype.asBoolean=function(){return"static"!==this._source&&0<=Ix.indexOf(this._value.toLowerCase())},Sx.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},Sx.prototype.getSource=function(){return this._source},Sx);function Sx(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var Cx=(Nx.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Ns.DEBUG;break;case"silent":this._logger.logLevel=Ns.SILENT;break;default:this._logger.logLevel=Ns.ERROR}},Object.defineProperty(Nx.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(Nx.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),Nx.prototype.activate=function(){return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},Nx.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},Nx.prototype.fetch=function(){return _o(this,void 0,void 0,function(){var r,i,o,s=this;return bo(this,function(t){switch(t.label){case 0:r=new wx,setTimeout(function(){return _o(s,void 0,void 0,function(){return bo(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof Ho&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},Nx.prototype.fetchAndActivate=function(){return _o(this,void 0,void 0,function(){return bo(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},Nx.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(mo(mo({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},Nx.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},Nx.prototype.getNumber=function(t){return this.getValue(t).asNumber()},Nx.prototype.getString=function(t){return this.getValue(t).asString()},Nx.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Tx("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Tx("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Tx("static"))},Nx);function Nx(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function Ax(t,e){t=t.target.error||void 0;return mx.create(e,{originalErrorMessage:t&&t.message})}var kx="app_namespace_store",Ox="firebase_remote_config",Px=1;var Rx=(Dx.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},Dx.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},Dx.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},Dx.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},Dx.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},Dx.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},Dx.prototype.getActiveConfig=function(){return this.get("active_config")},Dx.prototype.setActiveConfig=function(t){return this.set("active_config",t)},Dx.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},Dx.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},Dx.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},Dx.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},Dx.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},Dx.prototype.get=function(a){return _o(this,void 0,void 0,function(){var o,s=this;return bo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([kx],"readonly").objectStore(kx),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(Ax(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(mx.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},Dx.prototype.set=function(a,u){return _o(this,void 0,void 0,function(){var o,s=this;return bo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([kx],"readwrite").objectStore(kx),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(Ax(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(mx.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},Dx.prototype.delete=function(a){return _o(this,void 0,void 0,function(){var o,s=this;return bo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([kx],"readwrite").objectStore(kx),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(Ax(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(mx.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},Dx.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},Dx);function Dx(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(Ox,Px);t.onerror=function(t){n(Ax(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(kx,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var xx=(Lx.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},Lx.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},Lx.prototype.getActiveConfig=function(){return this.activeConfig},Lx.prototype.loadFromStorage=function(){return _o(this,void 0,void 0,function(){var e,n,r;return bo(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},Lx.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},Lx.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},Lx.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},Lx);function Lx(t){this.storage=t}var Mx=(Fx.prototype.fetch=function(n){return _o(this,void 0,void 0,function(){var e;return bo(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},Fx.prototype.attemptFetch=function(r,t){var s=t.throttleEndTimeMillis,a=t.backoffCount;return _o(this,void 0,void 0,function(){var e,n;return bo(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(mx.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof Ho&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+ms(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},Fx);function Fx(t,e){this.client=t,this.storage=e}var Ux,jx="@firebase/remote-config";return(Ux=Jl).INTERNAL.registerComponent(new _s("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw mx.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw mx.create("registration-project-id");if(!s)throw mx.create("registration-api-key");if(!a)throw mx.create("registration-app-id");e=e||"firebase";var u=new Rx(a,n.name,e),t=new xx(u),i=new Ds(jx);i.logLevel=Ns.ERROR;a=new _x(r,Ux.SDK_VERSION,e,o,s,a),a=new Mx(a,u),a=new yx(a,u,t,i),i=new Cx(n,a,t,u,i);return i.ensureInitialized(),i},"PUBLIC").setMultipleInstances(!0)),Ux.registerVersion(jx,"0.1.30"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Jl.registerVersion("firebase","8.0.2","cdn"),Jl});
//# sourceMappingURL=firebase.js.map
